(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var bm={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function kC(){if(eE)return Yl;eE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var h=null;if(l!==void 0&&(h=""+l),a.key!==void 0&&(h=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:i,type:s,key:h,ref:a!==void 0?a:null,props:l}}return Yl.Fragment=e,Yl.jsx=t,Yl.jsxs=t,Yl}var tE;function LC(){return tE||(tE=1,bm.exports=kC()),bm.exports}var I=LC(),Cm={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function PC(){if(nE)return be;nE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,G={};function z(M,ee,he){this.props=M,this.context=ee,this.refs=G,this.updater=he||D}z.prototype.isReactComponent={},z.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},z.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function W(){}W.prototype=z.prototype;function ne(M,ee,he){this.props=M,this.context=ee,this.refs=G,this.updater=he||D}var te=ne.prototype=new W;te.constructor=ne,O(te,z.prototype),te.isPureReactComponent=!0;var _e=Array.isArray,fe={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function L(M,ee,he,ae,oe,Ce){return he=Ce.ref,{$$typeof:i,type:M,key:ee,ref:he!==void 0?he:null,props:Ce}}function R(M,ee){return L(M.type,ee,void 0,void 0,void 0,M.props)}function b(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function x(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(he){return ee[he]})}var k=/\/+/g;function j(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?x(""+M.key):ee.toString(36)}function N(){}function Ct(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(N,N):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function vt(M,ee,he,ae,oe){var Ce=typeof M;(Ce==="undefined"||Ce==="boolean")&&(M=null);var we=!1;if(M===null)we=!0;else switch(Ce){case"bigint":case"string":case"number":we=!0;break;case"object":switch(M.$$typeof){case i:case e:we=!0;break;case E:return we=M._init,vt(we(M._payload),ee,he,ae,oe)}}if(we)return oe=oe(M),we=ae===""?"."+j(M,0):ae,_e(oe)?(he="",we!=null&&(he=we.replace(k,"$&/")+"/"),vt(oe,ee,he,"",function(ht){return ht})):oe!=null&&(b(oe)&&(oe=R(oe,he+(oe.key==null||M&&M.key===oe.key?"":(""+oe.key).replace(k,"$&/")+"/")+we)),ee.push(oe)),1;we=0;var Et=ae===""?".":ae+":";if(_e(M))for(var qe=0;qe<M.length;qe++)ae=M[qe],Ce=Et+j(ae,qe),we+=vt(ae,ee,he,Ce,oe);else if(qe=w(M),typeof qe=="function")for(M=qe.call(M),qe=0;!(ae=M.next()).done;)ae=ae.value,Ce=Et+j(ae,qe++),we+=vt(ae,ee,he,Ce,oe);else if(Ce==="object"){if(typeof M.then=="function")return vt(Ct(M),ee,he,ae,oe);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return we}function se(M,ee,he){if(M==null)return M;var ae=[],oe=0;return vt(M,ae,"","",function(Ce){return ee.call(he,Ce,oe++)}),ae}function ve(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(he){(M._status===0||M._status===-1)&&(M._status=1,M._result=he)},function(he){(M._status===0||M._status===-1)&&(M._status=2,M._result=he)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var pe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Qe(){}return be.Children={map:se,forEach:function(M,ee,he){se(M,function(){ee.apply(this,arguments)},he)},count:function(M){var ee=0;return se(M,function(){ee++}),ee},toArray:function(M){return se(M,function(ee){return ee})||[]},only:function(M){if(!b(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},be.Component=z,be.Fragment=t,be.Profiler=a,be.PureComponent=ne,be.StrictMode=s,be.Suspense=p,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,be.act=function(){throw Error("act(...) is not supported in production builds of React.")},be.cache=function(M){return function(){return M.apply(null,arguments)}},be.cloneElement=function(M,ee,he){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ae=O({},M.props),oe=M.key,Ce=void 0;if(ee!=null)for(we in ee.ref!==void 0&&(Ce=void 0),ee.key!==void 0&&(oe=""+ee.key),ee)!Re.call(ee,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ee.ref===void 0||(ae[we]=ee[we]);var we=arguments.length-2;if(we===1)ae.children=he;else if(1<we){for(var Et=Array(we),qe=0;qe<we;qe++)Et[qe]=arguments[qe+2];ae.children=Et}return L(M.type,oe,void 0,void 0,Ce,ae)},be.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},be.createElement=function(M,ee,he){var ae,oe={},Ce=null;if(ee!=null)for(ae in ee.key!==void 0&&(Ce=""+ee.key),ee)Re.call(ee,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(oe[ae]=ee[ae]);var we=arguments.length-2;if(we===1)oe.children=he;else if(1<we){for(var Et=Array(we),qe=0;qe<we;qe++)Et[qe]=arguments[qe+2];oe.children=Et}if(M&&M.defaultProps)for(ae in we=M.defaultProps,we)oe[ae]===void 0&&(oe[ae]=we[ae]);return L(M,Ce,void 0,void 0,null,oe)},be.createRef=function(){return{current:null}},be.forwardRef=function(M){return{$$typeof:d,render:M}},be.isValidElement=b,be.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:ve}},be.memo=function(M,ee){return{$$typeof:g,type:M,compare:ee===void 0?null:ee}},be.startTransition=function(M){var ee=fe.T,he={};fe.T=he;try{var ae=M(),oe=fe.S;oe!==null&&oe(he,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Qe,pe)}catch(Ce){pe(Ce)}finally{fe.T=ee}},be.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},be.use=function(M){return fe.H.use(M)},be.useActionState=function(M,ee,he){return fe.H.useActionState(M,ee,he)},be.useCallback=function(M,ee){return fe.H.useCallback(M,ee)},be.useContext=function(M){return fe.H.useContext(M)},be.useDebugValue=function(){},be.useDeferredValue=function(M,ee){return fe.H.useDeferredValue(M,ee)},be.useEffect=function(M,ee){return fe.H.useEffect(M,ee)},be.useId=function(){return fe.H.useId()},be.useImperativeHandle=function(M,ee,he){return fe.H.useImperativeHandle(M,ee,he)},be.useInsertionEffect=function(M,ee){return fe.H.useInsertionEffect(M,ee)},be.useLayoutEffect=function(M,ee){return fe.H.useLayoutEffect(M,ee)},be.useMemo=function(M,ee){return fe.H.useMemo(M,ee)},be.useOptimistic=function(M,ee){return fe.H.useOptimistic(M,ee)},be.useReducer=function(M,ee,he){return fe.H.useReducer(M,ee,he)},be.useRef=function(M){return fe.H.useRef(M)},be.useState=function(M){return fe.H.useState(M)},be.useSyncExternalStore=function(M,ee,he){return fe.H.useSyncExternalStore(M,ee,he)},be.useTransition=function(){return fe.H.useTransition()},be.version="19.0.0",be}var iE;function kp(){return iE||(iE=1,Cm.exports=PC()),Cm.exports}var K=kp(),Rm={exports:{}},Wl={},Im={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function UC(){return sE||(sE=1,function(i){function e(se,ve){var pe=se.length;se.push(ve);e:for(;0<pe;){var Qe=pe-1>>>1,M=se[Qe];if(0<a(M,ve))se[Qe]=ve,se[pe]=M,pe=Qe;else break e}}function t(se){return se.length===0?null:se[0]}function s(se){if(se.length===0)return null;var ve=se[0],pe=se.pop();if(pe!==ve){se[0]=pe;e:for(var Qe=0,M=se.length,ee=M>>>1;Qe<ee;){var he=2*(Qe+1)-1,ae=se[he],oe=he+1,Ce=se[oe];if(0>a(ae,pe))oe<M&&0>a(Ce,ae)?(se[Qe]=Ce,se[oe]=pe,Qe=oe):(se[Qe]=ae,se[he]=pe,Qe=he);else if(oe<M&&0>a(Ce,pe))se[Qe]=Ce,se[oe]=pe,Qe=oe;else break e}}return ve}function a(se,ve){var pe=se.sortIndex-ve.sortIndex;return pe!==0?pe:se.id-ve.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();i.unstable_now=function(){return h.now()-d}}var p=[],g=[],E=1,A=null,w=3,D=!1,O=!1,G=!1,z=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function te(se){for(var ve=t(g);ve!==null;){if(ve.callback===null)s(g);else if(ve.startTime<=se)s(g),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=t(g)}}function _e(se){if(G=!1,te(se),!O)if(t(p)!==null)O=!0,Ct();else{var ve=t(g);ve!==null&&vt(_e,ve.startTime-se)}}var fe=!1,Re=-1,L=5,R=-1;function b(){return!(i.unstable_now()-R<L)}function x(){if(fe){var se=i.unstable_now();R=se;var ve=!0;try{e:{O=!1,G&&(G=!1,W(Re),Re=-1),D=!0;var pe=w;try{t:{for(te(se),A=t(p);A!==null&&!(A.expirationTime>se&&b());){var Qe=A.callback;if(typeof Qe=="function"){A.callback=null,w=A.priorityLevel;var M=Qe(A.expirationTime<=se);if(se=i.unstable_now(),typeof M=="function"){A.callback=M,te(se),ve=!0;break t}A===t(p)&&s(p),te(se)}else s(p);A=t(p)}if(A!==null)ve=!0;else{var ee=t(g);ee!==null&&vt(_e,ee.startTime-se),ve=!1}}break e}finally{A=null,w=pe,D=!1}ve=void 0}}finally{ve?k():fe=!1}}}var k;if(typeof ne=="function")k=function(){ne(x)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,N=j.port2;j.port1.onmessage=x,k=function(){N.postMessage(null)}}else k=function(){z(x,0)};function Ct(){fe||(fe=!0,k())}function vt(se,ve){Re=z(function(){se(i.unstable_now())},ve)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(se){se.callback=null},i.unstable_continueExecution=function(){O||D||(O=!0,Ct())},i.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<se?Math.floor(1e3/se):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(se){switch(w){case 1:case 2:case 3:var ve=3;break;default:ve=w}var pe=w;w=ve;try{return se()}finally{w=pe}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(se,ve){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var pe=w;w=se;try{return ve()}finally{w=pe}},i.unstable_scheduleCallback=function(se,ve,pe){var Qe=i.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Qe+pe:Qe):pe=Qe,se){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=pe+M,se={id:E++,callback:ve,priorityLevel:se,startTime:pe,expirationTime:M,sortIndex:-1},pe>Qe?(se.sortIndex=pe,e(g,se),t(p)===null&&se===t(g)&&(G?(W(Re),Re=-1):G=!0,vt(_e,pe-Qe))):(se.sortIndex=M,e(p,se),O||D||(O=!0,Ct())),se},i.unstable_shouldYield=b,i.unstable_wrapCallback=function(se){var ve=w;return function(){var pe=w;w=ve;try{return se.apply(this,arguments)}finally{w=pe}}}}(Dm)),Dm}var rE;function BC(){return rE||(rE=1,Im.exports=UC()),Im.exports}var Nm={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function jC(){if(aE)return sn;aE=1;var i=kp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:A==null?null:""+A,children:p,containerInfo:g,implementation:E}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,sn.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,E)},sn.flushSync=function(p){var g=h.T,E=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=E,s.d.f()}},sn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},sn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},sn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,A=d(E,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:A,integrity:w,fetchPriority:D}):E==="script"&&s.d.X(p,{crossOrigin:A,integrity:w,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=d(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},sn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,A=d(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=d(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},sn.requestFormReset=function(p){s.d.r(p)},sn.unstable_batchedUpdates=function(p,g){return p(g)},sn.useFormState=function(p,g,E){return h.H.useFormState(p,g,E)},sn.useFormStatus=function(){return h.H.useHostTransitionStatus()},sn.version="19.0.0",sn}var oE;function zC(){if(oE)return Nm.exports;oE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Nm.exports=jC(),Nm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function qC(){if(lE)return Wl;lE=1;var i=BC(),e=kp(),t=zC();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var l=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),_e=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function Re(n){return n===null||typeof n!="object"?null:(n=fe&&n[fe]||n["@@iterator"],typeof n=="function"?n:null)}var L=Symbol.for("react.client.reference");function R(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===L?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case p:return"Fragment";case d:return"Portal";case E:return"Profiler";case g:return"StrictMode";case G:return"Suspense";case z:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Provider";case w:return(n._context.displayName||"Context")+".Consumer";case O:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case W:return r=n.displayName||null,r!==null?r:R(n.type)||"Memo";case ne:r=n._payload,n=n._init;try{return R(n(r))}catch{}}return null}var b=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=Object.assign,k,j;function N(n){if(k===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);k=r&&r[1]||"",j=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+k+n+j}var Ct=!1;function vt(n,r){if(!n||Ct)return"";Ct=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(Q){var F=Q}Reflect.construct(n,[],J)}else{try{J.call()}catch(Q){F=Q}n.call(J.prototype)}}else{try{throw Error()}catch(Q){F=Q}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(Q){if(Q&&F&&typeof Q.stack=="string")return[Q.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var C=v.split(`
`),P=T.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===P.length)for(u=C.length-1,f=P.length-1;1<=u&&0<=f&&C[u]!==P[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==P[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==P[f]){var Y=`
`+C[u].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=u&&0<=f);break}}}finally{Ct=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?N(o):""}function se(n){switch(n.tag){case 26:case 27:case 5:return N(n.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return n=vt(n.type,!1),n;case 11:return n=vt(n.type.render,!1),n;case 1:return n=vt(n.type,!0),n;default:return""}}function ve(n){try{var r="";do r+=se(n),n=n.return;while(n);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function pe(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,r.flags&4098&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function Qe(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function M(n){if(pe(n)!==n)throw Error(s(188))}function ee(n){var r=n.alternate;if(!r){if(r=pe(n),r===null)throw Error(s(188));return r!==n?null:n}for(var o=n,u=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return M(f),n;if(m===u)return M(f),r;m=m.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,T=f.child;T;){if(T===o){v=!0,o=f,u=m;break}if(T===u){v=!0,u=f,o=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===o){v=!0,o=m,u=f;break}if(T===u){v=!0,u=m,o=f;break}T=T.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:r}function he(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=he(n),r!==null)return r;n=n.sibling}return null}var ae=Array.isArray,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},we=[],Et=-1;function qe(n){return{current:n}}function ht(n){0>Et||(n.current=we[Et],we[Et]=null,Et--)}function Xe(n,r){Et++,we[Et]=n.current,n.current=r}var hn=qe(null),Pi=qe(null),Vn=qe(null),As=qe(null);function Ts(n,r){switch(Xe(Vn,r),Xe(Pi,n),Xe(hn,null),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)&&(r=r.namespaceURI)?Dv(r):0;break;default:if(n=n===8?r.parentNode:r,r=n.tagName,n=n.namespaceURI)n=Dv(n),r=Nv(n,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ht(hn),Xe(hn,r)}function Ui(){ht(hn),ht(Pi),ht(Vn)}function Fo(n){n.memoizedState!==null&&Xe(As,n);var r=hn.current,o=Nv(r,n.type);r!==o&&(Xe(Pi,n),Xe(hn,o))}function Ea(n){Pi.current===n&&(ht(hn),ht(Pi)),As.current===n&&(ht(As),Fl._currentValue=Ce)}var Aa=Object.prototype.hasOwnProperty,Sr=i.unstable_scheduleCallback,Ta=i.unstable_cancelCallback,Rf=i.unstable_shouldYield,Ho=i.unstable_requestPaint,yn=i.unstable_now,Bu=i.unstable_getCurrentPriorityLevel,Rt=i.unstable_ImmediatePriority,Lt=i.unstable_UserBlockingPriority,Bi=i.unstable_NormalPriority,ju=i.unstable_LowPriority,Go=i.unstable_IdlePriority,If=i.log,wr=i.unstable_setDisableYieldValue,Ss=null,tn=null;function Qo(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Ss,n,void 0,(n.current.flags&128)===128)}catch{}}function di(n){if(typeof If=="function"&&wr(n),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(Ss,n)}catch{}}var fn=Math.clz32?Math.clz32:qu,Ko=Math.log,zu=Math.LN2;function qu(n){return n>>>=0,n===0?32:31-(Ko(n)/zu|0)|0}var mi=128,ws=4194304;function ni(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function kn(n,r){var o=n.pendingLanes;if(o===0)return 0;var u=0,f=n.suspendedLanes,m=n.pingedLanes,v=n.warmLanes;n=n.finishedLanes!==0;var T=o&134217727;return T!==0?(o=T&~f,o!==0?u=ni(o):(m&=T,m!==0?u=ni(m):n||(v=T&~v,v!==0&&(u=ni(v))))):(T=o&~f,T!==0?u=ni(T):m!==0?u=ni(m):n||(v=o&~v,v!==0&&(u=ni(v)))),u===0?0:r!==0&&r!==u&&!(r&f)&&(f=u&-u,v=r&-r,f>=v||f===32&&(v&4194176)!==0)?r:u}function bs(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Sa(n,r){switch(n){case 1:case 2:case 4:case 8:return r+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yo(){var n=mi;return mi<<=1,!(mi&4194176)&&(mi=128),n}function Cs(){var n=ws;return ws<<=1,!(ws&62914560)&&(ws=4194304),n}function wa(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function gt(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Fu(n,r,o,u,f,m){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,C=n.expirationTimes,P=n.hiddenUpdates;for(o=v&~o;0<o;){var Y=31-fn(o),J=1<<Y;T[Y]=0,C[Y]=-1;var F=P[Y];if(F!==null)for(P[Y]=null,Y=0;Y<F.length;Y++){var Q=F[Y];Q!==null&&(Q.lane&=-536870913)}o&=~J}u!==0&&Rs(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~r))}function Rs(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-fn(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194218}function Is(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var u=31-fn(o),f=1<<u;f&r|n[u]&r&&(n[u]|=r),o&=~f}}function Hu(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function Gu(){var n=oe.p;return n!==0?n:(n=window.event,n===void 0?32:Yv(n.type))}function Ds(n,r){var o=oe.p;try{return oe.p=n,r()}finally{oe.p=o}}var pi=Math.random().toString(36).slice(2),Pt="__reactFiber$"+pi,It="__reactProps$"+pi,ji="__reactContainer$"+pi,br="__reactEvents$"+pi,ba="__reactListeners$"+pi,gi="__reactHandles$"+pi,Wo="__reactResources$"+pi,Ns="__reactMarker$"+pi;function Cr(n){delete n[Pt],delete n[It],delete n[br],delete n[ba],delete n[gi]}function ii(n){var r=n[Pt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[ji]||o[Pt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=Ov(n);n!==null;){if(o=n[Pt])return o;n=Ov(n)}return r}n=o,o=n.parentNode}return null}function zi(n){if(n=n[Pt]||n[ji]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function xs(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Ms(n){var r=n[Wo];return r||(r=n[Wo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ot(n){n[Ns]=!0}var Xo=new Set,Ca={};function wn(n,r){_n(n,r),_n(n+"Capture",r)}function _n(n,r){for(Ca[n]=r,n=0;n<r.length;n++)Xo.add(r[n])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Df=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zo={},Jo={};function Qu(n){return Aa.call(Jo,n)?!0:Aa.call(Zo,n)?!1:Df.test(n)?Jo[n]=!0:(Zo[n]=!0,!1)}function Os(n,r,o){if(Qu(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function Vs(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Ln(n,r,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+u)}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ku(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Nf(n){var r=Ku(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),u=""+n[r];if(!n.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){u=""+v,m.call(this,v)}}),Object.defineProperty(n,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Rr(n){n._valueTracker||(n._valueTracker=Nf(n))}function $o(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return n&&(u=Ku(n)?n.checked?"true":"false":n.value),n=u,n!==o?(r.setValue(n),!0):!1}function Ra(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var qi=/[\n"\\]/g;function ft(n){return n.replace(qi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ks(n,r,o,u,f,m,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),r!=null?v==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+dn(r)):n.value!==""+dn(r)&&(n.value=""+dn(r)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),r!=null?Ia(n,v,dn(r)):o!=null?Ia(n,v,dn(o)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+dn(T):n.removeAttribute("name")}function Ir(n,r,o,u,f,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;o=o!=null?""+dn(o):"",r=r!=null?""+dn(r):o,T||r===n.value||(n.value=r),n.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function Ia(n,r,o){r==="number"&&Ra(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Fe(n,r,o,u){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+dn(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Dr(n,r,o){if(r!=null&&(r=""+dn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+dn(o):""}function Ls(n,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(ae(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=dn(r),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Pn(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var xf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function el(n,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,o):typeof o!="number"||o===0||xf.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Yu(n,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&el(n,f,u)}else for(var m in r)r.hasOwnProperty(m)&&el(n,m,r[m])}function tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Of=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yi(n){return Of.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Un=null;function Da(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Fi=null,Hi=null;function Gi(n){var r=zi(n);if(r&&(n=r.stateNode)){var o=n[It]||null;e:switch(n=r.stateNode,r.type){case"input":if(ks(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ft(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==n&&u.form===n.form){var f=u[It]||null;if(!f)throw Error(s(90));ks(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===n.form&&$o(u)}break e;case"textarea":Dr(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Fe(n,!!o.multiple,r,!1)}}}var nl=!1;function Wu(n,r,o){if(nl)return n(r,o);nl=!0;try{var u=n(r);return u}finally{if(nl=!1,(Fi!==null||Hi!==null)&&(jc(),Fi&&(r=Fi,n=Hi,Hi=Fi=null,Gi(r),n)))for(r=0;r<n.length;r++)Gi(n[r])}}function Nr(n,r){var o=n.stateNode;if(o===null)return null;var u=o[It]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Bn=!1;if(bn)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{Bn=!1}var _i=null,Ps=null,Qi=null;function il(){if(Qi)return Qi;var n,r=Ps,o=r.length,u,f="value"in _i?_i.value:_i.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var v=o-n;for(u=1;u<=v&&r[o-u]===f[m-u];u++);return Qi=f.slice(n,1<u?1-u:void 0)}function vi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Ei(){return!0}function sl(){return!1}function Ut(n){function r(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ei:sl,this.isPropagationStopped=sl,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),r}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Ut(Ke),Mr=x({},Ke,{view:0,detail:0}),Xu=Ut(Mr),xa,Ma,Ai,Or=x({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ai&&(Ai&&n.type==="mousemove"?(xa=n.screenX-Ai.screenX,Ma=n.screenY-Ai.screenY):Ma=xa=0,Ai=n),xa)},movementY:function(n){return"movementY"in n?n.movementY:Ma}}),jn=Ut(Or),Zu=x({},Or,{dataTransfer:0}),Vf=Ut(Zu),Vr=x({},Mr,{relatedTarget:0}),Oa=Ut(Vr),rl=x({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=Ut(rl),Ju=x({},Ke,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ka=Ut(Ju),kf=x({},Ke,{data:0}),al=Ut(kf),kr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ec={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=ec[n])?!!r[n]:!1}function Lr(){return ol}var tc=x({},Mr,{key:function(n){if(n.key){var r=kr[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=vi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$u[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(n){return n.type==="keypress"?vi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),La=Ut(tc),nc=x({},Or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=Ut(nc),Ki=x({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),ic=Ut(Ki),sc=x({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),rc=Ut(sc),ac=x({},Or,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Pa=Ut(ac),mn=x({},Ke,{newState:0,oldState:0}),oc=Ut(mn),lc=[9,13,27,32],Ti=bn&&"CompositionEvent"in window,c=null;bn&&"documentMode"in document&&(c=document.documentMode);var y=bn&&"TextEvent"in window&&!c,_=bn&&(!Ti||c&&8<c&&11>=c),S=" ",B=!1;function H(n,r){switch(n){case"keyup":return lc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ie(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Le=!1;function Dt(n,r){switch(n){case"compositionend":return ie(r);case"keypress":return r.which!==32?null:(B=!0,S);case"textInput":return n=r.data,n===S&&B?null:n;default:return null}}function Pe(n,r){if(Le)return n==="compositionend"||!Ti&&H(n,r)?(n=il(),Qi=Ps=_i=null,Le=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var Bt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Bt[n.type]:r==="textarea"}function Yi(n,r,o,u){Fi?Hi?Hi.push(u):Hi=[u]:Fi=u,r=Gc(r,"onChange"),0<r.length&&(o=new Na("onChange","change",null,o,u),n.push({event:o,listeners:r}))}var Kt=null,Si=null;function ul(n){wv(n,0)}function uc(n){var r=xs(n);if($o(r))return n}function $g(n,r){if(n==="change")return r}var ey=!1;if(bn){var Lf;if(bn){var Pf="oninput"in document;if(!Pf){var ty=document.createElement("div");ty.setAttribute("oninput","return;"),Pf=typeof ty.oninput=="function"}Lf=Pf}else Lf=!1;ey=Lf&&(!document.documentMode||9<document.documentMode)}function ny(){Kt&&(Kt.detachEvent("onpropertychange",iy),Si=Kt=null)}function iy(n){if(n.propertyName==="value"&&uc(Si)){var r=[];Yi(r,Si,n,Da(n)),Wu(ul,r)}}function hb(n,r,o){n==="focusin"?(ny(),Kt=r,Si=o,Kt.attachEvent("onpropertychange",iy)):n==="focusout"&&ny()}function fb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return uc(Si)}function db(n,r){if(n==="click")return uc(r)}function mb(n,r){if(n==="input"||n==="change")return uc(r)}function pb(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Cn=typeof Object.is=="function"?Object.is:pb;function cl(n,r){if(Cn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Aa.call(r,f)||!Cn(n[f],r[f]))return!1}return!0}function sy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ry(n,r){var o=sy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=r&&u>=r)return{node:o,offset:r-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=sy(o)}}function ay(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?ay(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function oy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ra(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Ra(n.document)}return r}function Uf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function gb(n,r){var o=oy(r);r=n.focusedElem;var u=n.selectionRange;if(o!==r&&r&&r.ownerDocument&&ay(r.ownerDocument.documentElement,r)){if(u!==null&&Uf(r)){if(n=u.start,o=u.end,o===void 0&&(o=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(o,r.value.length);else if(o=(n=r.ownerDocument||document)&&n.defaultView||window,o.getSelection){o=o.getSelection();var f=r.textContent.length,m=Math.min(u.start,f);u=u.end===void 0?m:Math.min(u.end,f),!o.extend&&m>u&&(f=u,u=m,m=f),f=ry(r,m);var v=ry(r,u);f&&v&&(o.rangeCount!==1||o.anchorNode!==f.node||o.anchorOffset!==f.offset||o.focusNode!==v.node||o.focusOffset!==v.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),o.removeAllRanges(),m>u?(o.addRange(n),o.extend(v.node,v.offset)):(n.setEnd(v.node,v.offset),o.addRange(n)))}}for(n=[],o=r;o=o.parentNode;)o.nodeType===1&&n.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)o=n[r],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var yb=bn&&"documentMode"in document&&11>=document.documentMode,Ua=null,Bf=null,hl=null,jf=!1;function ly(n,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;jf||Ua==null||Ua!==Ra(u)||(u=Ua,"selectionStart"in u&&Uf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),hl&&cl(hl,u)||(hl=u,u=Gc(Bf,"onSelect"),0<u.length&&(r=new Na("onSelect","select",null,r,o),n.push({event:r,listeners:u}),r.target=Ua)))}function Pr(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Ba={animationend:Pr("Animation","AnimationEnd"),animationiteration:Pr("Animation","AnimationIteration"),animationstart:Pr("Animation","AnimationStart"),transitionrun:Pr("Transition","TransitionRun"),transitionstart:Pr("Transition","TransitionStart"),transitioncancel:Pr("Transition","TransitionCancel"),transitionend:Pr("Transition","TransitionEnd")},zf={},uy={};bn&&(uy=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Ur(n){if(zf[n])return zf[n];if(!Ba[n])return n;var r=Ba[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in uy)return zf[n]=r[o];return n}var cy=Ur("animationend"),hy=Ur("animationiteration"),fy=Ur("animationstart"),_b=Ur("transitionrun"),vb=Ur("transitionstart"),Eb=Ur("transitioncancel"),dy=Ur("transitionend"),my=new Map,py="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function si(n,r){my.set(n,r),wn(r,[n])}var zn=[],ja=0,qf=0;function cc(){for(var n=ja,r=qf=ja=0;r<n;){var o=zn[r];zn[r++]=null;var u=zn[r];zn[r++]=null;var f=zn[r];zn[r++]=null;var m=zn[r];if(zn[r++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&gy(o,f,m)}}function hc(n,r,o,u){zn[ja++]=n,zn[ja++]=r,zn[ja++]=o,zn[ja++]=u,qf|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ff(n,r,o,u){return hc(n,r,o,u),fc(n)}function Us(n,r){return hc(n,null,null,r),fc(n)}function gy(n,r,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;f&&r!==null&&n.tag===3&&(m=n.stateNode,f=31-fn(o),m=m.hiddenUpdates,n=m[f],n===null?m[f]=[r]:n.push(r),r.lane=o|536870912)}function fc(n){if(50<Ll)throw Ll=0,Wd=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var za={},yy=new WeakMap;function qn(n,r){if(typeof n=="object"&&n!==null){var o=yy.get(n);return o!==void 0?o:(r={value:n,source:r,stack:ve(r)},yy.set(n,r),r)}return{value:n,source:r,stack:ve(r)}}var qa=[],Fa=0,dc=null,mc=0,Fn=[],Hn=0,Br=null,Wi=1,Xi="";function jr(n,r){qa[Fa++]=mc,qa[Fa++]=dc,dc=n,mc=r}function _y(n,r,o){Fn[Hn++]=Wi,Fn[Hn++]=Xi,Fn[Hn++]=Br,Br=n;var u=Wi;n=Xi;var f=32-fn(u)-1;u&=~(1<<f),o+=1;var m=32-fn(r)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Wi=1<<32-fn(r)+f|o<<f|u,Xi=m+n}else Wi=1<<m|o<<f|u,Xi=n}function Hf(n){n.return!==null&&(jr(n,1),_y(n,1,0))}function Gf(n){for(;n===dc;)dc=qa[--Fa],qa[Fa]=null,mc=qa[--Fa],qa[Fa]=null;for(;n===Br;)Br=Fn[--Hn],Fn[Hn]=null,Xi=Fn[--Hn],Fn[Hn]=null,Wi=Fn[--Hn],Fn[Hn]=null}var pn=null,Yt=null,He=!1,ri=null,wi=!1,Qf=Error(s(519));function zr(n){var r=Error(s(418,""));throw ml(qn(r,n)),Qf}function vy(n){var r=n.stateNode,o=n.type,u=n.memoizedProps;switch(r[Pt]=n,r[It]=u,o){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(o=0;o<Ul.length;o++)Me(Ul[o],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),Ir(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Rr(r);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),Ls(r,u.value,u.defaultValue,u.children),Rr(r)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||Iv(r.textContent,o)?(u.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),u.onScroll!=null&&Me("scroll",r),u.onScrollEnd!=null&&Me("scrollend",r),u.onClick!=null&&(r.onclick=Qc),r=!0):r=!1,r||zr(n)}function Ey(n){for(pn=n.return;pn;)switch(pn.tag){case 3:case 27:wi=!0;return;case 5:case 13:wi=!1;return;default:pn=pn.return}}function fl(n){if(n!==pn)return!1;if(!He)return Ey(n),He=!0,!1;var r=!1,o;if((o=n.tag!==3&&n.tag!==27)&&((o=n.tag===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||fm(n.type,n.memoizedProps)),o=!o),o&&(r=!0),r&&Yt&&zr(n),Ey(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(r===0){Yt=oi(n.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;n=n.nextSibling}Yt=null}}else Yt=pn?oi(n.stateNode.nextSibling):null;return!0}function dl(){Yt=pn=null,He=!1}function ml(n){ri===null?ri=[n]:ri.push(n)}var pl=Error(s(460)),Ay=Error(s(474)),Kf={then:function(){}};function Ty(n){return n=n.status,n==="fulfilled"||n==="rejected"}function pc(){}function Sy(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(pc,pc),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===pl?Error(s(483)):n;default:if(typeof r.status=="string")r.then(pc,pc);else{if(n=tt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,n===pl?Error(s(483)):n}throw gl=r,pl}}var gl=null;function wy(){if(gl===null)throw Error(s(459));var n=gl;return gl=null,n}var Ha=null,yl=0;function gc(n){var r=yl;return yl+=1,Ha===null&&(Ha=[]),Sy(Ha,n,r)}function _l(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function yc(n,r){throw r.$$typeof===l?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function by(n){var r=n._init;return r(n._payload)}function Cy(n){function r(U,V){if(n){var q=U.deletions;q===null?(U.deletions=[V],U.flags|=16):q.push(V)}}function o(U,V){if(!n)return null;for(;V!==null;)r(U,V),V=V.sibling;return null}function u(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function f(U,V){return U=Xs(U,V),U.index=0,U.sibling=null,U}function m(U,V,q){return U.index=q,n?(q=U.alternate,q!==null?(q=q.index,q<V?(U.flags|=33554434,V):q):(U.flags|=33554434,V)):(U.flags|=1048576,V)}function v(U){return n&&U.alternate===null&&(U.flags|=33554434),U}function T(U,V,q,X){return V===null||V.tag!==6?(V=zd(q,U.mode,X),V.return=U,V):(V=f(V,q),V.return=U,V)}function C(U,V,q,X){var ue=q.type;return ue===p?Y(U,V,q.props.children,X,q.key):V!==null&&(V.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===ne&&by(ue)===V.type)?(V=f(V,q.props),_l(V,q),V.return=U,V):(V=kc(q.type,q.key,q.props,null,U.mode,X),_l(V,q),V.return=U,V)}function P(U,V,q,X){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=qd(q,U.mode,X),V.return=U,V):(V=f(V,q.children||[]),V.return=U,V)}function Y(U,V,q,X,ue){return V===null||V.tag!==7?(V=Zr(q,U.mode,X,ue),V.return=U,V):(V=f(V,q),V.return=U,V)}function J(U,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=zd(""+V,U.mode,q),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case h:return q=kc(V.type,V.key,V.props,null,U.mode,q),_l(q,V),q.return=U,q;case d:return V=qd(V,U.mode,q),V.return=U,V;case ne:var X=V._init;return V=X(V._payload),J(U,V,q)}if(ae(V)||Re(V))return V=Zr(V,U.mode,q,null),V.return=U,V;if(typeof V.then=="function")return J(U,gc(V),q);if(V.$$typeof===D)return J(U,Mc(U,V),q);yc(U,V)}return null}function F(U,V,q,X){var ue=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ue!==null?null:T(U,V,""+q,X);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case h:return q.key===ue?C(U,V,q,X):null;case d:return q.key===ue?P(U,V,q,X):null;case ne:return ue=q._init,q=ue(q._payload),F(U,V,q,X)}if(ae(q)||Re(q))return ue!==null?null:Y(U,V,q,X,null);if(typeof q.then=="function")return F(U,V,gc(q),X);if(q.$$typeof===D)return F(U,V,Mc(U,q),X);yc(U,q)}return null}function Q(U,V,q,X,ue){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return U=U.get(q)||null,T(V,U,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case h:return U=U.get(X.key===null?q:X.key)||null,C(V,U,X,ue);case d:return U=U.get(X.key===null?q:X.key)||null,P(V,U,X,ue);case ne:var De=X._init;return X=De(X._payload),Q(U,V,q,X,ue)}if(ae(X)||Re(X))return U=U.get(q)||null,Y(V,U,X,ue,null);if(typeof X.then=="function")return Q(U,V,q,gc(X),ue);if(X.$$typeof===D)return Q(U,V,q,Mc(V,X),ue);yc(V,X)}return null}function ce(U,V,q,X){for(var ue=null,De=null,de=V,ye=V=0,qt=null;de!==null&&ye<q.length;ye++){de.index>ye?(qt=de,de=null):qt=de.sibling;var Ge=F(U,de,q[ye],X);if(Ge===null){de===null&&(de=qt);break}n&&de&&Ge.alternate===null&&r(U,de),V=m(Ge,V,ye),De===null?ue=Ge:De.sibling=Ge,De=Ge,de=qt}if(ye===q.length)return o(U,de),He&&jr(U,ye),ue;if(de===null){for(;ye<q.length;ye++)de=J(U,q[ye],X),de!==null&&(V=m(de,V,ye),De===null?ue=de:De.sibling=de,De=de);return He&&jr(U,ye),ue}for(de=u(de);ye<q.length;ye++)qt=Q(de,U,ye,q[ye],X),qt!==null&&(n&&qt.alternate!==null&&de.delete(qt.key===null?ye:qt.key),V=m(qt,V,ye),De===null?ue=qt:De.sibling=qt,De=qt);return n&&de.forEach(function(ir){return r(U,ir)}),He&&jr(U,ye),ue}function Te(U,V,q,X){if(q==null)throw Error(s(151));for(var ue=null,De=null,de=V,ye=V=0,qt=null,Ge=q.next();de!==null&&!Ge.done;ye++,Ge=q.next()){de.index>ye?(qt=de,de=null):qt=de.sibling;var ir=F(U,de,Ge.value,X);if(ir===null){de===null&&(de=qt);break}n&&de&&ir.alternate===null&&r(U,de),V=m(ir,V,ye),De===null?ue=ir:De.sibling=ir,De=ir,de=qt}if(Ge.done)return o(U,de),He&&jr(U,ye),ue;if(de===null){for(;!Ge.done;ye++,Ge=q.next())Ge=J(U,Ge.value,X),Ge!==null&&(V=m(Ge,V,ye),De===null?ue=Ge:De.sibling=Ge,De=Ge);return He&&jr(U,ye),ue}for(de=u(de);!Ge.done;ye++,Ge=q.next())Ge=Q(de,U,ye,Ge.value,X),Ge!==null&&(n&&Ge.alternate!==null&&de.delete(Ge.key===null?ye:Ge.key),V=m(Ge,V,ye),De===null?ue=Ge:De.sibling=Ge,De=Ge);return n&&de.forEach(function(VC){return r(U,VC)}),He&&jr(U,ye),ue}function pt(U,V,q,X){if(typeof q=="object"&&q!==null&&q.type===p&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case h:e:{for(var ue=q.key;V!==null;){if(V.key===ue){if(ue=q.type,ue===p){if(V.tag===7){o(U,V.sibling),X=f(V,q.props.children),X.return=U,U=X;break e}}else if(V.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===ne&&by(ue)===V.type){o(U,V.sibling),X=f(V,q.props),_l(X,q),X.return=U,U=X;break e}o(U,V);break}else r(U,V);V=V.sibling}q.type===p?(X=Zr(q.props.children,U.mode,X,q.key),X.return=U,U=X):(X=kc(q.type,q.key,q.props,null,U.mode,X),_l(X,q),X.return=U,U=X)}return v(U);case d:e:{for(ue=q.key;V!==null;){if(V.key===ue)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){o(U,V.sibling),X=f(V,q.children||[]),X.return=U,U=X;break e}else{o(U,V);break}else r(U,V);V=V.sibling}X=qd(q,U.mode,X),X.return=U,U=X}return v(U);case ne:return ue=q._init,q=ue(q._payload),pt(U,V,q,X)}if(ae(q))return ce(U,V,q,X);if(Re(q)){if(ue=Re(q),typeof ue!="function")throw Error(s(150));return q=ue.call(q),Te(U,V,q,X)}if(typeof q.then=="function")return pt(U,V,gc(q),X);if(q.$$typeof===D)return pt(U,V,Mc(U,q),X);yc(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(o(U,V.sibling),X=f(V,q),X.return=U,U=X):(o(U,V),X=zd(q,U.mode,X),X.return=U,U=X),v(U)):o(U,V)}return function(U,V,q,X){try{yl=0;var ue=pt(U,V,q,X);return Ha=null,ue}catch(de){if(de===pl)throw de;var De=Yn(29,de,null,U.mode);return De.lanes=X,De.return=U,De}finally{}}}var qr=Cy(!0),Ry=Cy(!1),Ga=qe(null),_c=qe(0);function Iy(n,r){n=os,Xe(_c,n),Xe(Ga,r),os=n|r.baseLanes}function Yf(){Xe(_c,os),Xe(Ga,Ga.current)}function Wf(){os=_c.current,ht(Ga),ht(_c)}var Gn=qe(null),bi=null;function Bs(n){var r=n.alternate;Xe(xt,xt.current&1),Xe(Gn,n),bi===null&&(r===null||Ga.current!==null||r.memoizedState!==null)&&(bi=n)}function Dy(n){if(n.tag===22){if(Xe(xt,xt.current),Xe(Gn,n),bi===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(bi=n)}}else js()}function js(){Xe(xt,xt.current),Xe(Gn,Gn.current)}function Zi(n){ht(Gn),bi===n&&(bi=null),ht(xt)}var xt=qe(0);function vc(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ab=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},Tb=i.unstable_scheduleCallback,Sb=i.unstable_NormalPriority,Mt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new Ab,data:new Map,refCount:0}}function vl(n){n.refCount--,n.refCount===0&&Tb(Sb,function(){n.controller.abort()})}var El=null,Zf=0,Qa=0,Ka=null;function wb(n,r){if(El===null){var o=El=[];Zf=0,Qa=im(),Ka={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Zf++,r.then(Ny,Ny),r}function Ny(){if(--Zf===0&&El!==null){Ka!==null&&(Ka.status="fulfilled");var n=El;El=null,Qa=0,Ka=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function bb(n,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var xy=b.S;b.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&wb(n,r),xy!==null&&xy(n,r)};var Fr=qe(null);function Jf(){var n=Fr.current;return n!==null?n:tt.pooledCache}function Ec(n,r){r===null?Xe(Fr,Fr.current):Xe(Fr,r.pool)}function My(){var n=Jf();return n===null?null:{parent:Mt._currentValue,pool:n}}var zs=0,Ie=null,Ze=null,At=null,Ac=!1,Ya=!1,Hr=!1,Tc=0,Al=0,Wa=null,Cb=0;function yt(){throw Error(s(321))}function $f(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Cn(n[o],r[o]))return!1;return!0}function ed(n,r,o,u,f,m){return zs=m,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,b.H=n===null||n.memoizedState===null?Gr:qs,Hr=!1,m=o(u,f),Hr=!1,Ya&&(m=Vy(r,o,u,f)),Oy(n),m}function Oy(n){b.H=Ci;var r=Ze!==null&&Ze.next!==null;if(zs=0,At=Ze=Ie=null,Ac=!1,Al=0,Wa=null,r)throw Error(s(300));n===null||jt||(n=n.dependencies,n!==null&&xc(n)&&(jt=!0))}function Vy(n,r,o,u){Ie=n;var f=0;do{if(Ya&&(Wa=null),Al=0,Ya=!1,25<=f)throw Error(s(301));if(f+=1,At=Ze=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}b.H=Qr,m=r(o,u)}while(Ya);return m}function Rb(){var n=b.H,r=n.useState()[0];return r=typeof r.then=="function"?Tl(r):r,n=n.useState()[0],(Ze!==null?Ze.memoizedState:null)!==n&&(Ie.flags|=1024),r}function td(){var n=Tc!==0;return Tc=0,n}function nd(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function id(n){if(Ac){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Ac=!1}zs=0,At=Ze=Ie=null,Ya=!1,Al=Tc=0,Wa=null}function vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ie.memoizedState=At=n:At=At.next=n,At}function Tt(){if(Ze===null){var n=Ie.alternate;n=n!==null?n.memoizedState:null}else n=Ze.next;var r=At===null?Ie.memoizedState:At.next;if(r!==null)At=r,Ze=n;else{if(n===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));Ze=n,n={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},At===null?Ie.memoizedState=At=n:At=At.next=n}return At}var Sc;Sc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Tl(n){var r=Al;return Al+=1,Wa===null&&(Wa=[]),n=Sy(Wa,n,r),r=Ie,(At===null?r.memoizedState:At.next)===null&&(r=r.alternate,b.H=r===null||r.memoizedState===null?Gr:qs),n}function wc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Tl(n);if(n.$$typeof===D)return nn(n)}throw Error(s(438,String(n)))}function sd(n){var r=null,o=Ie.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ie.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Sc(),Ie.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),u=0;u<n;u++)o[u]=_e;return r.index++,o}function Ji(n,r){return typeof r=="function"?r(n):r}function bc(n){var r=Tt();return rd(r,Ze,n)}function rd(n,r,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}r.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var T=v=null,C=null,P=r,Y=!1;do{var J=P.lane&-536870913;if(J!==P.lane?(Ue&J)===J:(zs&J)===J){var F=P.revertLane;if(F===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),J===Qa&&(Y=!0);else if((zs&F)===F){P=P.next,F===Qa&&(Y=!0);continue}else J={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},C===null?(T=C=J,v=m):C=C.next=J,Ie.lanes|=F,Zs|=F;J=P.action,Hr&&o(m,J),m=P.hasEagerState?P.eagerState:o(m,J)}else F={lane:J,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},C===null?(T=C=F,v=m):C=C.next=F,Ie.lanes|=J,Zs|=J;P=P.next}while(P!==null&&P!==r);if(C===null?v=m:C.next=T,!Cn(m,n.memoizedState)&&(jt=!0,Y&&(o=Ka,o!==null)))throw o;n.memoizedState=m,n.baseState=v,n.baseQueue=C,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ad(n){var r=Tt(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Cn(m,r.memoizedState)||(jt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function ky(n,r,o){var u=Ie,f=Tt(),m=He;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=r();var v=!Cn((Ze||f).memoizedState,o);if(v&&(f.memoizedState=o,jt=!0),f=f.queue,ud(Uy.bind(null,u,f,n),[n]),f.getSnapshot!==r||v||At!==null&&At.memoizedState.tag&1){if(u.flags|=2048,Xa(9,Py.bind(null,u,f,o,r),{destroy:void 0},null),tt===null)throw Error(s(349));m||zs&60||Ly(u,r,o)}return o}function Ly(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Ie.updateQueue,r===null?(r=Sc(),Ie.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Py(n,r,o,u){r.value=o,r.getSnapshot=u,By(r)&&jy(n)}function Uy(n,r,o){return o(function(){By(r)&&jy(n)})}function By(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Cn(n,o)}catch{return!0}}function jy(n){var r=Us(n,2);r!==null&&gn(r,n,2)}function od(n){var r=vn();if(typeof n=="function"){var o=n;if(n=o(),Hr){di(!0);try{o()}finally{di(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:n},r}function zy(n,r,o,u){return n.baseState=o,rd(n,Ze,typeof u=="function"?u:Ji)}function Ib(n,r,o,u,f){if(Ic(n))throw Error(s(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};b.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,qy(r,m)):(m.next=o.next,r.pending=o.next=m)}}function qy(n,r){var o=r.action,u=r.payload,f=n.state;if(r.isTransition){var m=b.T,v={};b.T=v;try{var T=o(f,u),C=b.S;C!==null&&C(v,T),Fy(n,r,T)}catch(P){ld(n,r,P)}finally{b.T=m}}else try{m=o(f,u),Fy(n,r,m)}catch(P){ld(n,r,P)}}function Fy(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Hy(n,r,u)},function(u){return ld(n,r,u)}):Hy(n,r,o)}function Hy(n,r,o){r.status="fulfilled",r.value=o,Gy(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,qy(n,o)))}function ld(n,r,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Gy(r),r=r.next;while(r!==u)}n.action=null}function Gy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Qy(n,r){return r}function Ky(n,r){if(He){var o=tt.formState;if(o!==null){e:{var u=Ie;if(He){if(Yt){t:{for(var f=Yt,m=wi;f.nodeType!==8;){if(!m){f=null;break t}if(f=oi(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Yt=oi(f.nextSibling),u=f.data==="F!";break e}}zr(u)}u=!1}u&&(r=o[0])}}return o=vn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qy,lastRenderedState:r},o.queue=u,o=h_.bind(null,Ie,u),u.dispatch=o,u=od(!1),m=md.bind(null,Ie,!1,u.queue),u=vn(),f={state:r,dispatch:null,action:n,pending:null},u.queue=f,o=Ib.bind(null,Ie,f,m,o),f.dispatch=o,u.memoizedState=n,[r,o,!1]}function Yy(n){var r=Tt();return Wy(r,Ze,n)}function Wy(n,r,o){r=rd(n,r,Qy)[0],n=bc(Ji)[0],r=typeof r=="object"&&r!==null&&typeof r.then=="function"?Tl(r):r;var u=Tt(),f=u.queue,m=f.dispatch;return o!==u.memoizedState&&(Ie.flags|=2048,Xa(9,Db.bind(null,f,o),{destroy:void 0},null)),[r,m,n]}function Db(n,r){n.action=r}function Xy(n){var r=Tt(),o=Ze;if(o!==null)return Wy(r,o,n);Tt(),r=r.memoizedState,o=Tt();var u=o.queue.dispatch;return o.memoizedState=n,[r,u,!1]}function Xa(n,r,o,u){return n={tag:n,create:r,inst:o,deps:u,next:null},r=Ie.updateQueue,r===null&&(r=Sc(),Ie.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,r.lastEffect=n),n}function Zy(){return Tt().memoizedState}function Cc(n,r,o,u){var f=vn();Ie.flags|=n,f.memoizedState=Xa(1|r,o,{destroy:void 0},u===void 0?null:u)}function Rc(n,r,o,u){var f=Tt();u=u===void 0?null:u;var m=f.memoizedState.inst;Ze!==null&&u!==null&&$f(u,Ze.memoizedState.deps)?f.memoizedState=Xa(r,o,m,u):(Ie.flags|=n,f.memoizedState=Xa(1|r,o,m,u))}function Jy(n,r){Cc(8390656,8,n,r)}function ud(n,r){Rc(2048,8,n,r)}function $y(n,r){return Rc(4,2,n,r)}function e_(n,r){return Rc(4,4,n,r)}function t_(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function n_(n,r,o){o=o!=null?o.concat([n]):null,Rc(4,4,t_.bind(null,r,n),o)}function cd(){}function i_(n,r){var o=Tt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&$f(r,u[1])?u[0]:(o.memoizedState=[n,r],n)}function s_(n,r){var o=Tt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&$f(r,u[1]))return u[0];if(u=n(),Hr){di(!0);try{n()}finally{di(!1)}}return o.memoizedState=[u,r],u}function hd(n,r,o){return o===void 0||zs&1073741824?n.memoizedState=r:(n.memoizedState=o,n=av(),Ie.lanes|=n,Zs|=n,o)}function r_(n,r,o,u){return Cn(o,r)?o:Ga.current!==null?(n=hd(n,o,u),Cn(n,r)||(jt=!0),n):zs&42?(n=av(),Ie.lanes|=n,Zs|=n,r):(jt=!0,n.memoizedState=o)}function a_(n,r,o,u,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var v=b.T,T={};b.T=T,md(n,!1,r,o);try{var C=f(),P=b.S;if(P!==null&&P(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Y=bb(C,u);Sl(n,r,Y,Nn(n))}else Sl(n,r,u,Nn(n))}catch(J){Sl(n,r,{then:function(){},status:"rejected",reason:J},Nn())}finally{oe.p=m,b.T=v}}function Nb(){}function fd(n,r,o,u){if(n.tag!==5)throw Error(s(476));var f=o_(n).queue;a_(n,f,r,Ce,o===null?Nb:function(){return l_(n),o(u)})}function o_(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:Ce},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function l_(n){var r=o_(n).next.queue;Sl(n,r,{},Nn())}function dd(){return nn(Fl)}function u_(){return Tt().memoizedState}function c_(){return Tt().memoizedState}function xb(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Nn();n=Gs(o);var u=Qs(r,n,o);u!==null&&(gn(u,r,o),Cl(u,r,o)),r={cache:Xf()},n.payload=r;return}r=r.return}}function Mb(n,r,o){var u=Nn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Ic(n)?f_(r,o):(o=Ff(n,r,o,u),o!==null&&(gn(o,n,u),d_(o,r,u)))}function h_(n,r,o){var u=Nn();Sl(n,r,o,u)}function Sl(n,r,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ic(n))f_(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,T=m(v,o);if(f.hasEagerState=!0,f.eagerState=T,Cn(T,v))return hc(n,r,f,0),tt===null&&cc(),!1}catch{}finally{}if(o=Ff(n,r,f,u),o!==null)return gn(o,n,u),d_(o,r,u),!0}return!1}function md(n,r,o,u){if(u={lane:2,revertLane:im(),action:u,hasEagerState:!1,eagerState:null,next:null},Ic(n)){if(r)throw Error(s(479))}else r=Ff(n,o,u,2),r!==null&&gn(r,n,2)}function Ic(n){var r=n.alternate;return n===Ie||r!==null&&r===Ie}function f_(n,r){Ya=Ac=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function d_(n,r,o){if(o&4194176){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Is(n,o)}}var Ci={readContext:nn,use:wc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt};Ci.useCacheRefresh=yt,Ci.useMemoCache=yt,Ci.useHostTransitionStatus=yt,Ci.useFormState=yt,Ci.useActionState=yt,Ci.useOptimistic=yt;var Gr={readContext:nn,use:wc,useCallback:function(n,r){return vn().memoizedState=[n,r===void 0?null:r],n},useContext:nn,useEffect:Jy,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,Cc(4194308,4,t_.bind(null,r,n),o)},useLayoutEffect:function(n,r){return Cc(4194308,4,n,r)},useInsertionEffect:function(n,r){Cc(4,2,n,r)},useMemo:function(n,r){var o=vn();r=r===void 0?null:r;var u=n();if(Hr){di(!0);try{n()}finally{di(!1)}}return o.memoizedState=[u,r],u},useReducer:function(n,r,o){var u=vn();if(o!==void 0){var f=o(r);if(Hr){di(!0);try{o(r)}finally{di(!1)}}}else f=r;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=Mb.bind(null,Ie,n),[u.memoizedState,n]},useRef:function(n){var r=vn();return n={current:n},r.memoizedState=n},useState:function(n){n=od(n);var r=n.queue,o=h_.bind(null,Ie,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:cd,useDeferredValue:function(n,r){var o=vn();return hd(o,n,r)},useTransition:function(){var n=od(!1);return n=a_.bind(null,Ie,n.queue,!0,!1),vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var u=Ie,f=vn();if(He){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),tt===null)throw Error(s(349));Ue&60||Ly(u,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Jy(Uy.bind(null,u,m,n),[n]),u.flags|=2048,Xa(9,Py.bind(null,u,m,o,r),{destroy:void 0},null),o},useId:function(){var n=vn(),r=tt.identifierPrefix;if(He){var o=Xi,u=Wi;o=(u&~(1<<32-fn(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Tc++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Cb++,r=":"+r+"r"+o.toString(32)+":";return n.memoizedState=r},useCacheRefresh:function(){return vn().memoizedState=xb.bind(null,Ie)}};Gr.useMemoCache=sd,Gr.useHostTransitionStatus=dd,Gr.useFormState=Ky,Gr.useActionState=Ky,Gr.useOptimistic=function(n){var r=vn();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=md.bind(null,Ie,!0,o),o.dispatch=r,[n,r]};var qs={readContext:nn,use:wc,useCallback:i_,useContext:nn,useEffect:ud,useImperativeHandle:n_,useInsertionEffect:$y,useLayoutEffect:e_,useMemo:s_,useReducer:bc,useRef:Zy,useState:function(){return bc(Ji)},useDebugValue:cd,useDeferredValue:function(n,r){var o=Tt();return r_(o,Ze.memoizedState,n,r)},useTransition:function(){var n=bc(Ji)[0],r=Tt().memoizedState;return[typeof n=="boolean"?n:Tl(n),r]},useSyncExternalStore:ky,useId:u_};qs.useCacheRefresh=c_,qs.useMemoCache=sd,qs.useHostTransitionStatus=dd,qs.useFormState=Yy,qs.useActionState=Yy,qs.useOptimistic=function(n,r){var o=Tt();return zy(o,Ze,n,r)};var Qr={readContext:nn,use:wc,useCallback:i_,useContext:nn,useEffect:ud,useImperativeHandle:n_,useInsertionEffect:$y,useLayoutEffect:e_,useMemo:s_,useReducer:ad,useRef:Zy,useState:function(){return ad(Ji)},useDebugValue:cd,useDeferredValue:function(n,r){var o=Tt();return Ze===null?hd(o,n,r):r_(o,Ze.memoizedState,n,r)},useTransition:function(){var n=ad(Ji)[0],r=Tt().memoizedState;return[typeof n=="boolean"?n:Tl(n),r]},useSyncExternalStore:ky,useId:u_};Qr.useCacheRefresh=c_,Qr.useMemoCache=sd,Qr.useHostTransitionStatus=dd,Qr.useFormState=Xy,Qr.useActionState=Xy,Qr.useOptimistic=function(n,r){var o=Tt();return Ze!==null?zy(o,Ze,n,r):(o.baseState=n,[n,o.queue.dispatch])};function pd(n,r,o,u){r=n.memoizedState,o=o(u,r),o=o==null?r:x({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var gd={isMounted:function(n){return(n=n._reactInternals)?pe(n)===n:!1},enqueueSetState:function(n,r,o){n=n._reactInternals;var u=Nn(),f=Gs(u);f.payload=r,o!=null&&(f.callback=o),r=Qs(n,f,u),r!==null&&(gn(r,n,u),Cl(r,n,u))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var u=Nn(),f=Gs(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Qs(n,f,u),r!==null&&(gn(r,n,u),Cl(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Nn(),u=Gs(o);u.tag=2,r!=null&&(u.callback=r),r=Qs(n,u,o),r!==null&&(gn(r,n,o),Cl(r,n,o))}};function m_(n,r,o,u,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,v):r.prototype&&r.prototype.isPureReactComponent?!cl(o,u)||!cl(f,m):!0}function p_(n,r,o,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==n&&gd.enqueueReplaceState(r,r.state,null)}function Kr(n,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(n=n.defaultProps){o===r&&(o=x({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Dc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function g_(n){Dc(n)}function y_(n){console.error(n)}function __(n){Dc(n)}function Nc(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function v_(n,r,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function yd(n,r,o){return o=Gs(o),o.tag=3,o.payload={element:null},o.callback=function(){Nc(n,r)},o}function E_(n){return n=Gs(n),n.tag=3,n}function A_(n,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){v_(r,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){v_(r,o,u),typeof f!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function Ob(n,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&bl(r,o,f,!0),o=Gn.current,o!==null){switch(o.tag){case 13:return bi===null?Jd():o.alternate===null&&mt===0&&(mt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Kf?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),em(n,u,f)),!1;case 22:return o.flags|=65536,u===Kf?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),em(n,u,f)),!1}throw Error(s(435,o.tag))}return em(n,u,f),Jd(),!1}if(He)return r=Gn.current,r!==null?(!(r.flags&65536)&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==Qf&&(n=Error(s(422),{cause:u}),ml(qn(n,o)))):(u!==Qf&&(r=Error(s(423),{cause:u}),ml(qn(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=qn(u,o),f=yd(n.stateNode,u,f),Md(n,f),mt!==4&&(mt=2)),!1;var m=Error(s(520),{cause:u});if(m=qn(m,o),Vl===null?Vl=[m]:Vl.push(m),mt!==4&&(mt=2),r===null)return!0;u=qn(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=yd(o.stateNode,u,n),Md(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Js===null||!Js.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=E_(f),A_(f,n,o,u),Md(o,f),!1}o=o.return}while(o!==null);return!1}var T_=Error(s(461)),jt=!1;function Wt(n,r,o,u){r.child=n===null?Ry(r,null,o,u):qr(r,n.child,o,u)}function S_(n,r,o,u,f){o=o.render;var m=r.ref;if("ref"in u){var v={};for(var T in u)T!=="ref"&&(v[T]=u[T])}else v=u;return Wr(r),u=ed(n,r,o,v,m,f),T=td(),n!==null&&!jt?(nd(n,r,f),$i(n,r,f)):(He&&T&&Hf(r),r.flags|=1,Wt(n,r,u,f),r.child)}function w_(n,r,o,u,f){if(n===null){var m=o.type;return typeof m=="function"&&!jd(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,b_(n,r,m,u,f)):(n=kc(o.type,null,u,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Cd(n,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:cl,o(v,u)&&n.ref===r.ref)return $i(n,r,f)}return r.flags|=1,n=Xs(m,u),n.ref=r.ref,n.return=r,r.child=n}function b_(n,r,o,u,f){if(n!==null){var m=n.memoizedProps;if(cl(m,u)&&n.ref===r.ref)if(jt=!1,r.pendingProps=u=m,Cd(n,f))n.flags&131072&&(jt=!0);else return r.lanes=n.lanes,$i(n,r,f)}return _d(n,r,o,u,f)}function C_(n,r,o){var u=r.pendingProps,f=u.children,m=(r.stateNode._pendingVisibility&2)!==0,v=n!==null?n.memoizedState:null;if(wl(n,r),u.mode==="hidden"||m){if(r.flags&128){if(u=v!==null?v.baseLanes|o:o,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~u}else r.childLanes=0,r.child=null;return R_(n,r,u,o)}if(o&536870912)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ec(r,v!==null?v.cachePool:null),v!==null?Iy(r,v):Yf(),Dy(r);else return r.lanes=r.childLanes=536870912,R_(n,r,v!==null?v.baseLanes|o:o,o)}else v!==null?(Ec(r,v.cachePool),Iy(r,v),js(),r.memoizedState=null):(n!==null&&Ec(r,null),Yf(),js());return Wt(n,r,f,o),r.child}function R_(n,r,o,u){var f=Jf();return f=f===null?null:{parent:Mt._currentValue,pool:f},r.memoizedState={baseLanes:o,cachePool:f},n!==null&&Ec(r,null),Yf(),Dy(r),n!==null&&bl(n,r,u,!0),null}function wl(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(r.flags|=2097664)}}function _d(n,r,o,u,f){return Wr(r),o=ed(n,r,o,u,void 0,f),u=td(),n!==null&&!jt?(nd(n,r,f),$i(n,r,f)):(He&&u&&Hf(r),r.flags|=1,Wt(n,r,o,f),r.child)}function I_(n,r,o,u,f,m){return Wr(r),r.updateQueue=null,o=Vy(r,u,o,f),Oy(n),u=td(),n!==null&&!jt?(nd(n,r,m),$i(n,r,m)):(He&&u&&Hf(r),r.flags|=1,Wt(n,r,o,m),r.child)}function D_(n,r,o,u,f){if(Wr(r),r.stateNode===null){var m=za,v=o.contextType;typeof v=="object"&&v!==null&&(m=nn(v)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=gd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},Nd(r),v=o.contextType,m.context=typeof v=="object"&&v!==null?nn(v):za,m.state=r.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(pd(r,o,v,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&gd.enqueueReplaceState(m,m.state,null),Il(r,u,m,f),Rl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){m=r.stateNode;var T=r.memoizedProps,C=Kr(o,T);m.props=C;var P=m.context,Y=o.contextType;v=za,typeof Y=="object"&&Y!==null&&(v=nn(Y));var J=o.getDerivedStateFromProps;Y=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||P!==v)&&p_(r,m,u,v),Hs=!1;var F=r.memoizedState;m.state=F,Il(r,u,m,f),Rl(),P=r.memoizedState,T||F!==P||Hs?(typeof J=="function"&&(pd(r,o,J,u),P=r.memoizedState),(C=Hs||m_(r,o,C,u,F,P,v))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=P),m.props=u,m.state=P,m.context=v,u=C):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,xd(n,r),v=r.memoizedProps,Y=Kr(o,v),m.props=Y,J=r.pendingProps,F=m.context,P=o.contextType,C=za,typeof P=="object"&&P!==null&&(C=nn(P)),T=o.getDerivedStateFromProps,(P=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==J||F!==C)&&p_(r,m,u,C),Hs=!1,F=r.memoizedState,m.state=F,Il(r,u,m,f),Rl();var Q=r.memoizedState;v!==J||F!==Q||Hs||n!==null&&n.dependencies!==null&&xc(n.dependencies)?(typeof T=="function"&&(pd(r,o,T,u),Q=r.memoizedState),(Y=Hs||m_(r,o,Y,u,F,Q,C)||n!==null&&n.dependencies!==null&&xc(n.dependencies))?(P||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Q,C),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Q,C)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Q),m.props=u,m.state=Q,m.context=C,u=Y):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(r.flags|=1024),u=!1)}return m=u,wl(n,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&u?(r.child=qr(r,n.child,null,f),r.child=qr(r,null,o,f)):Wt(n,r,o,f),r.memoizedState=m.state,n=r.child):n=$i(n,r,f),n}function N_(n,r,o,u){return dl(),r.flags|=256,Wt(n,r,o,u),r.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function Ed(n){return{baseLanes:n,cachePool:My()}}function Ad(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Wn),n}function x_(n,r,o){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(xt.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,n===null){if(He){if(f?Bs(r):js(),He){var T=Yt,C;if(C=T){e:{for(C=T,T=wi;C.nodeType!==8;){if(!T){T=null;break e}if(C=oi(C.nextSibling),C===null){T=null;break e}}T=C}T!==null?(r.memoizedState={dehydrated:T,treeContext:Br!==null?{id:Wi,overflow:Xi}:null,retryLane:536870912},C=Yn(18,null,null,0),C.stateNode=T,C.return=r,r.child=C,pn=r,Yt=null,C=!0):C=!1}C||zr(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return T.data==="$!"?r.lanes=16:r.lanes=536870912,null;Zi(r)}return T=u.children,u=u.fallback,f?(js(),f=r.mode,T=Sd({mode:"hidden",children:T},f),u=Zr(u,f,o,null),T.return=r,u.return=r,T.sibling=u,r.child=T,f=r.child,f.memoizedState=Ed(o),f.childLanes=Ad(n,v,o),r.memoizedState=vd,u):(Bs(r),Td(r,T))}if(C=n.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(m)r.flags&256?(Bs(r),r.flags&=-257,r=wd(n,r,o)):r.memoizedState!==null?(js(),r.child=n.child,r.flags|=128,r=null):(js(),f=u.fallback,T=r.mode,u=Sd({mode:"visible",children:u.children},T),f=Zr(f,T,o,null),f.flags|=2,u.return=r,f.return=r,u.sibling=f,r.child=u,qr(r,n.child,null,o),u=r.child,u.memoizedState=Ed(o),u.childLanes=Ad(n,v,o),r.memoizedState=vd,r=f);else if(Bs(r),T.data==="$!"){if(v=T.nextSibling&&T.nextSibling.dataset,v)var P=v.dgst;v=P,u=Error(s(419)),u.stack="",u.digest=v,ml({value:u,source:null,stack:null}),r=wd(n,r,o)}else if(jt||bl(n,r,o,!1),v=(o&n.childLanes)!==0,jt||v){if(v=tt,v!==null){if(u=o&-o,u&42)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=u&(v.suspendedLanes|o)?0:u,u!==0&&u!==C.retryLane)throw C.retryLane=u,Us(n,u),gn(v,n,u),T_}T.data==="$?"||Jd(),r=wd(n,r,o)}else T.data==="$?"?(r.flags|=128,r.child=n.child,r=Yb.bind(null,n),T._reactRetry=r,r=null):(n=C.treeContext,Yt=oi(T.nextSibling),pn=r,He=!0,ri=null,wi=!1,n!==null&&(Fn[Hn++]=Wi,Fn[Hn++]=Xi,Fn[Hn++]=Br,Wi=n.id,Xi=n.overflow,Br=r),r=Td(r,u.children),r.flags|=4096);return r}return f?(js(),f=u.fallback,T=r.mode,C=n.child,P=C.sibling,u=Xs(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&31457280,P!==null?f=Xs(P,f):(f=Zr(f,T,o,null),f.flags|=2),f.return=r,u.return=r,u.sibling=f,r.child=u,u=f,f=r.child,T=n.child.memoizedState,T===null?T=Ed(o):(C=T.cachePool,C!==null?(P=Mt._currentValue,C=C.parent!==P?{parent:P,pool:P}:C):C=My(),T={baseLanes:T.baseLanes|o,cachePool:C}),f.memoizedState=T,f.childLanes=Ad(n,v,o),r.memoizedState=vd,u):(Bs(r),o=n.child,n=o.sibling,o=Xs(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,n!==null&&(v=r.deletions,v===null?(r.deletions=[n],r.flags|=16):v.push(n)),r.child=o,r.memoizedState=null,o)}function Td(n,r){return r=Sd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Sd(n,r){return iv(n,r,0,null)}function wd(n,r,o){return qr(r,n.child,null,o),n=Td(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function M_(n,r,o){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Id(n.return,r,o)}function bd(n,r,o,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function O_(n,r,o){var u=r.pendingProps,f=u.revealOrder,m=u.tail;if(Wt(n,r,u.children,o),u=xt.current,u&2)u=u&1|2,r.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&M_(n,o,r);else if(n.tag===19)M_(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(Xe(xt,u),f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&vc(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),bd(r,!1,f,o,m);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&vc(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}bd(r,!0,o,null,m);break;case"together":bd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function $i(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Zs|=r.lanes,!(o&r.childLanes))if(n!==null){if(bl(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,o=Xs(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Xs(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Cd(n,r){return n.lanes&r?!0:(n=n.dependencies,!!(n!==null&&xc(n)))}function Vb(n,r,o){switch(r.tag){case 3:Ts(r,r.stateNode.containerInfo),Fs(r,Mt,n.memoizedState.cache),dl();break;case 27:case 5:Fo(r);break;case 4:Ts(r,r.stateNode.containerInfo);break;case 10:Fs(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Bs(r),r.flags|=128,null):o&r.child.childLanes?x_(n,r,o):(Bs(r),n=$i(n,r,o),n!==null?n.sibling:null);Bs(r);break;case 19:var f=(n.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(bl(n,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return O_(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Xe(xt,xt.current),u)break;return null;case 22:case 23:return r.lanes=0,C_(n,r,o);case 24:Fs(r,Mt,n.memoizedState.cache)}return $i(n,r,o)}function V_(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)jt=!0;else{if(!Cd(n,o)&&!(r.flags&128))return jt=!1,Vb(n,r,o);jt=!!(n.flags&131072)}else jt=!1,He&&r.flags&1048576&&_y(r,mc,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var u=r.elementType,f=u._init;if(u=f(u._payload),r.type=u,typeof u=="function")jd(u)?(n=Kr(u,n),r.tag=1,r=D_(null,r,u,n,o)):(r.tag=0,r=_d(null,r,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===O){r.tag=11,r=S_(null,r,u,n,o);break e}else if(f===W){r.tag=14,r=w_(null,r,u,n,o);break e}}throw r=R(u)||u,Error(s(306,r,""))}}return r;case 0:return _d(n,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Kr(u,r.pendingProps),D_(n,r,u,f,o);case 3:e:{if(Ts(r,r.stateNode.containerInfo),n===null)throw Error(s(387));var m=r.pendingProps;f=r.memoizedState,u=f.element,xd(n,r),Il(r,m,null,o);var v=r.memoizedState;if(m=v.cache,Fs(r,Mt,m),m!==f.cache&&Dd(r,[Mt],o,!0),Rl(),m=v.element,f.isDehydrated)if(f={element:m,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=N_(n,r,m,o);break e}else if(m!==u){u=qn(Error(s(424)),r),ml(u),r=N_(n,r,m,o);break e}else for(Yt=oi(r.stateNode.containerInfo.firstChild),pn=r,He=!0,ri=null,wi=!0,o=Ry(r,null,m,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(dl(),m===u){r=$i(n,r,o);break e}Wt(n,r,m,o)}r=r.child}return r;case 26:return wl(n,r),n===null?(o=Pv(r.type,null,r.pendingProps,null))?r.memoizedState=o:He||(o=r.type,n=r.pendingProps,u=Kc(Vn.current).createElement(o),u[Pt]=r,u[It]=n,Xt(u,o,n),ot(u),r.stateNode=u):r.memoizedState=Pv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Fo(r),n===null&&He&&(u=r.stateNode=Vv(r.type,r.pendingProps,Vn.current),pn=r,wi=!0,Yt=oi(u.firstChild)),u=r.pendingProps.children,n!==null||He?Wt(n,r,u,o):r.child=qr(r,null,u,o),wl(n,r),r.child;case 5:return n===null&&He&&((f=u=Yt)&&(u=cC(u,r.type,r.pendingProps,wi),u!==null?(r.stateNode=u,pn=r,Yt=oi(u.firstChild),wi=!1,f=!0):f=!1),f||zr(r)),Fo(r),f=r.type,m=r.pendingProps,v=n!==null?n.memoizedProps:null,u=m.children,fm(f,m)?u=null:v!==null&&fm(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=ed(n,r,Rb,null,null,o),Fl._currentValue=f),wl(n,r),Wt(n,r,u,o),r.child;case 6:return n===null&&He&&((n=o=Yt)&&(o=hC(o,r.pendingProps,wi),o!==null?(r.stateNode=o,pn=r,Yt=null,n=!0):n=!1),n||zr(r)),null;case 13:return x_(n,r,o);case 4:return Ts(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=qr(r,null,u,o):Wt(n,r,u,o),r.child;case 11:return S_(n,r,r.type,r.pendingProps,o);case 7:return Wt(n,r,r.pendingProps,o),r.child;case 8:return Wt(n,r,r.pendingProps.children,o),r.child;case 12:return Wt(n,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Fs(r,r.type,u.value),Wt(n,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Wr(r),f=nn(f),u=u(f),r.flags|=1,Wt(n,r,u,o),r.child;case 14:return w_(n,r,r.type,r.pendingProps,o);case 15:return b_(n,r,r.type,r.pendingProps,o);case 19:return O_(n,r,o);case 22:return C_(n,r,o);case 24:return Wr(r),u=nn(Mt),n===null?(f=Jf(),f===null&&(f=tt,m=Xf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:u,cache:f},Nd(r),Fs(r,Mt,f)):(n.lanes&o&&(xd(n,r),Il(r,null,null,o),Rl()),f=n.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Fs(r,Mt,u)):(u=m.cache,Fs(r,Mt,u),u!==f.cache&&Dd(r,[Mt],o,!0))),Wt(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}var Rd=qe(null),Yr=null,es=null;function Fs(n,r,o){Xe(Rd,r._currentValue),r._currentValue=o}function ts(n){n._currentValue=Rd.current,ht(Rd)}function Id(n,r,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===o)break;n=n.return}}function Dd(n,r,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var C=0;C<r.length;C++)if(T.context===r[C]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),Id(m.return,o,n),u||(v=null);break e}m=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),Id(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function bl(n,r,o,u){n=null;for(var f=r,m=!1;f!==null;){if(!m){if(f.flags&524288)m=!0;else if(f.flags&262144)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=f.type;Cn(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===As.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Fl):n=[Fl])}f=f.return}n!==null&&Dd(r,n,o,u),r.flags|=262144}function xc(n){for(n=n.firstContext;n!==null;){if(!Cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Wr(n){Yr=n,es=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return k_(Yr,n)}function Mc(n,r){return Yr===null&&Wr(n),k_(n,r)}function k_(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},es===null){if(n===null)throw Error(s(308));es=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else es=es.next=r;return o}var Hs=!1;function Nd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Gs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Qs(n,r,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,ut&2){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=fc(n),gy(n,null,o),r}return hc(n,u,r,o),fc(n)}function Cl(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194176)!==0)){var u=r.lanes;u&=n.pendingLanes,o|=u,r.lanes=o,Is(n,o)}}function Md(n,r){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var Od=!1;function Rl(){if(Od){var n=Ka;if(n!==null)throw n}}function Il(n,r,o,u){Od=!1;var f=n.updateQueue;Hs=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var C=T,P=C.next;C.next=null,v===null?m=P:v.next=P,v=C;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,T=Y.lastBaseUpdate,T!==v&&(T===null?Y.firstBaseUpdate=P:T.next=P,Y.lastBaseUpdate=C))}if(m!==null){var J=f.baseState;v=0,Y=P=C=null,T=m;do{var F=T.lane&-536870913,Q=F!==T.lane;if(Q?(Ue&F)===F:(u&F)===F){F!==0&&F===Qa&&(Od=!0),Y!==null&&(Y=Y.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ce=n,Te=T;F=r;var pt=o;switch(Te.tag){case 1:if(ce=Te.payload,typeof ce=="function"){J=ce.call(pt,J,F);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=Te.payload,F=typeof ce=="function"?ce.call(pt,J,F):ce,F==null)break e;J=x({},J,F);break e;case 2:Hs=!0}}F=T.callback,F!==null&&(n.flags|=64,Q&&(n.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[F]:Q.push(F))}else Q={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Y===null?(P=Y=Q,C=J):Y=Y.next=Q,v|=F;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);Y===null&&(C=J),f.baseState=C,f.firstBaseUpdate=P,f.lastBaseUpdate=Y,m===null&&(f.shared.lanes=0),Zs|=v,n.lanes=v,n.memoizedState=J}}function L_(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function P_(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)L_(o[n],r)}function Dl(n,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(T){et(r,r.return,T)}}function Ks(n,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var v=u.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=r;var C=o;try{T()}catch(P){et(f,C,P)}}}u=u.next}while(u!==m)}}catch(P){et(r,r.return,P)}}function U_(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{P_(r,o)}catch(u){et(n,n.return,u)}}}function B_(n,r,o){o.props=Kr(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){et(n,r,u)}}function Xr(n,r){try{var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 26:case 27:case 5:var f=u;break;default:f=u}typeof o=="function"?n.refCleanup=o(f):o.current=f}}catch(m){et(n,r,m)}}function Rn(n,r){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){et(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){et(n,r,f)}else o.current=null}function j_(n){var r=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){et(n,n.return,f)}}function z_(n,r,o){try{var u=n.stateNode;rC(u,n.type,o,r),u[It]=r}catch(f){et(n,n.return,f)}}function q_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Vd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||q_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function kd(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(n,r):o.insertBefore(n,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(n,o)):(r=o,r.appendChild(n)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Qc));else if(u!==4&&u!==27&&(n=n.child,n!==null))for(kd(n,r,o),n=n.sibling;n!==null;)kd(n,r,o),n=n.sibling}function Oc(n,r,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(u!==4&&u!==27&&(n=n.child,n!==null))for(Oc(n,r,o),n=n.sibling;n!==null;)Oc(n,r,o),n=n.sibling}var ns=!1,dt=!1,Ld=!1,F_=typeof WeakSet=="function"?WeakSet:Set,zt=null,H_=!1;function kb(n,r){if(n=n.containerInfo,cm=$c,n=oy(n),Uf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,T=-1,C=-1,P=0,Y=0,J=n,F=null;t:for(;;){for(var Q;J!==o||f!==0&&J.nodeType!==3||(T=v+f),J!==m||u!==0&&J.nodeType!==3||(C=v+u),J.nodeType===3&&(v+=J.nodeValue.length),(Q=J.firstChild)!==null;)F=J,J=Q;for(;;){if(J===n)break t;if(F===o&&++P===f&&(T=v),F===m&&++Y===u&&(C=v),(Q=J.nextSibling)!==null)break;J=F,F=J.parentNode}J=Q}o=T===-1||C===-1?null:{start:T,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(hm={focusedElem:n,selectionRange:o},$c=!1,zt=r;zt!==null;)if(r=zt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,zt=n;else for(;zt!==null;){switch(r=zt,m=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var ce=Kr(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(ce,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(Te){et(o,o.return,Te)}}break;case 3:if(n&1024){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)pm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":pm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,zt=n;break}zt=r.return}return ce=H_,H_=!1,ce}function G_(n,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ss(n,o),u&4&&Dl(5,o);break;case 1:if(ss(n,o),u&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(T){et(o,o.return,T)}else{var f=Kr(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(T){et(o,o.return,T)}}u&64&&U_(o),u&512&&Xr(o,o.return);break;case 3:if(ss(n,o),u&64&&(u=o.updateQueue,u!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{P_(u,n)}catch(T){et(o,o.return,T)}}break;case 26:ss(n,o),u&512&&Xr(o,o.return);break;case 27:case 5:ss(n,o),r===null&&u&4&&j_(o),u&512&&Xr(o,o.return);break;case 12:ss(n,o);break;case 13:ss(n,o),u&4&&Y_(n,o);break;case 22:if(f=o.memoizedState!==null||ns,!f){r=r!==null&&r.memoizedState!==null||dt;var m=ns,v=dt;ns=f,(dt=r)&&!v?Ys(n,o,(o.subtreeFlags&8772)!==0):ss(n,o),ns=m,dt=v}u&512&&(o.memoizedProps.mode==="manual"?Xr(o,o.return):Rn(o,o.return));break;default:ss(n,o)}}function Q_(n){var r=n.alternate;r!==null&&(n.alternate=null,Q_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Cr(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var St=null,In=!1;function is(n,r,o){for(o=o.child;o!==null;)K_(n,r,o),o=o.sibling}function K_(n,r,o){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Ss,o)}catch{}switch(o.tag){case 26:dt||Rn(o,r),is(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:dt||Rn(o,r);var u=St,f=In;for(St=o.stateNode,is(n,r,o),o=o.stateNode,r=o.attributes;r.length;)o.removeAttributeNode(r[0]);Cr(o),St=u,In=f;break;case 5:dt||Rn(o,r);case 6:f=St;var m=In;if(St=null,is(n,r,o),St=f,In=m,St!==null)if(In)try{n=St,u=o.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)}catch(v){et(o,r,v)}else try{St.removeChild(o.stateNode)}catch(v){et(o,r,v)}break;case 18:St!==null&&(In?(r=St,o=o.stateNode,r.nodeType===8?mm(r.parentNode,o):r.nodeType===1&&mm(r,o),Kl(r)):mm(St,o.stateNode));break;case 4:u=St,f=In,St=o.stateNode.containerInfo,In=!0,is(n,r,o),St=u,In=f;break;case 0:case 11:case 14:case 15:dt||Ks(2,o,r),dt||Ks(4,o,r),is(n,r,o);break;case 1:dt||(Rn(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&B_(o,r,u)),is(n,r,o);break;case 21:is(n,r,o);break;case 22:dt||Rn(o,r),dt=(u=dt)||o.memoizedState!==null,is(n,r,o),dt=u;break;default:is(n,r,o)}}function Y_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Kl(n)}catch(o){et(r,r.return,o)}}function Lb(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new F_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new F_),r;default:throw Error(s(435,n.tag))}}function Pd(n,r){var o=Lb(n);r.forEach(function(u){var f=Wb.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Qn(n,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=n,v=r,T=v;e:for(;T!==null;){switch(T.tag){case 27:case 5:St=T.stateNode,In=!1;break e;case 3:St=T.stateNode.containerInfo,In=!0;break e;case 4:St=T.stateNode.containerInfo,In=!0;break e}T=T.return}if(St===null)throw Error(s(160));K_(m,v,f),St=null,In=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)W_(r,n),r=r.sibling}var ai=null;function W_(n,r){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Qn(r,n),Kn(n),u&4&&(Ks(3,n,n.return),Dl(3,n),Ks(5,n,n.return));break;case 1:Qn(r,n),Kn(n),u&512&&(dt||o===null||Rn(o,o.return)),u&64&&ns&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ai;if(Qn(r,n),Kn(n),u&512&&(dt||o===null||Rn(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ns]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Xt(m,u,o),m[Pt]=n,ot(m),u=m;break e;case"link":var v=jv("link","href",f).get(u+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(o.href==null?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}m=f.createElement(u),Xt(m,u,o),f.head.appendChild(m);break;case"meta":if(v=jv("meta","content",f).get(u+(o.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}m=f.createElement(u),Xt(m,u,o),f.head.appendChild(m);break;default:throw Error(s(468,u))}m[Pt]=n,ot(m),u=m}n.stateNode=u}else zv(f,n.type,n.stateNode);else n.stateNode=Bv(f,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?zv(f,n.type,n.stateNode):Bv(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&z_(n,n.memoizedProps,o.memoizedProps)}break;case 27:if(u&4&&n.alternate===null){f=n.stateNode,m=n.memoizedProps;try{for(var C=f.firstChild;C;){var P=C.nextSibling,Y=C.nodeName;C[Ns]||Y==="HEAD"||Y==="BODY"||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&C.rel.toLowerCase()==="stylesheet"||f.removeChild(C),C=P}for(var J=n.type,F=f.attributes;F.length;)f.removeAttributeNode(F[0]);Xt(f,J,m),f[Pt]=n,f[It]=m}catch(ce){et(n,n.return,ce)}}case 5:if(Qn(r,n),Kn(n),u&512&&(dt||o===null||Rn(o,o.return)),n.flags&32){f=n.stateNode;try{Pn(f,"")}catch(ce){et(n,n.return,ce)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,z_(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Ld=!0);break;case 6:if(Qn(r,n),Kn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ce){et(n,n.return,ce)}}break;case 3:if(Xc=null,f=ai,ai=Yc(r.containerInfo),Qn(r,n),ai=f,Kn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Kl(r.containerInfo)}catch(ce){et(n,n.return,ce)}Ld&&(Ld=!1,X_(n));break;case 4:u=ai,ai=Yc(n.stateNode.containerInfo),Qn(r,n),Kn(n),ai=u;break;case 12:Qn(r,n),Kn(n);break;case 13:Qn(r,n),Kn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Qd=yn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pd(n,u)));break;case 22:if(u&512&&(dt||o===null||Rn(o,o.return)),C=n.memoizedState!==null,P=o!==null&&o.memoizedState!==null,Y=ns,J=dt,ns=Y||C,dt=J||P,Qn(r,n),dt=J,ns=Y,Kn(n),r=n.stateNode,r._current=n,r._visibility&=-3,r._visibility|=r._pendingVisibility&2,u&8192&&(r._visibility=C?r._visibility&-2:r._visibility|1,C&&(r=ns||dt,o===null||P||r||Za(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(o=null,r=n;;){if(r.tag===5||r.tag===26||r.tag===27){if(o===null){P=o=r;try{if(f=P.stateNode,C)m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{v=P.stateNode,T=P.memoizedProps.style;var Q=T!=null&&T.hasOwnProperty("display")?T.display:null;v.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ce){et(P,P.return,ce)}}}else if(r.tag===6){if(o===null){P=r;try{P.stateNode.nodeValue=C?"":P.memoizedProps}catch(ce){et(P,P.return,ce)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Pd(n,o))));break;case 19:Qn(r,n),Kn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pd(n,u)));break;case 21:break;default:Qn(r,n),Kn(n)}}function Kn(n){var r=n.flags;if(r&2){try{if(n.tag!==27){e:{for(var o=n.return;o!==null;){if(q_(o)){var u=o;break e}o=o.return}throw Error(s(160))}switch(u.tag){case 27:var f=u.stateNode,m=Vd(n);Oc(n,m,f);break;case 5:var v=u.stateNode;u.flags&32&&(Pn(v,""),u.flags&=-33);var T=Vd(n);Oc(n,T,v);break;case 3:case 4:var C=u.stateNode.containerInfo,P=Vd(n);kd(n,P,C);break;default:throw Error(s(161))}}}catch(Y){et(n,n.return,Y)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function X_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;X_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function ss(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)G_(n,r.alternate,r),r=r.sibling}function Za(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Ks(4,r,r.return),Za(r);break;case 1:Rn(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&B_(r,r.return,o),Za(r);break;case 26:case 27:case 5:Rn(r,r.return),Za(r);break;case 22:Rn(r,r.return),r.memoizedState===null&&Za(r);break;default:Za(r)}n=n.sibling}}function Ys(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=n,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:Ys(f,m,o),Dl(4,m);break;case 1:if(Ys(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(P){et(u,u.return,P)}if(u=m,f=u.updateQueue,f!==null){var T=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)L_(C[f],T)}catch(P){et(u,u.return,P)}}o&&v&64&&U_(m),Xr(m,m.return);break;case 26:case 27:case 5:Ys(f,m,o),o&&u===null&&v&4&&j_(m),Xr(m,m.return);break;case 12:Ys(f,m,o);break;case 13:Ys(f,m,o),o&&v&4&&Y_(f,m);break;case 22:m.memoizedState===null&&Ys(f,m,o),Xr(m,m.return);break;default:Ys(f,m,o)}r=r.sibling}}function Ud(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&vl(o))}function Bd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&vl(n))}function Ws(n,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Z_(n,r,o,u),r=r.sibling}function Z_(n,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ws(n,r,o,u),f&2048&&Dl(9,r);break;case 3:Ws(n,r,o,u),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&vl(n)));break;case 12:if(f&2048){Ws(n,r,o,u),n=r.stateNode;try{var m=r.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){et(r,r.return,C)}}else Ws(n,r,o,u);break;case 23:break;case 22:m=r.stateNode,r.memoizedState!==null?m._visibility&4?Ws(n,r,o,u):Nl(n,r):m._visibility&4?Ws(n,r,o,u):(m._visibility|=4,Ja(n,r,o,u,(r.subtreeFlags&10256)!==0)),f&2048&&Ud(r.alternate,r);break;case 24:Ws(n,r,o,u),f&2048&&Bd(r.alternate,r);break;default:Ws(n,r,o,u)}}function Ja(n,r,o,u,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=n,v=r,T=o,C=u,P=v.flags;switch(v.tag){case 0:case 11:case 15:Ja(m,v,T,C,f),Dl(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&4?Ja(m,v,T,C,f):Nl(m,v):(Y._visibility|=4,Ja(m,v,T,C,f)),f&&P&2048&&Ud(v.alternate,v);break;case 24:Ja(m,v,T,C,f),f&&P&2048&&Bd(v.alternate,v);break;default:Ja(m,v,T,C,f)}r=r.sibling}}function Nl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,u=r,f=u.flags;switch(u.tag){case 22:Nl(o,u),f&2048&&Ud(u.alternate,u);break;case 24:Nl(o,u),f&2048&&Bd(u.alternate,u);break;default:Nl(o,u)}r=r.sibling}}var xl=8192;function $a(n){if(n.subtreeFlags&xl)for(n=n.child;n!==null;)J_(n),n=n.sibling}function J_(n){switch(n.tag){case 26:$a(n),n.flags&xl&&n.memoizedState!==null&&wC(ai,n.memoizedState,n.memoizedProps);break;case 5:$a(n);break;case 3:case 4:var r=ai;ai=Yc(n.stateNode.containerInfo),$a(n),ai=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=xl,xl=16777216,$a(n),xl=r):$a(n));break;default:$a(n)}}function $_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ml(n){var r=n.deletions;if(n.flags&16){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];zt=u,tv(u,n)}$_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ev(n),n=n.sibling}function ev(n){switch(n.tag){case 0:case 11:case 15:Ml(n),n.flags&2048&&Ks(9,n,n.return);break;case 3:Ml(n);break;case 12:Ml(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&4&&(n.return===null||n.return.tag!==13)?(r._visibility&=-5,Vc(n)):Ml(n);break;default:Ml(n)}}function Vc(n){var r=n.deletions;if(n.flags&16){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];zt=u,tv(u,n)}$_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Ks(8,r,r.return),Vc(r);break;case 22:o=r.stateNode,o._visibility&4&&(o._visibility&=-5,Vc(r));break;default:Vc(r)}n=n.sibling}}function tv(n,r){for(;zt!==null;){var o=zt;switch(o.tag){case 0:case 11:case 15:Ks(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,zt=u;else e:for(o=n;zt!==null;){u=zt;var f=u.sibling,m=u.return;if(Q_(u),u===o){zt=null;break e}if(f!==null){f.return=m,zt=f;break e}zt=m}}}function Pb(n,r,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(n,r,o,u){return new Pb(n,r,o,u)}function jd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xs(n,r){var o=n.alternate;return o===null?(o=Yn(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&31457280,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function nv(n,r){n.flags&=31457282;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function kc(n,r,o,u,f,m){var v=0;if(u=n,typeof n=="function")jd(n)&&(v=1);else if(typeof n=="string")v=TC(n,o,hn.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case p:return Zr(o.children,f,m,r);case g:v=8,f|=24;break;case E:return n=Yn(12,o,r,f|2),n.elementType=E,n.lanes=m,n;case G:return n=Yn(13,o,r,f),n.elementType=G,n.lanes=m,n;case z:return n=Yn(19,o,r,f),n.elementType=z,n.lanes=m,n;case te:return iv(o,f,m,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:case D:v=10;break e;case w:v=9;break e;case O:v=11;break e;case W:v=14;break e;case ne:v=16,u=null;break e}v=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return r=Yn(v,o,r,f),r.elementType=n,r.type=u,r.lanes=m,r}function Zr(n,r,o,u){return n=Yn(7,n,u,r),n.lanes=o,n}function iv(n,r,o,u){n=Yn(22,n,u,r),n.elementType=te,n.lanes=o;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var m=f._current;if(m===null)throw Error(s(456));if(!(f._pendingVisibility&2)){var v=Us(m,2);v!==null&&(f._pendingVisibility|=2,gn(v,m,2))}},attach:function(){var m=f._current;if(m===null)throw Error(s(456));if(f._pendingVisibility&2){var v=Us(m,2);v!==null&&(f._pendingVisibility&=-3,gn(v,m,2))}}};return n.stateNode=f,n}function zd(n,r,o){return n=Yn(6,n,null,r),n.lanes=o,n}function qd(n,r,o){return r=Yn(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function rs(n){n.flags|=4}function sv(n,r){if(r.type!=="stylesheet"||r.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!qv(r)){if(r=Gn.current,r!==null&&((Ue&4194176)===Ue?bi!==null:(Ue&62914560)!==Ue&&!(Ue&536870912)||r!==bi))throw gl=Kf,Ay;n.flags|=8192}}function Lc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Cs():536870912,n.lanes|=r,to|=r)}function Ol(n,r){if(!He)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function lt(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&31457280,u|=f.flags&31457280,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,r}function Ub(n,r,o){var u=r.pendingProps;switch(Gf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return o=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),ts(Mt),Ui(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(fl(r)?rs(r):n===null||n.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,ri!==null&&(Xd(ri),ri=null))),lt(r),null;case 26:return o=r.memoizedState,n===null?(rs(r),o!==null?(lt(r),sv(r,o)):(lt(r),r.flags&=-16777217)):o?o!==n.memoizedState?(rs(r),lt(r),sv(r,o)):(lt(r),r.flags&=-16777217):(n.memoizedProps!==u&&rs(r),lt(r),r.flags&=-16777217),null;case 27:Ea(r),o=Vn.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==u&&rs(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return lt(r),null}n=hn.current,fl(r)?vy(r):(n=Vv(f,u,o),r.stateNode=n,rs(r))}return lt(r),null;case 5:if(Ea(r),o=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&rs(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return lt(r),null}if(n=hn.current,fl(r))vy(r);else{switch(f=Kc(Vn.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Pt]=r,n[It]=u;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(Xt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&rs(r)}}return lt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&rs(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(n=Vn.current,fl(r)){if(n=r.stateNode,o=r.memoizedProps,u=null,f=pn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Pt]=r,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Iv(n.nodeValue,o)),n||zr(r)}else n=Kc(n).createTextNode(u),n[Pt]=r,r.stateNode=n}return lt(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=fl(r),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Pt]=r}else dl(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;lt(r),f=!1}else ri!==null&&(Xd(ri),ri=null),f=!0;if(!f)return r.flags&256?(Zi(r),r):(Zi(r),null)}if(Zi(r),r.flags&128)return r.lanes=o,r;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==n&&o&&(r.child.flags|=8192),Lc(r,r.updateQueue),lt(r),null;case 4:return Ui(),n===null&&om(r.stateNode.containerInfo),lt(r),null;case 10:return ts(r.type),lt(r),null;case 19:if(ht(xt),f=r.memoizedState,f===null)return lt(r),null;if(u=(r.flags&128)!==0,m=f.rendering,m===null)if(u)Ol(f,!1);else{if(mt!==0||n!==null&&n.flags&128)for(n=r.child;n!==null;){if(m=vc(n),m!==null){for(r.flags|=128,Ol(f,!1),n=m.updateQueue,r.updateQueue=n,Lc(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)nv(o,n),o=o.sibling;return Xe(xt,xt.current&1|2),r.child}n=n.sibling}f.tail!==null&&yn()>Pc&&(r.flags|=128,u=!0,Ol(f,!1),r.lanes=4194304)}else{if(!u)if(n=vc(m),n!==null){if(r.flags|=128,u=!0,n=n.updateQueue,r.updateQueue=n,Lc(r,n),Ol(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!He)return lt(r),null}else 2*yn()-f.renderingStartTime>Pc&&o!==536870912&&(r.flags|=128,u=!0,Ol(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(n=f.last,n!==null?n.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=yn(),r.sibling=null,n=xt.current,Xe(xt,u?n&1|2:n&1),r):(lt(r),null);case 22:case 23:return Zi(r),Wf(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?o&536870912&&!(r.flags&128)&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),o=r.updateQueue,o!==null&&Lc(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),n!==null&&ht(Fr),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ts(Mt),lt(r),null;case 25:return null}throw Error(s(156,r.tag))}function Bb(n,r){switch(Gf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return ts(Mt),Ui(),n=r.flags,n&65536&&!(n&128)?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ea(r),null;case 13:if(Zi(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));dl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ht(xt),null;case 4:return Ui(),null;case 10:return ts(r.type),null;case 22:case 23:return Zi(r),Wf(),n!==null&&ht(Fr),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return ts(Mt),null;case 25:return null;default:return null}}function rv(n,r){switch(Gf(r),r.tag){case 3:ts(Mt),Ui();break;case 26:case 27:case 5:Ea(r);break;case 4:Ui();break;case 13:Zi(r);break;case 19:ht(xt);break;case 10:ts(r.type);break;case 22:case 23:Zi(r),Wf(),n!==null&&ht(Fr);break;case 24:ts(Mt)}}var jb={getCacheForType:function(n){var r=nn(Mt),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o}},zb=typeof WeakMap=="function"?WeakMap:Map,ut=0,tt=null,Ne=null,Ue=0,nt=0,Dn=null,as=!1,eo=!1,Fd=!1,os=0,mt=0,Zs=0,Jr=0,Hd=0,Wn=0,to=0,Vl=null,Ri=null,Gd=!1,Qd=0,Pc=1/0,Uc=null,Js=null,Bc=!1,$r=null,kl=0,Kd=0,Yd=null,Ll=0,Wd=null;function Nn(){if(ut&2&&Ue!==0)return Ue&-Ue;if(b.T!==null){var n=Qa;return n!==0?n:im()}return Gu()}function av(){Wn===0&&(Wn=!(Ue&536870912)||He?Yo():536870912);var n=Gn.current;return n!==null&&(n.flags|=32),Wn}function gn(n,r,o){(n===tt&&nt===2||n.cancelPendingCommit!==null)&&(no(n,0),ls(n,Ue,Wn,!1)),gt(n,o),(!(ut&2)||n!==tt)&&(n===tt&&(!(ut&2)&&(Jr|=o),mt===4&&ls(n,Ue,Wn,!1)),Ii(n))}function ov(n,r,o){if(ut&6)throw Error(s(327));var u=!o&&(r&60)===0&&(r&n.expiredLanes)===0||bs(n,r),f=u?Hb(n,r):$d(n,r,!0),m=u;do{if(f===0){eo&&!u&&ls(n,r,0,!1);break}else if(f===6)ls(n,r,0,!as);else{if(o=n.current.alternate,m&&!qb(o)){f=$d(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var T=n;f=Vl;var C=T.current.memoizedState.isDehydrated;if(C&&(no(T,v).flags|=256),v=$d(T,v,!1),v!==2){if(Fd&&!C){T.errorRecoveryDisabledLanes|=m,Jr|=m,f=4;break e}m=Ri,Ri=f,m!==null&&Xd(m)}f=v}if(m=!1,f!==2)continue}}if(f===1){no(n,0),ls(n,r,0,!0);break}e:{switch(u=n,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194176)===r){ls(u,r,Wn,!as);break e}break;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(s(329))}if(u.finishedWork=o,u.finishedLanes=r,(r&62914560)===r&&(m=Qd+300-yn(),10<m)){if(ls(u,r,Wn,!as),kn(u,0)!==0)break e;u.timeoutHandle=xv(lv.bind(null,u,o,Ri,Uc,Gd,r,Wn,Jr,to,as,2,-0,0),m);break e}lv(u,o,Ri,Uc,Gd,r,Wn,Jr,to,as,0,-0,0)}}break}while(!0);Ii(n)}function Xd(n){Ri===null?Ri=n:Ri.push.apply(Ri,n)}function lv(n,r,o,u,f,m,v,T,C,P,Y,J,F){var Q=r.subtreeFlags;if((Q&8192||(Q&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:SC},J_(r),r=bC(),r!==null)){n.cancelPendingCommit=r(pv.bind(null,n,o,u,f,v,T,C,1,J,F)),ls(n,m,v,!P);return}pv(n,o,u,f,v,T,C,Y,J,F)}function qb(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Cn(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ls(n,r,o,u){r&=~Hd,r&=~Jr,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var f=r;0<f;){var m=31-fn(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&Rs(n,o,r)}function jc(){return ut&6?!0:(Pl(0),!1)}function Zd(){if(Ne!==null){if(nt===0)var n=Ne.return;else n=Ne,es=Yr=null,id(n),Ha=null,yl=0,n=Ne;for(;n!==null;)rv(n.alternate,n),n=n.return;Ne=null}}function no(n,r){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,oC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Zd(),tt=n,Ne=o=Xs(n.current,null),Ue=r,nt=0,Dn=null,as=!1,eo=bs(n,r),Fd=!1,to=Wn=Hd=Jr=Zs=mt=0,Ri=Vl=null,Gd=!1,r&8&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var f=31-fn(u),m=1<<f;r|=n[f],u&=~m}return os=r,cc(),o}function uv(n,r){Ie=null,b.H=Ci,r===pl?(r=wy(),nt=3):r===Ay?(r=wy(),nt=4):nt=r===T_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Dn=r,Ne===null&&(mt=1,Nc(n,qn(r,n.current)))}function cv(){var n=b.H;return b.H=Ci,n===null?Ci:n}function hv(){var n=b.A;return b.A=jb,n}function Jd(){mt=4,as||(Ue&4194176)!==Ue&&Gn.current!==null||(eo=!0),!(Zs&134217727)&&!(Jr&134217727)||tt===null||ls(tt,Ue,Wn,!1)}function $d(n,r,o){var u=ut;ut|=2;var f=cv(),m=hv();(tt!==n||Ue!==r)&&(Uc=null,no(n,r)),r=!1;var v=mt;e:do try{if(nt!==0&&Ne!==null){var T=Ne,C=Dn;switch(nt){case 8:Zd(),v=6;break e;case 3:case 2:case 6:Gn.current===null&&(r=!0);var P=nt;if(nt=0,Dn=null,io(n,T,C,P),o&&eo){v=0;break e}break;default:P=nt,nt=0,Dn=null,io(n,T,C,P)}}Fb(),v=mt;break}catch(Y){uv(n,Y)}while(!0);return r&&n.shellSuspendCounter++,es=Yr=null,ut=u,b.H=f,b.A=m,Ne===null&&(tt=null,Ue=0,cc()),v}function Fb(){for(;Ne!==null;)fv(Ne)}function Hb(n,r){var o=ut;ut|=2;var u=cv(),f=hv();tt!==n||Ue!==r?(Uc=null,Pc=yn()+500,no(n,r)):eo=bs(n,r);e:do try{if(nt!==0&&Ne!==null){r=Ne;var m=Dn;t:switch(nt){case 1:nt=0,Dn=null,io(n,r,m,1);break;case 2:if(Ty(m)){nt=0,Dn=null,dv(r);break}r=function(){nt===2&&tt===n&&(nt=7),Ii(n)},m.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Ty(m)?(nt=0,Dn=null,dv(r)):(nt=0,Dn=null,io(n,r,m,7));break;case 5:var v=null;switch(Ne.tag){case 26:v=Ne.memoizedState;case 5:case 27:var T=Ne;if(!v||qv(v)){nt=0,Dn=null;var C=T.sibling;if(C!==null)Ne=C;else{var P=T.return;P!==null?(Ne=P,zc(P)):Ne=null}break t}}nt=0,Dn=null,io(n,r,m,5);break;case 6:nt=0,Dn=null,io(n,r,m,6);break;case 8:Zd(),mt=6;break e;default:throw Error(s(462))}}Gb();break}catch(Y){uv(n,Y)}while(!0);return es=Yr=null,b.H=u,b.A=f,ut=o,Ne!==null?0:(tt=null,Ue=0,cc(),mt)}function Gb(){for(;Ne!==null&&!Rf();)fv(Ne)}function fv(n){var r=V_(n.alternate,n,os);n.memoizedProps=n.pendingProps,r===null?zc(n):Ne=r}function dv(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=I_(o,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=I_(o,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:id(r);default:rv(o,r),r=Ne=nv(r,os),r=V_(o,r,os)}n.memoizedProps=n.pendingProps,r===null?zc(n):Ne=r}function io(n,r,o,u){es=Yr=null,id(r),Ha=null,yl=0;var f=r.return;try{if(Ob(n,f,r,o,Ue)){mt=1,Nc(n,qn(o,n.current)),Ne=null;return}}catch(m){if(f!==null)throw Ne=f,m;mt=1,Nc(n,qn(o,n.current)),Ne=null;return}r.flags&32768?(He||u===1?n=!0:eo||Ue&536870912?n=!1:(as=n=!0,(u===2||u===3||u===6)&&(u=Gn.current,u!==null&&u.tag===13&&(u.flags|=16384))),mv(r,n)):zc(r)}function zc(n){var r=n;do{if(r.flags&32768){mv(r,as);return}n=r.return;var o=Ub(r.alternate,r,os);if(o!==null){Ne=o;return}if(r=r.sibling,r!==null){Ne=r;return}Ne=r=n}while(r!==null);mt===0&&(mt=5)}function mv(n,r){do{var o=Bb(n.alternate,n);if(o!==null){o.flags&=32767,Ne=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Ne=n;return}Ne=n=o}while(n!==null);mt=6,Ne=null}function pv(n,r,o,u,f,m,v,T,C,P){var Y=b.T,J=oe.p;try{oe.p=2,b.T=null,Qb(n,r,o,u,J,f,m,v,T,C,P)}finally{b.T=Y,oe.p=J}}function Qb(n,r,o,u,f,m,v,T){do so();while($r!==null);if(ut&6)throw Error(s(327));var C=n.finishedWork;if(u=n.finishedLanes,C===null)return null;if(n.finishedWork=null,n.finishedLanes=0,C===n.current)throw Error(s(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var P=C.lanes|C.childLanes;if(P|=qf,Fu(n,u,P,m,v,T),n===tt&&(Ne=tt=null,Ue=0),!(C.subtreeFlags&10256)&&!(C.flags&10256)||Bc||(Bc=!0,Kd=P,Yd=o,Xb(Bi,function(){return so(),null})),o=(C.flags&15990)!==0,C.subtreeFlags&15990||o?(o=b.T,b.T=null,m=oe.p,oe.p=2,v=ut,ut|=4,kb(n,C),W_(C,n),gb(hm,n.containerInfo),$c=!!cm,hm=cm=null,n.current=C,G_(n,C.alternate,C),Ho(),ut=v,oe.p=m,b.T=o):n.current=C,Bc?(Bc=!1,$r=n,kl=u):gv(n,P),P=n.pendingLanes,P===0&&(Js=null),Qo(C.stateNode),Ii(n),r!==null)for(f=n.onRecoverableError,C=0;C<r.length;C++)P=r[C],f(P.value,{componentStack:P.stack});return kl&3&&so(),P=n.pendingLanes,u&4194218&&P&42?n===Wd?Ll++:(Ll=0,Wd=n):Ll=0,Pl(0),null}function gv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,vl(r)))}function so(){if($r!==null){var n=$r,r=Kd;Kd=0;var o=Hu(kl),u=b.T,f=oe.p;try{if(oe.p=32>o?32:o,b.T=null,$r===null)var m=!1;else{o=Yd,Yd=null;var v=$r,T=kl;if($r=null,kl=0,ut&6)throw Error(s(331));var C=ut;if(ut|=4,ev(v.current),Z_(v,v.current,T,o),ut=C,Pl(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Ss,v)}catch{}m=!0}return m}finally{oe.p=f,b.T=u,gv(n,r)}}return!1}function yv(n,r,o){r=qn(o,r),r=yd(n.stateNode,r,2),n=Qs(n,r,2),n!==null&&(gt(n,2),Ii(n))}function et(n,r,o){if(n.tag===3)yv(n,n,o);else for(;r!==null;){if(r.tag===3){yv(r,n,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Js===null||!Js.has(u))){n=qn(o,n),o=E_(2),u=Qs(r,o,2),u!==null&&(A_(o,u,r,n),gt(u,2),Ii(u));break}}r=r.return}}function em(n,r,o){var u=n.pingCache;if(u===null){u=n.pingCache=new zb;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(Fd=!0,f.add(o),n=Kb.bind(null,n,r,o),r.then(n,n))}function Kb(n,r,o){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,tt===n&&(Ue&o)===o&&(mt===4||mt===3&&(Ue&62914560)===Ue&&300>yn()-Qd?!(ut&2)&&no(n,0):Hd|=o,to===Ue&&(to=0)),Ii(n)}function _v(n,r){r===0&&(r=Cs()),n=Us(n,r),n!==null&&(gt(n,r),Ii(n))}function Yb(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),_v(n,o)}function Wb(n,r){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),_v(n,o)}function Xb(n,r){return Sr(n,r)}var qc=null,ro=null,tm=!1,Fc=!1,nm=!1,ea=0;function Ii(n){n!==ro&&n.next===null&&(ro===null?qc=ro=n:ro=ro.next=n),Fc=!0,tm||(tm=!0,Jb(Zb))}function Pl(n,r){if(!nm&&Fc){nm=!0;do for(var o=!1,u=qc;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-fn(42|n)+1)-1,m&=f&~(v&~T),m=m&201326677?m&201326677|1:m?m|2:0}m!==0&&(o=!0,Av(u,m))}else m=Ue,m=kn(u,u===tt?m:0),!(m&3)||bs(u,m)||(o=!0,Av(u,m));u=u.next}while(o);nm=!1}}function Zb(){Fc=tm=!1;var n=0;ea!==0&&(aC()&&(n=ea),ea=0);for(var r=yn(),o=null,u=qc;u!==null;){var f=u.next,m=vv(u,r);m===0?(u.next=null,o===null?qc=f:o.next=f,f===null&&(ro=o)):(o=u,(n!==0||m&3)&&(Fc=!0)),u=f}Pl(n)}function vv(n,r){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-fn(m),T=1<<v,C=f[v];C===-1?(!(T&o)||T&u)&&(f[v]=Sa(T,r)):C<=r&&(n.expiredLanes|=T),m&=~T}if(r=tt,o=Ue,o=kn(n,n===r?o:0),u=n.callbackNode,o===0||n===r&&nt===2||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ta(u),n.callbackNode=null,n.callbackPriority=0;if(!(o&3)||bs(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(u!==null&&Ta(u),Hu(o)){case 2:case 8:o=Lt;break;case 32:o=Bi;break;case 268435456:o=Go;break;default:o=Bi}return u=Ev.bind(null,n),o=Sr(o,u),n.callbackPriority=r,n.callbackNode=o,r}return u!==null&&u!==null&&Ta(u),n.callbackPriority=2,n.callbackNode=null,2}function Ev(n,r){var o=n.callbackNode;if(so()&&n.callbackNode!==o)return null;var u=Ue;return u=kn(n,n===tt?u:0),u===0?null:(ov(n,u,r),vv(n,yn()),n.callbackNode!=null&&n.callbackNode===o?Ev.bind(null,n):null)}function Av(n,r){if(so())return null;ov(n,r,!0)}function Jb(n){lC(function(){ut&6?Sr(Rt,n):n()})}function im(){return ea===0&&(ea=Yo()),ea}function Tv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yi(""+n)}function Sv(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function $b(n,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var m=Tv((f[It]||null).action),v=u.submitter;v&&(r=(r=v[It]||null)?Tv(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var T=new Na("action","action",null,u,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ea!==0){var C=v?Sv(f,v):new FormData(f);fd(o,{pending:!0,data:C,method:f.method,action:m},null,C)}}else typeof m=="function"&&(T.preventDefault(),C=v?Sv(f,v):new FormData(f),fd(o,{pending:!0,data:C,method:f.method,action:m},m,C))},currentTarget:f}]})}}for(var sm=0;sm<py.length;sm++){var rm=py[sm],eC=rm.toLowerCase(),tC=rm[0].toUpperCase()+rm.slice(1);si(eC,"on"+tC)}si(cy,"onAnimationEnd"),si(hy,"onAnimationIteration"),si(fy,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(_b,"onTransitionRun"),si(vb,"onTransitionStart"),si(Eb,"onTransitionCancel"),si(dy,"onTransitionEnd"),_n("onMouseEnter",["mouseout","mouseover"]),_n("onMouseLeave",["mouseout","mouseover"]),_n("onPointerEnter",["pointerout","pointerover"]),_n("onPointerLeave",["pointerout","pointerover"]),wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function wv(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var v=u.length-1;0<=v;v--){var T=u[v],C=T.instance,P=T.currentTarget;if(T=T.listener,C!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=P;try{m(f)}catch(Y){Dc(Y)}f.currentTarget=null,m=C}else for(v=0;v<u.length;v++){if(T=u[v],C=T.instance,P=T.currentTarget,T=T.listener,C!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=P;try{m(f)}catch(Y){Dc(Y)}f.currentTarget=null,m=C}}}}function Me(n,r){var o=r[br];o===void 0&&(o=r[br]=new Set);var u=n+"__bubble";o.has(u)||(bv(r,n,2,!1),o.add(u))}function am(n,r,o){var u=0;r&&(u|=4),bv(o,n,u,r)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function om(n){if(!n[Hc]){n[Hc]=!0,Xo.forEach(function(o){o!=="selectionchange"&&(nC.has(o)||am(o,!1,n),am(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Hc]||(r[Hc]=!0,am("selectionchange",!1,r))}}function bv(n,r,o,u){switch(Yv(r)){case 2:var f=IC;break;case 8:f=DC;break;default:f=Em}o=f.bind(null,r,o,n),f=void 0,!Bn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function lm(n,r,o,u,f){var m=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(v===4)for(v=u.return;v!==null;){var C=v.tag;if((C===3||C===4)&&(C=v.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;v=v.return}for(;T!==null;){if(v=ii(T),v===null)return;if(C=v.tag,C===5||C===6||C===26||C===27){u=m=v;continue e}T=T.parentNode}}u=u.return}Wu(function(){var P=m,Y=Da(o),J=[];e:{var F=my.get(n);if(F!==void 0){var Q=Na,ce=n;switch(n){case"keypress":if(vi(o)===0)break e;case"keydown":case"keyup":Q=La;break;case"focusin":ce="focus",Q=Oa;break;case"focusout":ce="blur",Q=Oa;break;case"beforeblur":case"afterblur":Q=Oa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=ic;break;case cy:case hy:case fy:Q=Va;break;case dy:Q=rc;break;case"scroll":case"scrollend":Q=Xu;break;case"wheel":Q=Pa;break;case"copy":case"cut":case"paste":Q=ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ll;break;case"toggle":case"beforetoggle":Q=oc}var Te=(r&4)!==0,pt=!Te&&(n==="scroll"||n==="scrollend"),U=Te?F!==null?F+"Capture":null:F;Te=[];for(var V=P,q;V!==null;){var X=V;if(q=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||q===null||U===null||(X=Nr(V,U),X!=null&&Te.push(Bl(V,X,q))),pt)break;V=V.return}0<Te.length&&(F=new Q(F,ce,null,o,Y),J.push({event:F,listeners:Te}))}}if(!(r&7)){e:{if(F=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",F&&o!==Un&&(ce=o.relatedTarget||o.fromElement)&&(ii(ce)||ce[ji]))break e;if((Q||F)&&(F=Y.window===Y?Y:(F=Y.ownerDocument)?F.defaultView||F.parentWindow:window,Q?(ce=o.relatedTarget||o.toElement,Q=P,ce=ce?ii(ce):null,ce!==null&&(pt=pe(ce),Te=ce.tag,ce!==pt||Te!==5&&Te!==27&&Te!==6)&&(ce=null)):(Q=null,ce=P),Q!==ce)){if(Te=jn,X="onMouseLeave",U="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Te=ll,X="onPointerLeave",U="onPointerEnter",V="pointer"),pt=Q==null?F:xs(Q),q=ce==null?F:xs(ce),F=new Te(X,V+"leave",Q,o,Y),F.target=pt,F.relatedTarget=q,X=null,ii(Y)===P&&(Te=new Te(U,V+"enter",ce,o,Y),Te.target=q,Te.relatedTarget=pt,X=Te),pt=X,Q&&ce)t:{for(Te=Q,U=ce,V=0,q=Te;q;q=ao(q))V++;for(q=0,X=U;X;X=ao(X))q++;for(;0<V-q;)Te=ao(Te),V--;for(;0<q-V;)U=ao(U),q--;for(;V--;){if(Te===U||U!==null&&Te===U.alternate)break t;Te=ao(Te),U=ao(U)}Te=null}else Te=null;Q!==null&&Cv(J,F,Q,Te,!1),ce!==null&&pt!==null&&Cv(J,pt,ce,Te,!0)}}e:{if(F=P?xs(P):window,Q=F.nodeName&&F.nodeName.toLowerCase(),Q==="select"||Q==="input"&&F.type==="file")var ue=$g;else if(Nt(F))if(ey)ue=mb;else{ue=fb;var De=hb}else Q=F.nodeName,!Q||Q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?P&&tl(P.elementType)&&(ue=$g):ue=db;if(ue&&(ue=ue(n,P))){Yi(J,ue,o,Y);break e}De&&De(n,F,P),n==="focusout"&&P&&F.type==="number"&&P.memoizedProps.value!=null&&Ia(F,"number",F.value)}switch(De=P?xs(P):window,n){case"focusin":(Nt(De)||De.contentEditable==="true")&&(Ua=De,Bf=P,hl=null);break;case"focusout":hl=Bf=Ua=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,ly(J,o,Y);break;case"selectionchange":if(yb)break;case"keydown":case"keyup":ly(J,o,Y)}var de;if(Ti)e:{switch(n){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Le?H(n,o)&&(ye="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(ye="onCompositionStart");ye&&(_&&o.locale!=="ko"&&(Le||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Le&&(de=il()):(_i=Y,Ps="value"in _i?_i.value:_i.textContent,Le=!0)),De=Gc(P,ye),0<De.length&&(ye=new al(ye,n,null,o,Y),J.push({event:ye,listeners:De}),de?ye.data=de:(de=ie(o),de!==null&&(ye.data=de)))),(de=y?Dt(n,o):Pe(n,o))&&(ye=Gc(P,"onBeforeInput"),0<ye.length&&(De=new al("onBeforeInput","beforeinput",null,o,Y),J.push({event:De,listeners:ye}),De.data=de)),$b(J,n,P,o,Y)}wv(J,r)})}function Bl(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Gc(n,r){for(var o=r+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Nr(n,o),f!=null&&u.unshift(Bl(n,f,m)),f=Nr(n,r),f!=null&&u.push(Bl(n,f,m))),n=n.return}return u}function ao(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Cv(n,r,o,u,f){for(var m=r._reactName,v=[];o!==null&&o!==u;){var T=o,C=T.alternate,P=T.stateNode;if(T=T.tag,C!==null&&C===u)break;T!==5&&T!==26&&T!==27||P===null||(C=P,f?(P=Nr(o,m),P!=null&&v.unshift(Bl(o,P,C))):f||(P=Nr(o,m),P!=null&&v.push(Bl(o,P,C)))),o=o.return}v.length!==0&&n.push({event:r,listeners:v})}var iC=/\r\n?/g,sC=/\u0000|\uFFFD/g;function Rv(n){return(typeof n=="string"?n:""+n).replace(iC,`
`).replace(sC,"")}function Iv(n,r){return r=Rv(r),Rv(n)===r}function Qc(){}function Je(n,r,o,u,f,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Pn(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Pn(n,""+u);break;case"className":Vs(n,"class",u);break;case"tabIndex":Vs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vs(n,o,u);break;case"style":Yu(n,u,m);break;case"data":if(r!=="object"){Vs(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=yi(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Je(n,r,"name",f.name,f,null),Je(n,r,"formEncType",f.formEncType,f,null),Je(n,r,"formMethod",f.formMethod,f,null),Je(n,r,"formTarget",f.formTarget,f,null)):(Je(n,r,"encType",f.encType,f,null),Je(n,r,"method",f.method,f,null),Je(n,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=yi(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Qc);break;case"onScroll":u!=null&&Me("scroll",n);break;case"onScrollEnd":u!=null&&Me("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=yi(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Me("beforetoggle",n),Me("toggle",n),Os(n,"popover",u);break;case"xlinkActuate":Ln(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ln(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ln(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ln(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ln(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ln(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Os(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Mf.get(o)||o,Os(n,o,u))}}function um(n,r,o,u,f,m){switch(o){case"style":Yu(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Pn(n,u):(typeof u=="number"||typeof u=="bigint")&&Pn(n,""+u);break;case"onScroll":u!=null&&Me("scroll",n);break;case"onScrollEnd":u!=null&&Me("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ca.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[It]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Os(n,o,u)}}}function Xt(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",n),Me("load",n);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(n,r,m,v,o,null)}}f&&Je(n,r,"srcSet",o.srcSet,o,null),u&&Je(n,r,"src",o.src,o,null);return;case"input":Me("invalid",n);var T=m=v=f=null,C=null,P=null;for(u in o)if(o.hasOwnProperty(u)){var Y=o[u];if(Y!=null)switch(u){case"name":f=Y;break;case"type":v=Y;break;case"checked":C=Y;break;case"defaultChecked":P=Y;break;case"value":m=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:Je(n,r,u,Y,o,null)}}Ir(n,m,T,C,P,v,f,!1),Rr(n);return;case"select":Me("invalid",n),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":u=T;default:Je(n,r,f,T,o,null)}r=m,o=v,n.multiple=!!u,r!=null?Fe(n,!!u,r,!1):o!=null&&Fe(n,!!u,o,!0);return;case"textarea":Me("invalid",n),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":u=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Je(n,r,v,T,o,null)}Ls(n,u,f,m),Rr(n);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Je(n,r,C,u,o,null)}return;case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":Me("load",n);break;case"video":case"audio":for(u=0;u<Ul.length;u++)Me(Ul[u],n);break;case"image":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"embed":case"source":case"link":Me("error",n),Me("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in o)if(o.hasOwnProperty(P)&&(u=o[P],u!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Je(n,r,P,u,o,null)}return;default:if(tl(r)){for(Y in o)o.hasOwnProperty(Y)&&(u=o[Y],u!==void 0&&um(n,r,Y,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&Je(n,r,T,u,o,null))}function rC(n,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,T=null,C=null,P=null,Y=null;for(Q in o){var J=o[Q];if(o.hasOwnProperty(Q)&&J!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":C=J;default:u.hasOwnProperty(Q)||Je(n,r,Q,null,u,J)}}for(var F in u){var Q=u[F];if(J=o[F],u.hasOwnProperty(F)&&(Q!=null||J!=null))switch(F){case"type":m=Q;break;case"name":f=Q;break;case"checked":P=Q;break;case"defaultChecked":Y=Q;break;case"value":v=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==J&&Je(n,r,F,Q,u,J)}}ks(n,v,T,C,P,Y,m,f);return;case"select":Q=v=T=F=null;for(m in o)if(C=o[m],o.hasOwnProperty(m)&&C!=null)switch(m){case"value":break;case"multiple":Q=C;default:u.hasOwnProperty(m)||Je(n,r,m,null,u,C)}for(f in u)if(m=u[f],C=o[f],u.hasOwnProperty(f)&&(m!=null||C!=null))switch(f){case"value":F=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==C&&Je(n,r,f,m,u,C)}r=T,o=v,u=Q,F!=null?Fe(n,!!o,F,!1):!!u!=!!o&&(r!=null?Fe(n,!!o,r,!0):Fe(n,!!o,o?[]:"",!1));return;case"textarea":Q=F=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Je(n,r,T,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":F=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Je(n,r,v,f,u,m)}Dr(n,F,Q);return;case"option":for(var ce in o)if(F=o[ce],o.hasOwnProperty(ce)&&F!=null&&!u.hasOwnProperty(ce))switch(ce){case"selected":n.selected=!1;break;default:Je(n,r,ce,null,u,F)}for(C in u)if(F=u[C],Q=o[C],u.hasOwnProperty(C)&&F!==Q&&(F!=null||Q!=null))switch(C){case"selected":n.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Je(n,r,C,F,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)F=o[Te],o.hasOwnProperty(Te)&&F!=null&&!u.hasOwnProperty(Te)&&Je(n,r,Te,null,u,F);for(P in u)if(F=u[P],Q=o[P],u.hasOwnProperty(P)&&F!==Q&&(F!=null||Q!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,r));break;default:Je(n,r,P,F,u,Q)}return;default:if(tl(r)){for(var pt in o)F=o[pt],o.hasOwnProperty(pt)&&F!==void 0&&!u.hasOwnProperty(pt)&&um(n,r,pt,void 0,u,F);for(Y in u)F=u[Y],Q=o[Y],!u.hasOwnProperty(Y)||F===Q||F===void 0&&Q===void 0||um(n,r,Y,F,u,Q);return}}for(var U in o)F=o[U],o.hasOwnProperty(U)&&F!=null&&!u.hasOwnProperty(U)&&Je(n,r,U,null,u,F);for(J in u)F=u[J],Q=o[J],!u.hasOwnProperty(J)||F===Q||F==null&&Q==null||Je(n,r,J,F,u,Q)}var cm=null,hm=null;function Kc(n){return n.nodeType===9?n:n.ownerDocument}function Dv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function fm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var dm=null;function aC(){var n=window.event;return n&&n.type==="popstate"?n===dm?!1:(dm=n,!0):(dm=null,!1)}var xv=typeof setTimeout=="function"?setTimeout:void 0,oC=typeof clearTimeout=="function"?clearTimeout:void 0,Mv=typeof Promise=="function"?Promise:void 0,lC=typeof queueMicrotask=="function"?queueMicrotask:typeof Mv<"u"?function(n){return Mv.resolve(null).then(n).catch(uC)}:xv;function uC(n){setTimeout(function(){throw n})}function mm(n,r){var o=r,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(u===0){n.removeChild(f),Kl(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=f}while(o);Kl(r)}function pm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":pm(o),Cr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function cC(n,r,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ns])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=oi(n.nextSibling),n===null)break}return null}function hC(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=oi(n.nextSibling),n===null))return null;return n}function oi(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}function Ov(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return n;r--}else o==="/$"&&r++}n=n.previousSibling}return null}function Vv(n,r,o){switch(r=Kc(o),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}var Xn=new Map,kv=new Set;function Yc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var us=oe.d;oe.d={f:fC,r:dC,D:mC,C:pC,L:gC,m:yC,X:vC,S:_C,M:EC};function fC(){var n=us.f(),r=jc();return n||r}function dC(n){var r=zi(n);r!==null&&r.tag===5&&r.type==="form"?l_(r):us.r(n)}var oo=typeof document>"u"?null:document;function Lv(n,r,o){var u=oo;if(u&&typeof r=="string"&&r){var f=ft(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),kv.has(f)||(kv.add(f),n={rel:n,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),Xt(r,"link",n),ot(r),u.head.appendChild(r)))}}function mC(n){us.D(n),Lv("dns-prefetch",n,null)}function pC(n,r){us.C(n,r),Lv("preconnect",n,r)}function gC(n,r,o){us.L(n,r,o);var u=oo;if(u&&n&&r){var f='link[rel="preload"][as="'+ft(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+ft(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+ft(o.imageSizes)+'"]')):f+='[href="'+ft(n)+'"]';var m=f;switch(r){case"style":m=lo(n);break;case"script":m=uo(n)}Xn.has(m)||(n=x({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Xn.set(m,n),u.querySelector(f)!==null||r==="style"&&u.querySelector(jl(m))||r==="script"&&u.querySelector(zl(m))||(r=u.createElement("link"),Xt(r,"link",n),ot(r),u.head.appendChild(r)))}}function yC(n,r){us.m(n,r);var o=oo;if(o&&n){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+ft(u)+'"][href="'+ft(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=uo(n)}if(!Xn.has(m)&&(n=x({rel:"modulepreload",href:n},r),Xn.set(m,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zl(m)))return}u=o.createElement("link"),Xt(u,"link",n),ot(u),o.head.appendChild(u)}}}function _C(n,r,o){us.S(n,r,o);var u=oo;if(u&&n){var f=Ms(u).hoistableStyles,m=lo(n);r=r||"default";var v=f.get(m);if(!v){var T={loading:0,preload:null};if(v=u.querySelector(jl(m)))T.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Xn.get(m))&&gm(n,o);var C=v=u.createElement("link");ot(C),Xt(C,"link",n),C._p=new Promise(function(P,Y){C.onload=P,C.onerror=Y}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Wc(v,r,u)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(m,v)}}}function vC(n,r){us.X(n,r);var o=oo;if(o&&n){var u=Ms(o).hoistableScripts,f=uo(n),m=u.get(f);m||(m=o.querySelector(zl(f)),m||(n=x({src:n,async:!0},r),(r=Xn.get(f))&&ym(n,r),m=o.createElement("script"),ot(m),Xt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function EC(n,r){us.M(n,r);var o=oo;if(o&&n){var u=Ms(o).hoistableScripts,f=uo(n),m=u.get(f);m||(m=o.querySelector(zl(f)),m||(n=x({src:n,async:!0,type:"module"},r),(r=Xn.get(f))&&ym(n,r),m=o.createElement("script"),ot(m),Xt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Pv(n,r,o,u){var f=(f=Vn.current)?Yc(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=lo(o.href),o=Ms(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=lo(o.href);var m=Ms(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(jl(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Xn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Xn.set(n,o),m||AC(f,n,o,v.state))),r&&u===null)throw Error(s(528,""));return v}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=uo(o),o=Ms(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function lo(n){return'href="'+ft(n)+'"'}function jl(n){return'link[rel="stylesheet"]['+n+"]"}function Uv(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function AC(n,r,o,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Xt(r,"link",o),ot(r),n.head.appendChild(r))}function uo(n){return'[src="'+ft(n)+'"]'}function zl(n){return"script[async]"+n}function Bv(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+ft(o.href)+'"]');if(u)return r.instance=u,ot(u),u;var f=x({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ot(u),Xt(u,"style",f),Wc(u,o.precedence,n),r.instance=u;case"stylesheet":f=lo(o.href);var m=n.querySelector(jl(f));if(m)return r.state.loading|=4,r.instance=m,ot(m),m;u=Uv(o),(f=Xn.get(f))&&gm(u,f),m=(n.ownerDocument||n).createElement("link"),ot(m);var v=m;return v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),Xt(m,"link",u),r.state.loading|=4,Wc(m,o.precedence,n),r.instance=m;case"script":return m=uo(o.src),(f=n.querySelector(zl(m)))?(r.instance=f,ot(f),f):(u=o,(f=Xn.get(m))&&(u=x({},o),ym(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),ot(f),Xt(f,"link",u),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&!(r.state.loading&4)&&(u=r.instance,r.state.loading|=4,Wc(u,o.precedence,n));return r.instance}function Wc(n,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var T=u[v];if(T.dataset.precedence===r)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function gm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function ym(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Xc=null;function jv(n,r,o){if(Xc===null){var u=new Map,f=Xc=new Map;f.set(o,u)}else f=Xc,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Ns]||m[Pt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=n+v;var T=u.get(v);T?T.push(m):u.set(v,[m])}}return u}function zv(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function TC(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function qv(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var ql=null;function SC(){}function wC(n,r,o){if(ql===null)throw Error(s(475));var u=ql;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var f=lo(o.href),m=n.querySelector(jl(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Zc.bind(u),n.then(u,u)),r.state.loading|=4,r.instance=m,ot(m);return}m=n.ownerDocument||n,o=Uv(o),(f=Xn.get(f))&&gm(o,f),m=m.createElement("link"),ot(m);var v=m;v._p=new Promise(function(T,C){v.onload=T,v.onerror=C}),Xt(m,"link",o),r.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,n),(n=r.state.preload)&&!(r.state.loading&3)&&(u.count++,r=Zc.bind(u),n.addEventListener("load",r),n.addEventListener("error",r))}}function bC(){if(ql===null)throw Error(s(475));var n=ql;return n.stylesheets&&n.count===0&&_m(n,n.stylesheets),0<n.count?function(r){var o=setTimeout(function(){if(n.stylesheets&&_m(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Zc(){if(this.count--,this.count===0){if(this.stylesheets)_m(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jc=null;function _m(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jc=new Map,r.forEach(CC,n),Jc=null,Zc.call(n))}function CC(n,r){if(!(r.state.loading&4)){var o=Jc.get(n);if(o)var u=o.get(null);else{o=new Map,Jc.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=r.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=Zc.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Fl={$$typeof:D,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function RC(n,r,o,u,f,m,v,T){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.hiddenUpdates=wa(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Fv(n,r,o,u,f,m,v,T,C,P,Y,J){return n=new RC(n,r,o,v,T,C,P,J),r=1,m===!0&&(r|=24),m=Yn(3,null,null,r),n.current=m,m.stateNode=n,r=Xf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},Nd(m),n}function Hv(n){return n?(n=za,n):za}function Gv(n,r,o,u,f,m){f=Hv(f),u.context===null?u.context=f:u.pendingContext=f,u=Gs(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Qs(n,u,r),o!==null&&(gn(o,n,r),Cl(o,n,r))}function Qv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function vm(n,r){Qv(n,r),(n=n.alternate)&&Qv(n,r)}function Kv(n){if(n.tag===13){var r=Us(n,67108864);r!==null&&gn(r,n,67108864),vm(n,67108864)}}var $c=!0;function IC(n,r,o,u){var f=b.T;b.T=null;var m=oe.p;try{oe.p=2,Em(n,r,o,u)}finally{oe.p=m,b.T=f}}function DC(n,r,o,u){var f=b.T;b.T=null;var m=oe.p;try{oe.p=8,Em(n,r,o,u)}finally{oe.p=m,b.T=f}}function Em(n,r,o,u){if($c){var f=Am(u);if(f===null)lm(n,r,u,eh,o),Wv(n,u);else if(xC(f,n,r,o,u))u.stopPropagation();else if(Wv(n,u),r&4&&-1<NC.indexOf(n)){for(;f!==null;){var m=zi(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=ni(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var C=1<<31-fn(v);T.entanglements[1]|=C,v&=~C}Ii(m),!(ut&6)&&(Pc=yn()+500,Pl(0))}}break;case 13:T=Us(m,2),T!==null&&gn(T,m,2),jc(),vm(m,2)}if(m=Am(u),m===null&&lm(n,r,u,eh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else lm(n,r,u,null,o)}}function Am(n){return n=Da(n),Tm(n)}var eh=null;function Tm(n){if(eh=null,n=ii(n),n!==null){var r=pe(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=Qe(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return eh=n,null}function Yv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bu()){case Rt:return 2;case Lt:return 8;case Bi:case ju:return 32;case Go:return 268435456;default:return 32}default:return 32}}var Sm=!1,$s=null,er=null,tr=null,Hl=new Map,Gl=new Map,nr=[],NC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wv(n,r){switch(n){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Hl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(r.pointerId)}}function Ql(n,r,o,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=zi(r),r!==null&&Kv(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function xC(n,r,o,u,f){switch(r){case"focusin":return $s=Ql($s,n,r,o,u,f),!0;case"dragenter":return er=Ql(er,n,r,o,u,f),!0;case"mouseover":return tr=Ql(tr,n,r,o,u,f),!0;case"pointerover":var m=f.pointerId;return Hl.set(m,Ql(Hl.get(m)||null,n,r,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Gl.set(m,Ql(Gl.get(m)||null,n,r,o,u,f)),!0}return!1}function Xv(n){var r=ii(n.target);if(r!==null){var o=pe(r);if(o!==null){if(r=o.tag,r===13){if(r=Qe(o),r!==null){n.blockedOn=r,Ds(n.priority,function(){if(o.tag===13){var u=Nn(),f=Us(o,u);f!==null&&gn(f,o,u),vm(o,u)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function th(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Am(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Un=u,o.target.dispatchEvent(u),Un=null}else return r=zi(o),r!==null&&Kv(r),n.blockedOn=o,!1;r.shift()}return!0}function Zv(n,r,o){th(n)&&o.delete(r)}function MC(){Sm=!1,$s!==null&&th($s)&&($s=null),er!==null&&th(er)&&(er=null),tr!==null&&th(tr)&&(tr=null),Hl.forEach(Zv),Gl.forEach(Zv)}function nh(n,r){n.blockedOn===r&&(n.blockedOn=null,Sm||(Sm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,MC)))}var ih=null;function Jv(n){ih!==n&&(ih=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ih===n&&(ih=null);for(var r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],f=n[r+2];if(typeof u!="function"){if(Tm(u||o)===null)continue;break}var m=zi(o);m!==null&&(n.splice(r,3),r-=3,fd(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Kl(n){function r(C){return nh(C,n)}$s!==null&&nh($s,n),er!==null&&nh(er,n),tr!==null&&nh(tr,n),Hl.forEach(r),Gl.forEach(r);for(var o=0;o<nr.length;o++){var u=nr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<nr.length&&(o=nr[0],o.blockedOn===null);)Xv(o),o.blockedOn===null&&nr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[It]||null;if(typeof m=="function")v||Jv(o);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[It]||null)T=v.formAction;else if(Tm(f)!==null)continue}else T=v.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),Jv(o)}}}function wm(n){this._internalRoot=n}sh.prototype.render=wm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=Nn();Gv(o,u,n,r,null,null)},sh.prototype.unmount=wm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;n.tag===0&&so(),Gv(n.current,2,null,n,null,null),jc(),r[ji]=null}};function sh(n){this._internalRoot=n}sh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Gu();n={blockedOn:null,target:n,priority:r};for(var o=0;o<nr.length&&r!==0&&r<nr[o].priority;o++);nr.splice(o,0,n),o===0&&Xv(n)}};var $v=e.version;if($v!=="19.0.0")throw Error(s(527,$v,"19.0.0"));oe.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=ee(r),n=n!==null?he(n):null,n=n===null?null:n.stateNode,n};var OC={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:b,findFiberByHostInstance:ii,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{Ss=rh.inject(OC),tn=rh}catch{}}return Wl.createRoot=function(n,r){if(!a(n))throw Error(s(299));var o=!1,u="",f=g_,m=y_,v=__,T=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=Fv(n,1,!1,null,null,o,u,f,m,v,T,null),n[ji]=r.current,om(n.nodeType===8?n.parentNode:n),new wm(r)},Wl.hydrateRoot=function(n,r,o){if(!a(n))throw Error(s(299));var u=!1,f="",m=g_,v=y_,T=__,C=null,P=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(P=o.formState)),r=Fv(n,1,!0,r,o??null,u,f,m,v,T,C,P),r.context=Hv(null),o=r.current,u=Nn(),f=Gs(u),f.callback=null,Qs(o,f,u),r.current.lanes=u,gt(r,u),Ii(r),n[ji]=r.current,om(n),new sh(r)},Wl.version="19.0.0",Wl}var uE;function FC(){if(uE)return Rm.exports;uE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Rm.exports=qC(),Rm.exports}var HC=FC(),Xl={},cE;function GC(){if(cE)return Xl;cE=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.parse=h,Xl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function h(w,D){const O=new l,G=w.length;if(G<2)return O;const z=(D==null?void 0:D.decode)||E;let W=0;do{const ne=w.indexOf("=",W);if(ne===-1)break;const te=w.indexOf(";",W),_e=te===-1?G:te;if(ne>_e){W=w.lastIndexOf(";",ne-1)+1;continue}const fe=d(w,W,ne),Re=p(w,ne,fe),L=w.slice(fe,Re);if(O[L]===void 0){let R=d(w,ne+1,_e),b=p(w,_e,R);const x=z(w.slice(R,b));O[L]=x}W=_e+1}while(W<G);return O}function d(w,D,O){do{const G=w.charCodeAt(D);if(G!==32&&G!==9)return D}while(++D<O);return O}function p(w,D,O){for(;D>O;){const G=w.charCodeAt(--D);if(G!==32&&G!==9)return D+1}return O}function g(w,D,O){const G=(O==null?void 0:O.encode)||encodeURIComponent;if(!i.test(w))throw new TypeError(`argument name is invalid: ${w}`);const z=G(D);if(!e.test(z))throw new TypeError(`argument val is invalid: ${D}`);let W=w+"="+z;if(!O)return W;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);W+="; Max-Age="+O.maxAge}if(O.domain){if(!t.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);W+="; Domain="+O.domain}if(O.path){if(!s.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);W+="; Path="+O.path}if(O.expires){if(!A(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);W+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&(W+="; HttpOnly"),O.secure&&(W+="; Secure"),O.partitioned&&(W+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":W+="; Priority=Low";break;case"medium":W+="; Priority=Medium";break;case"high":W+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":W+="; SameSite=Strict";break;case"lax":W+="; SameSite=Lax";break;case"none":W+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return W}function E(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function A(w){return a.call(w)==="[object Date]"}return Xl}GC();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hE="popstate";function QC(i={}){function e(a,l){let{pathname:h="/",search:d="",hash:p=""}=ma(a.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Zm("",{pathname:h,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let h=a.document.querySelector("base"),d="";if(h&&h.getAttribute("href")){let p=a.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:mu(l))}function s(a,l){fi(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return YC(e,t,s,i)}function ct(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function fi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KC(){return Math.random().toString(36).substring(2,10)}function fE(i,e){return{usr:i.state,key:i.key,idx:e}}function Zm(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?ma(e):e,state:t,key:e&&e.key||s||KC()}}function mu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function ma(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function YC(i,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,h=a.history,d="POP",p=null,g=E();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function E(){return(h.state||{idx:null}).idx}function A(){d="POP";let z=E(),W=z==null?null:z-g;g=z,p&&p({action:d,location:G.location,delta:W})}function w(z,W){d="PUSH";let ne=Zm(G.location,z,W);t&&t(ne,z),g=E()+1;let te=fE(ne,g),_e=G.createHref(ne);try{h.pushState(te,"",_e)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;a.location.assign(_e)}l&&p&&p({action:d,location:G.location,delta:1})}function D(z,W){d="REPLACE";let ne=Zm(G.location,z,W);t&&t(ne,z),g=E();let te=fE(ne,g),_e=G.createHref(ne);h.replaceState(te,"",_e),l&&p&&p({action:d,location:G.location,delta:0})}function O(z){let W=a.location.origin!=="null"?a.location.origin:a.location.href,ne=typeof z=="string"?z:mu(z);return ne=ne.replace(/ $/,"%20"),ct(W,`No window.location.(origin|href) available to create URL for href: ${ne}`),new URL(ne,W)}let G={get action(){return d},get location(){return i(a,h)},listen(z){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(hE,A),p=z,()=>{a.removeEventListener(hE,A),p=null}},createHref(z){return e(a,z)},createURL:O,encodeLocation(z){let W=O(z);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:w,replace:D,go(z){return h.go(z)}};return G}function mA(i,e,t="/"){return WC(i,e,t,!1)}function WC(i,e,t,s){let a=typeof e=="string"?ma(e):e,l=fr(a.pathname||"/",t);if(l==null)return null;let h=pA(i);XC(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let g=oR(l);d=rR(h[p],g,s)}return d}function pA(i,e=[],t=[],s=""){let a=(l,h,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(ct(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=fs([s,p.relativePath]),E=t.concat(p);l.children&&l.children.length>0&&(ct(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),pA(l.children,e,E,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:iR(g,l.index),routesMeta:E})};return i.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,h);else for(let p of gA(l.path))a(l,h,p)}),e}function gA(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let h=gA(s.join("/")),d=[];return d.push(...h.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...h),d.map(p=>i.startsWith("/")&&p===""?"/":p)}function XC(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:sR(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var ZC=/^:[\w-]+$/,JC=3,$C=2,eR=1,tR=10,nR=-2,dE=i=>i==="*";function iR(i,e){let t=i.split("/"),s=t.length;return t.some(dE)&&(s+=nR),e&&(s+=$C),t.filter(a=>!dE(a)).reduce((a,l)=>a+(ZC.test(l)?JC:l===""?eR:tR),s)}function sR(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function rR(i,e,t=!1){let{routesMeta:s}=i,a={},l="/",h=[];for(let d=0;d<s.length;++d){let p=s[d],g=d===s.length-1,E=l==="/"?e:e.slice(l.length)||"/",A=bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),w=p.route;if(!A&&g&&t&&!s[s.length-1].route.index&&(A=bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!A)return null;Object.assign(a,A.params),h.push({params:a,pathname:fs([l,A.pathname]),pathnameBase:hR(fs([l,A.pathnameBase])),route:w}),A.pathnameBase!=="/"&&(l=fs([l,A.pathnameBase]))}return h}function bh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=aR(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:A},w)=>{if(E==="*"){let O=d[w]||"";h=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const D=d[w];return A&&!D?g[E]=void 0:g[E]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:h,pattern:i}}function aR(i,e=!1,t=!0){fi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(s.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function oR(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function fr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function lR(i,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof i=="string"?ma(i):i;return{pathname:t?t.startsWith("/")?t:uR(t,e):e,search:fR(s),hash:dR(a)}}function uR(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function xm(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cR(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yA(i){let e=cR(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function _A(i,e,t,s=!1){let a;typeof i=="string"?a=ma(i):(a={...i},ct(!a.pathname||!a.pathname.includes("?"),xm("?","pathname","search",a)),ct(!a.pathname||!a.pathname.includes("#"),xm("#","pathname","hash",a)),ct(!a.search||!a.search.includes("#"),xm("#","search","hash",a)));let l=i===""||a.pathname==="",h=l?"/":a.pathname,d;if(h==null)d=t;else{let A=e.length-1;if(!s&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),A-=1;a.pathname=w.join("/")}d=A>=0?e[A]:"/"}let p=lR(a,d),g=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var fs=i=>i.join("/").replace(/\/\/+/g,"/"),hR=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),fR=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,dR=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function mR(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var vA=["POST","PUT","PATCH","DELETE"];new Set(vA);var pR=["GET",...vA];new Set(pR);var Oo=K.createContext(null);Oo.displayName="DataRouter";var Zh=K.createContext(null);Zh.displayName="DataRouterState";var EA=K.createContext({isTransitioning:!1});EA.displayName="ViewTransition";var gR=K.createContext(new Map);gR.displayName="Fetchers";var yR=K.createContext(null);yR.displayName="Await";var Li=K.createContext(null);Li.displayName="Navigation";var bu=K.createContext(null);bu.displayName="Location";var vs=K.createContext({outlet:null,matches:[],isDataRoute:!1});vs.displayName="Route";var Lp=K.createContext(null);Lp.displayName="RouteError";function _R(i,{relative:e}={}){ct(Cu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=K.useContext(Li),{hash:a,pathname:l,search:h}=Ru(i,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:fs([t,l])),s.createHref({pathname:d,search:h,hash:a})}function Cu(){return K.useContext(bu)!=null}function pa(){return ct(Cu(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(bu).location}var AA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TA(i){K.useContext(Li).static||K.useLayoutEffect(i)}function vR(){let{isDataRoute:i}=K.useContext(vs);return i?MR():ER()}function ER(){ct(Cu(),"useNavigate() may be used only in the context of a <Router> component.");let i=K.useContext(Oo),{basename:e,navigator:t}=K.useContext(Li),{matches:s}=K.useContext(vs),{pathname:a}=pa(),l=JSON.stringify(yA(s)),h=K.useRef(!1);return TA(()=>{h.current=!0}),K.useCallback((p,g={})=>{if(fi(h.current,AA),!h.current)return;if(typeof p=="number"){t.go(p);return}let E=_A(p,JSON.parse(l),a,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:fs([e,E.pathname])),(g.replace?t.replace:t.push)(E,g.state,g)},[e,t,l,a,i])}K.createContext(null);function Ru(i,{relative:e}={}){let{matches:t}=K.useContext(vs),{pathname:s}=pa(),a=JSON.stringify(yA(t));return K.useMemo(()=>_A(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function AR(i,e){return SA(i,e)}function SA(i,e,t,s){var ne;ct(Cu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:l}=K.useContext(Li),{matches:h}=K.useContext(vs),d=h[h.length-1],p=d?d.params:{},g=d?d.pathname:"/",E=d?d.pathnameBase:"/",A=d&&d.route;{let te=A&&A.path||"";wA(g,!A||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let w=pa(),D;if(e){let te=typeof e=="string"?ma(e):e;ct(E==="/"||((ne=te.pathname)==null?void 0:ne.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${te.pathname}" was given in the \`location\` prop.`),D=te}else D=w;let O=D.pathname||"/",G=O;if(E!=="/"){let te=E.replace(/^\//,"").split("/");G="/"+O.replace(/^\//,"").split("/").slice(te.length).join("/")}let z=!l&&t&&t.matches&&t.matches.length>0?t.matches:mA(i,{pathname:G});fi(A||z!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),fi(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=CR(z&&z.map(te=>Object.assign({},te,{params:Object.assign({},p,te.params),pathname:fs([E,a.encodeLocation?a.encodeLocation(te.pathname).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?E:fs([E,a.encodeLocation?a.encodeLocation(te.pathnameBase).pathname:te.pathnameBase])})),h,t,s);return e&&W?K.createElement(bu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},W):W}function TR(){let i=xR(),e=mR(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:l},"ErrorBoundary")," or"," ",K.createElement("code",{style:l},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:a},t):null,h)}var SR=K.createElement(TR,null),wR=class extends K.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?K.createElement(vs.Provider,{value:this.props.routeContext},K.createElement(Lp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bR({routeContext:i,match:e,children:t}){let s=K.useContext(Oo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(vs.Provider,{value:i},t)}function CR(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,l=t==null?void 0:t.errors;if(l!=null){let p=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);ct(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:E,errors:A}=t,w=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||w){h=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,g,E)=>{let A,w=!1,D=null,O=null;t&&(A=l&&g.route.id?l[g.route.id]:void 0,D=g.route.errorElement||SR,h&&(d<0&&E===0?(wA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,O=null):d===E&&(w=!0,O=g.route.hydrateFallbackElement||null)));let G=e.concat(a.slice(0,E+1)),z=()=>{let W;return A?W=D:w?W=O:g.route.Component?W=K.createElement(g.route.Component,null):g.route.element?W=g.route.element:W=p,K.createElement(bR,{match:g,routeContext:{outlet:p,matches:G,isDataRoute:t!=null},children:W})};return t&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?K.createElement(wR,{location:t.location,revalidation:t.revalidation,component:D,error:A,children:z(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):z()},null)}function Pp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RR(i){let e=K.useContext(Oo);return ct(e,Pp(i)),e}function IR(i){let e=K.useContext(Zh);return ct(e,Pp(i)),e}function DR(i){let e=K.useContext(vs);return ct(e,Pp(i)),e}function Up(i){let e=DR(i),t=e.matches[e.matches.length-1];return ct(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function NR(){return Up("useRouteId")}function xR(){var s;let i=K.useContext(Lp),e=IR("useRouteError"),t=Up("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function MR(){let{router:i}=RR("useNavigate"),e=Up("useNavigate"),t=K.useRef(!1);return TA(()=>{t.current=!0}),K.useCallback(async(a,l={})=>{fi(t.current,AA),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var mE={};function wA(i,e,t){!e&&!mE[i]&&(mE[i]=!0,fi(!1,t))}K.memo(OR);function OR({routes:i,future:e,state:t}){return SA(i,void 0,t,e)}function ho(i){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VR({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1}){ct(!Cu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:h,navigator:a,static:l,future:{}}),[h,a,l]);typeof t=="string"&&(t=ma(t));let{pathname:p="/",search:g="",hash:E="",state:A=null,key:w="default"}=t,D=K.useMemo(()=>{let O=fr(p,h);return O==null?null:{location:{pathname:O,search:g,hash:E,state:A,key:w},navigationType:s}},[h,p,g,E,A,w,s]);return fi(D!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:K.createElement(Li.Provider,{value:d},K.createElement(bu.Provider,{children:e,value:D}))}function kR({children:i,location:e}){return AR(Jm(i),e)}function Jm(i,e=[]){let t=[];return K.Children.forEach(i,(s,a)=>{if(!K.isValidElement(s))return;let l=[...e,a];if(s.type===K.Fragment){t.push.apply(t,Jm(s.props.children,l));return}ct(s.type===ho,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Jm(s.props.children,l)),t.push(h)}),t}var ph="get",gh="application/x-www-form-urlencoded";function Jh(i){return i!=null&&typeof i.tagName=="string"}function LR(i){return Jh(i)&&i.tagName.toLowerCase()==="button"}function PR(i){return Jh(i)&&i.tagName.toLowerCase()==="form"}function UR(i){return Jh(i)&&i.tagName.toLowerCase()==="input"}function BR(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function jR(i,e){return i.button===0&&(!e||e==="_self")&&!BR(i)}var ah=null;function zR(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var qR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mm(i){return i!=null&&!qR.has(i)?(fi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gh}"`),null):i}function FR(i,e){let t,s,a,l,h;if(PR(i)){let d=i.getAttribute("action");s=d?fr(d,e):null,t=i.getAttribute("method")||ph,a=Mm(i.getAttribute("enctype"))||gh,l=new FormData(i)}else if(LR(i)||UR(i)&&(i.type==="submit"||i.type==="image")){let d=i.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||d.getAttribute("action");if(s=p?fr(p,e):null,t=i.getAttribute("formmethod")||d.getAttribute("method")||ph,a=Mm(i.getAttribute("formenctype"))||Mm(d.getAttribute("enctype"))||gh,l=new FormData(d,i),!zR()){let{name:g,type:E,value:A}=i;if(E==="image"){let w=g?`${g}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else g&&l.append(g,A)}}else{if(Jh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ph,s=null,a=gh,h=i}return l&&a==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:h}}function Bp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function HR(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GR(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function QR(i,e,t){let s=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let h=await HR(l,t);return h.links?h.links():[]}return[]}));return XR(s.flat(1).filter(GR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function pE(i,e,t,s,a,l){let h=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var E;return t[g].pathname!==p.pathname||((E=t[g].route.path)==null?void 0:E.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>h(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var A;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(h(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((A=t[0])==null?void 0:A.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function KR(i,e,{includeHydrateFallback:t}={}){return YR(i.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function YR(i){return[...new Set(i)]}function WR(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function XR(i,e){let t=new Set;return new Set(e),i.reduce((s,a)=>{let l=JSON.stringify(WR(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}function ZR(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function JR(){let i=K.useContext(Oo);return Bp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function $R(){let i=K.useContext(Zh);return Bp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var jp=K.createContext(void 0);jp.displayName="FrameworkContext";function bA(){let i=K.useContext(jp);return Bp(i,"You must render this element inside a <HydratedRouter> element"),i}function e1(i,e){let t=K.useContext(jp),[s,a]=K.useState(!1),[l,h]=K.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:A}=e,w=K.useRef(null);K.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let G=W=>{W.forEach(ne=>{h(ne.isIntersecting)})},z=new IntersectionObserver(G,{threshold:.5});return w.current&&z.observe(w.current),()=>{z.disconnect()}}},[i]),K.useEffect(()=>{if(s){let G=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(G)}}},[s]);let D=()=>{a(!0)},O=()=>{a(!1),h(!1)};return t?i!=="intent"?[l,w,{}]:[l,w,{onFocus:Zl(d,D),onBlur:Zl(p,O),onMouseEnter:Zl(g,D),onMouseLeave:Zl(E,O),onTouchStart:Zl(A,D)}]:[!1,w,{}]}function Zl(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function t1({page:i,...e}){let{router:t}=JR(),s=K.useMemo(()=>mA(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?K.createElement(i1,{page:i,matches:s,...e}):null}function n1(i){let{manifest:e,routeModules:t}=bA(),[s,a]=K.useState([]);return K.useEffect(()=>{let l=!1;return QR(i,e,t).then(h=>{l||a(h)}),()=>{l=!0}},[i,e,t]),s}function i1({page:i,matches:e,...t}){let s=pa(),{manifest:a,routeModules:l}=bA(),{loaderData:h,matches:d}=$R(),p=K.useMemo(()=>pE(i,e,d,a,s,"data"),[i,e,d,a,s]),g=K.useMemo(()=>pE(i,e,d,a,s,"assets"),[i,e,d,a,s]),E=K.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let D=new Set,O=!1;if(e.forEach(z=>{var ne;let W=a.routes[z.route.id];!W||!W.hasLoader||(!p.some(te=>te.route.id===z.route.id)&&z.route.id in h&&((ne=l[z.route.id])!=null&&ne.shouldRevalidate)||W.hasClientLoader?O=!0:D.add(z.route.id))}),D.size===0)return[];let G=ZR(i);return O&&D.size>0&&G.searchParams.set("_routes",e.filter(z=>D.has(z.route.id)).map(z=>z.route.id).join(",")),[G.pathname+G.search]},[h,s,a,p,e,i,l]),A=K.useMemo(()=>KR(g,a),[g,a]),w=n1(g);return K.createElement(K.Fragment,null,E.map(D=>K.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),A.map(D=>K.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),w.map(({key:D,link:O})=>K.createElement("link",{key:D,...O})))}function s1(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CA&&(window.__reactRouterVersion="7.2.0")}catch{}function r1({basename:i,children:e,window:t}){let s=K.useRef();s.current==null&&(s.current=QC({window:t,v5Compat:!0}));let a=s.current,[l,h]=K.useState({action:a.action,location:a.location}),d=K.useCallback(p=>{K.startTransition(()=>h(p))},[h]);return K.useLayoutEffect(()=>a.listen(d),[a,d]),K.createElement(VR,{basename:i,children:e,location:l.location,navigationType:l.action,navigator:a})}var RA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zt=K.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:h,state:d,target:p,to:g,preventScrollReset:E,viewTransition:A,...w},D){let{basename:O}=K.useContext(Li),G=typeof g=="string"&&RA.test(g),z,W=!1;if(typeof g=="string"&&G&&(z=g,CA))try{let b=new URL(window.location.href),x=g.startsWith("//")?new URL(b.protocol+g):new URL(g),k=fr(x.pathname,O);x.origin===b.origin&&k!=null?g=k+x.search+x.hash:W=!0}catch{fi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=_R(g,{relative:a}),[te,_e,fe]=e1(s,w),Re=u1(g,{replace:h,state:d,target:p,preventScrollReset:E,relative:a,viewTransition:A});function L(b){e&&e(b),b.defaultPrevented||Re(b)}let R=K.createElement("a",{...w,...fe,href:z||ne,onClick:W||l?e:L,ref:s1(D,_e),target:p,"data-discover":!G&&t==="render"?"true":void 0});return te&&!G?K.createElement(K.Fragment,null,R,K.createElement(t1,{page:ne})):R});Zt.displayName="Link";var a1=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:h,viewTransition:d,children:p,...g},E){let A=Ru(h,{relative:g.relative}),w=pa(),D=K.useContext(Zh),{navigator:O,basename:G}=K.useContext(Li),z=D!=null&&m1(A)&&d===!0,W=O.encodeLocation?O.encodeLocation(A).pathname:A.pathname,ne=w.pathname,te=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(ne=ne.toLowerCase(),te=te?te.toLowerCase():null,W=W.toLowerCase()),te&&G&&(te=fr(te,G)||te);const _e=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let fe=ne===W||!a&&ne.startsWith(W)&&ne.charAt(_e)==="/",Re=te!=null&&(te===W||!a&&te.startsWith(W)&&te.charAt(W.length)==="/"),L={isActive:fe,isPending:Re,isTransitioning:z},R=fe?e:void 0,b;typeof s=="function"?b=s(L):b=[s,fe?"active":null,Re?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let x=typeof l=="function"?l(L):l;return K.createElement(Zt,{...g,"aria-current":R,className:b,ref:E,style:x,to:h,viewTransition:d},typeof p=="function"?p(L):p)});a1.displayName="NavLink";var o1=K.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:h=ph,action:d,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:A,...w},D)=>{let O=f1(),G=d1(d,{relative:g}),z=h.toLowerCase()==="get"?"get":"post",W=typeof d=="string"&&RA.test(d),ne=te=>{if(p&&p(te),te.defaultPrevented)return;te.preventDefault();let _e=te.nativeEvent.submitter,fe=(_e==null?void 0:_e.getAttribute("formmethod"))||h;O(_e||te.currentTarget,{fetcherKey:e,method:fe,navigate:t,replace:a,state:l,relative:g,preventScrollReset:E,viewTransition:A})};return K.createElement("form",{ref:D,method:z,action:G,onSubmit:s?p:ne,...w,"data-discover":!W&&i==="render"?"true":void 0})});o1.displayName="Form";function l1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IA(i){let e=K.useContext(Oo);return ct(e,l1(i)),e}function u1(i,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:h}={}){let d=vR(),p=pa(),g=Ru(i,{relative:l});return K.useCallback(E=>{if(jR(E,e)){E.preventDefault();let A=t!==void 0?t:mu(p)===mu(g);d(i,{replace:A,state:s,preventScrollReset:a,relative:l,viewTransition:h})}},[p,d,g,t,s,e,i,a,l,h])}var c1=0,h1=()=>`__${String(++c1)}__`;function f1(){let{router:i}=IA("useSubmit"),{basename:e}=K.useContext(Li),t=NR();return K.useCallback(async(s,a={})=>{let{action:l,method:h,encType:d,formData:p,body:g}=FR(s,e);if(a.navigate===!1){let E=a.fetcherKey||h1();await i.fetch(E,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||h,formEncType:a.encType||d,flushSync:a.flushSync})}else await i.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||h,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function d1(i,{relative:e}={}){let{basename:t}=K.useContext(Li),s=K.useContext(vs);ct(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Ru(i||".",{relative:e})},h=pa();if(i==null){l.search=h.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(E=>E==="")){d.delete("index"),p.filter(A=>A).forEach(A=>d.append("index",A));let E=d.toString();l.search=E?`?${E}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:fs([t,l.pathname])),mu(l)}function m1(i,e={}){let t=K.useContext(EA);ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=IA("useViewTransitionState"),a=Ru(i,{relative:e.relative});if(!t.isTransitioning)return!1;let l=fr(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=fr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return bh(a.pathname,h)!=null||bh(a.pathname,l)!=null}new TextEncoder;const DA="/TiendaLaPalacio/assets/header-fondo-BbDMmBQj.png",yh="/TiendaLaPalacio/assets/fondo-Bu8zJxrt.png",NA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAAiCAYAAAD7wEFuAAAABGdBTUEAALGPC/xhBQAACklpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAAEiJnVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/stRzjPAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAJcEhZcwAACxMAAAsTAQCanBgAAADDSURBVFiF7dgxDoJAEIXht2YKMBaLhESNBYVaWBA7YscRKKyVG3kEr+I5rLiASOVakOAVLJZMJO87wT/dy5i+7zFWZhuhOC5w0Q7x7d2hlXmANF+h0o7x7flBPdGOGJKJA6SbCIV2iG+uQ6vdQET0H0yWoDztcNUO8a1xqCUU2DhAqh0zhHEvlKnAhgKrHUJERFpMvkR13uOmHeLb6N8Moz6OiIh+YUKBXc9w0A4ZgmQJSi6UPySuQ/t44a4d4lvjUH8BgfslH7PbnyoAAAAASUVORK5CYII=",xA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAApCAYAAABDV7v1AAAABGdBTUEAALGPC/xhBQAACklpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAAEiJnVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/stRzjPAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAJcEhZcwAACxMAAAsTAQCanBgAAARESURBVFiF7ZdfaFtlGIefnGZ0aU05a207m4ydXRjHVmfDhummWxM3ZUWw6RQ2rxK9U6nNUBC8aYsWvXBsAWEgzDboGChi1IIIuqbCtrJddN2yMtthTqHFtjZptDRZ1nb1Ih52kuV/4obQ5+57c76PX877O+/7fhpKxCsGuo+a6FLWc1Hkt4bZVqrzhVId9F+zLrTUrAstNetCS8260FKzLrTU/L+EmsqxPmQdKakSkPQCEoCgF5B69zHYv5+FN030PWzRZSC21uPq2cXgmRYCR7biAtCaxbiwSi2izYDTZsA5F0W+EcL3xS16Fu8iPwhxe6uxP2/EsaMm8UU9Z8TxZYBu7UEjjuSNdTqkun9Fy4tc/eF33CNhfKUWbSrH+sIWHHsew16pRUz1TIUWcZceq/bsBD2HbjNpM9wvGEDS09TxFH0AY0F8v0zhuRDCuwrhQsXtbaDNZsSZTpzCXBT5/BSe64v4NEqwSkBqErHajDgaazL7dGmF8OVZvD9P4hmP4YPME34ZiEcMdD69GbtURVOmsyPLhM9P47k0g3c8Gj8bQJPq4SoBqX0rruY62h6tiH91mf71jVD8QJsBpzo+EMDdXE9bsu9S4Q/i+z6A+/oivpUU2UopVI1Jh/XQFpyWOtoqNmROVb74g/j8IYa+m+JUKnFqsgpV0IK4rxp7LtbIRLrUZiNnoWqqBKRnarG/JNGZzRoK/iC+cxP05CNOTUFC1Zh0WN/fw7fpvuDBafo/G+d4ttRmo+he/2QNLZnKjKUeu04o3ttFCdULSMcep1sdG5zGE1m+9/YqtIjvNsbrcDGUFbFRPGHhUqWqEsxHkD+8RntggdH9DRxT4rUVSEtR/ppYYviBC3VIfGSu5bA61nERc3SNmZk73NRp2PSESLPym7mWw6N/MBRcLawNF5T6A9U4X9wWn2oUvhqn52/VLHA2QPd8JFFUp5m+Mgrza95C9QKSulVCvPR8PZ3o1VUIv3cFm9qvdTqkd3YU5te8U9+7m0FDJduV9XwE+YOrtMfW7i8/sTXCsRgxtUUMj7C9EL/m9UZfNtIl6ROHinMTiSlP5sdZTl2ZxauOHTXRpUzuuZJzwdcLSJ+3EFDHBmTcnkCiV1NRBuKnFkbUXWwuivz2MOZcx8WcUp+uFPX6ac1l/xrcnggxetB4b7qq3IC4UcPG0TA/lUzoGyZON1YnDiIdFzGn8mU6givId1fQqAcak0jzrSCjM3e4mW1/Vo8eqI5fSdSx5FKUK99M0T0WTBxKXE305eLXjEL1AtLrOzmpjl2exZtcivLhhJ/XCmmxGVN/0sLIpnI2K+v5CPLH13g1n5QnE1sjPLnAb8ktlmUYW2Qob6Gt9bieVR0GcGaM4+ORwuZJNala7M4arJlabNrUX/gTr7r+Dci4fw3RX6xIheQWOyDjVi6KBdFaj+u0JbF+looGLU2f7GbEpMt+tfkHjXyHyHM0288AAAAASUVORK5CYII=",MA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAABGdBTUEAALGPC/xhBQAACklpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAAEiJnVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/stRzjPAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAJcEhZcwAACxMAAAsTAQCanBgAAAQkSURBVFiF7ZlLbBtVFIY/2+M4sRt30qRxSFvVbYSRAirOojSCChyBECwQqaiALlCbJauqbNgRB1Y8BI0QoC4QjVi14eEihBIVhFGo+hJK2kQOtap2DEmDg+MODp4oTB4sphePjZ0X1E4kf6urmX/s88895557bQsF8DkI1LvwFrpfbCbTKNFZwrnXLbkXbCC/tocvm2sJFCOw1RCZIvz6VQ7Mgyqu2XJFL/v46CEP7cUMbKVsdeJd0JmNTGdm4l8z8EErN+urjNQ5FaWreOEVxmlHfmYXRwG0OdTDA9SIe5JZ+OgWjojgI1OEPxsnWMxAl+Lx7Rx22pGdErLPQUDUgzVXJMbfjdFT5BiX5CuFbjFubzJmA0wGqq14ReFqc6jnkoSKGeByhMY4Lsb31xKwgQwmAy1yZtW5GCdkrvT1wDyokSkjbZwS8pMejoDJwAs+OsX429j6Sh/BWVNat3p4Fu4Y8FUREMWb0PI3jPXA+SQhTTcyo7mWQKOEXwJ4YkemeC9MEvI51l8TE4wkCYs+9YiHdgtAz35uO+1GUWwktDlUq9uKdyMGD0YxS6kFFE1HFSYiU4TjGopZuK+BdrPJS3FC6b+yV6m2HcaqAMabuTiRvQxvqkDea9qi5NN4nJmlHIx6HJ7KrkezJqGhSGA0LdGq65x43xmhY3oBxQbyS146c2fIAnx6gy6zJvfNpOdRv4jRLTSvNPNJrub3GZTecWO70ijhP+bP1tQ58SoKV76JGz3A5yBwtCWjGb5N2ALgtuJ9/2EGzYFOzqC47MguqXB6Tc6giNXrbmrSc6hpHdWsSWgor16mzQYwu4h66Rb9e7fylDDhsiNXWKkUD3w/Ts/XN+ne15BJA1fOzJyO0jWc5IcHTGmQq/l4lGPjaa7dJ9OaT6PpqMHLPN3kxi87aACosFJp1iQ0lDd+4kBinp//2U5PL/DbwARn3HZqqiVkYSSWYujtQQ71xTkem2Go/xd63HZqPFV47TYqNR31msqF7qt0DCQ5OZoifG6MM7WVNNQ4aBCawQR9bw1yaDBF6IpKXzxFzGVHrncab1XTUft/5cS7I3Tc0hk6O8GJeIpYkxu/iEXTUT+/wZvvjdLxx0J2nWZxcBvB3jYWe9tY3L8lU5ylYLlYpDzPrIhGCf9uN/7/EpwgraNeTzM0vdRbLcCaDDy3nc4X7/3/zwqnowTFqrRSrMtLsmmppv1uBA/wvI/garcxq56BJlPa5Gt6ZkRzy9e0zOzejH/nnc+td+GNzq48njXXABjb2x+TnCx0Xxj4U0f98DodhXQHtxHcucZ6WnUKrTfKBkpN2UCpKRsoNWUDpaZsoNSUDZSasoFSIwHcI+E3H1R2beZBMd5Tx2PmB5a6V4hNduSlfhxYy/eJc7QFjAOF+f+BjcKpKF0bPoX+Bj1MdYosMYnXAAAAAElFTkSuQmCC",OA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAjCAYAAADBl8lGAAAABGdBTUEAALGPC/xhBQAACklpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAAEiJnVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/stRzjPAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAJcEhZcwAACxMAAAsTAQCanBgAAAMeSURBVFiF3Zg/aBNRHMff0+ZKAw0ncgSxcK9ganCKlNDbvGBLGqczIBm6pC7Z4tMlm3cuTsGEZOyQgu2QxW7NGIUWWhxa2qESCzmhHcTWnHUoCuY52Ghyvcu/vrtc/Wx5d/d+31/e7/3el3cVAAAqsWIZ/qrDzaO9bfC/kROwTFIqISmVbDxcWOEZDg1aE02u+K6NjTd+TE3MSOrT99Wl0PPMZU7UDV1si36e4dBRvLTVWEmSUkk9sV5N+qPxgansEznw+AnBu7VKrFgGAADY/DDpj8az957JkB1DjTGiHarjBSn06ecX1V6pvRH2BsWSlC1A9iZqjM0uPgqde9ENGTYvYKV5NUlKJauRdMGJZRv2BsVKrFhu0Yt3ankBK27oYk0/5BkOlSLpRaeWrWFiZwvRNjE9SX80Xk+sVfWJTnp8AcvUt4FnOLQaSRf0iVVixfKFKmzQZeuGLjYnYJng3Zo+sbA3KFIJYlS2BO/UcgKWqQQwwCyxemKtSi0xPWFvUDQqW9r788/2WK/q/1Dl7jymGccUJTCP9YnSKNuwNyjqz+WuOqMVGJZtSiU5Acu9ium75dsBz3Co37LlGQ6ZtXzHnb1Gx8pRvLRlJNQNXeySKGeMWr5lDYQGPMOhZVHOmq2ILS3/DNj5lf7hGQ4VH7zMTN2ekRpjRDtU4YiHBcOj7L+xAxW/e/Ui9+HNIm0NcI6fll7PKhnaE7cEaTLvhvz4rpHTbxrNmPvaoTpRjIWGro942I4CrGZ4lIVNK0qDW2fFOXR8eqJ9VDff0pwcAAB8N+4EgIHo4897219PTzQfmhL1z2jq2NcOVFpztdCtGTYz8XPovmSJsIvSb2fMC1jRf+Oo84+GGW7nhiyW356kPxrXJ0bwTq1f0z3p8QXsMPEdsdoMG+1PW8rWTjNM08R3FWxQZvgiJr4jTjLDvZj4jthphnuhk4nvahKzlu+kA5hnOLQhLaz0VLZm9x95ASu2Ke+Rrq40HX1N0CVtrzT1yS2LcvayJNaM0bGS9EfjgGc4ZGSGLytz/LRUT6xVVyPpwt/BQV3DW0mjCn8DsHLo+XHQ0OsAAAAASUVORK5CYII=",VA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAABGdBTUEAALGPC/xhBQAACklpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAAEiJnVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/stRzjPAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAJcEhZcwAACxMAAAsTAQCanBgAAARLSURBVFiF7ZdfaFt1FIC/3GZsaU25a207m4zdPRjHVmfDhummWxM3ZUWw6RQ2nxJ9U6nNUBB8aYsWfXBsAWEgzDboGChi1IIIc02FbWV76LplZbbD3EKLbW3SaGmyrO3iQ7zsJkvzfxtCv7d7kvvjyz0n55yroUS8ZqDriIlO5Xo2ivzOEFtLdb5QqoMeNGuipWZNtNSsiZaaNdFSsyZaav5foqb1WB+xR1oqBSS9gAQg6AWknr0M9O1j/m0TvY9augzEljpc3TsZON1M4PAWXABas5gQq9Ai2gw4bQacs1HkGyF8X92ie+Eu8sOQ21OF/UUjju3VyQ/qBSOOrwN0aQ8YcaTeWKtDqv1PWl7g6k9/4B4O4yu1tGk91pc249j9BPYKLWK675RrEXfqsWrPjNN98DYTNsP9wgCSnsb2Z+gFGA3i+3USz4UQ3hUIFyq3p55WmxHnanIKs1Hk85N4ri/g0yjBSgGpUcRqM+JoqM5cp4vLhC/P4D03gWcshg8yb/hlIB420PHsJuxSJY2Zzo4sET4/hefSNN6xaOJsAE26L1cKSG1bcDXV0vp4eeJfl+lX3wglDrQZcKrj/QHcTXW0ptZdOvxBfD8GcF9fwLecJltpRdWYdFgPbsZpqaW1fF3mVOWLP4jPH2Lwh0lOppNTk1VUQQvi3irsuZRGJlZLbTZyFlVTKSA9V4P9FYmObKWh4A/iOztOdz5yagoSVWPSYf1wN9+v9g8emKLvizGOZUttNoqe9U9X05ypzVjqsOuE4mu7KFG9gHT0SbrUsYEpPJGle0+vXIv4fkOiDxdDWRE3isctXKpQdYK5CPLH12gLzDOyr56jSrymHGkxyt/jiww9dFGHxCfmGg6pY+0XMUfjTE/f4aZOw8anRJqUz8w1HBr5k8HgSmFjuKDU76/C+fLWxFaj8M0Y3f+odoEzAbrmIslSHWZ6yyisXvMW1QtI6lEJidbz7VRyra5A+IMr2NT1WqtDem97YfWad+p7djFgqGCbcj0XQf7oKm2x+P3tJxYnHIsRU5eI4TG2FVKveT3RV410SvrkpeLseHLKU/l5hpNXZvCqY0dMdCqbe67k3PD1AtKXzQTUsX4ZtyeQXKvpKAPxcwvD6ik2G0V+dwhzrutiTqlfrRX1+GnJ5f443B4PMXLAeG+7qliHuEHDhpEwv5RM9C0TpxqqkheR9ouY09XlagSXke8uo1EvNCaRpltBRqbvcDPb/VlrdH9V4pVEHUttRbny3SRdo8HkpcTVSG8u9ZpRVC8gvbmDE+rY5Rm8qa0oH477eaOQEZsx9ScsDG9czyblei6C/Ok1Xs8n5anE4oQn5vk9dcSyBKMLDOYt2lKH63nVYQCnRzk2Filsn1STbsTuqMaaacSumvoLf+FV979+GfdvIfqKlVRIHbH9Mm7lRbEgWupwnbIk989SUa+l8bNdDJt02V9tNPF4/EE4lJx/ASmcisYwHkb+AAAAAElFTkSuQmCC",p1=()=>{const[i,e]=K.useState(!1),[t,s]=K.useState(!1),a=()=>{e(!0)},l=()=>{e(!1)},h=()=>{s(!0)},d=()=>{s(!1)};return I.jsx(I.Fragment,{children:I.jsxs("section",{className:"container-headerbackground",children:[I.jsx("div",{className:"bg-img-container",children:I.jsx("img",{height:"724px",className:"header-bg",src:DA,alt:"bg-la-palacio"})}),I.jsxs("div",{className:"moving-container",children:[I.jsx("img",{className:"bg-txt",src:yh,alt:"text-header"}),I.jsx("img",{className:"bg-txt",src:yh,alt:"text-header"}),I.jsx("img",{className:"bg-txt",src:yh,alt:"text-header"})]}),I.jsxs("div",{className:"btns-containers",children:[i===!0&&I.jsxs("div",{className:"menu-navBar",children:[I.jsx("button",{onClick:l,className:"open-bar",children:I.jsx("img",{src:OA,alt:"open-menu-icon",width:"28px",height:"18px"})}),I.jsxs("div",{className:"links-container",children:[I.jsx(Zt,{onClick:l,className:"links-sub-menu-open",to:"/",children:"Home"}),I.jsx(Zt,{onClick:l,className:"links-menu-open",to:"/store",children:"Libros"}),I.jsxs("div",{className:"sub-links-container",children:[I.jsx(Zt,{onClick:l,className:"links-sub-menu-open",to:"/store",children:"Usados"}),I.jsx(Zt,{onClick:l,className:"links-sub-menu-open",to:"/store",children:"Recomendados"}),I.jsx(Zt,{onClick:l,className:"links-sub-menu-open",to:"/store",children:"Novedades"})]}),I.jsx(Zt,{onClick:l,className:"links-menu-open",to:"/writers",children:"Escritorxs"}),I.jsx(Zt,{onClick:l,className:"links-menu-open",to:"/contact",children:"Nosotrxs"}),I.jsx(Zt,{onClick:l,className:"links-menu-open",to:"/store",children:"Tienda"}),I.jsx(Zt,{onClick:l,className:"links-menu-open",to:"/contact",children:"Contacto"})]})]}),I.jsx("div",{className:"left-menu-bar",children:I.jsx("button",{onClick:a,className:"menu-bar",children:I.jsx("img",{src:NA,alt:"menu-icon",width:"27px",height:"15px"})})}),I.jsxs("div",{className:"right-menu-bar",children:[t===!0&&I.jsxs("div",{className:"queer-container",children:[I.jsxs("div",{className:"queer-open-bar",children:[I.jsx("img",{src:VA,alt:"icon-menu-queer-open",width:"25px",height:"25px",onClick:d}),I.jsx("p",{className:"word-close",onClick:d,children:"Queer y orgullosxs"})]}),I.jsx("p",{className:"queer-txt",children:`somos personas queer,
leemos libros queer, y tambin nos
guiamos por lo queer en un sentido
ms amplio: celebramos otras formas
de pensar y desafiamos las normas
patriarcales, tradicionales, machistas
y hegemnicas.`})]}),I.jsx("button",{onClick:h,className:"queer-bar",children:I.jsx("img",{src:xA,alt:"queer-icon",width:"25",height:"22"})}),I.jsx("button",{className:"store-bar",children:I.jsx(Zt,{to:"/store",children:I.jsx("img",{src:MA,alt:"store-icon",width:"25",height:"22"})})}),I.jsx("button",{className:"store-bar",children:I.jsx(Zt,{to:"/admin",children:I.jsx("box-icon",{name:"user",color:"brown",style:{width:"25px",height:"30px"}})})})]})]})]})})},kA="/TiendaLaPalacio/assets/bg-footer-Cd0cAEsR.png",gE=({className:i,url:e,text:t,children:s,newTag:a=!1})=>I.jsxs(I.Fragment,{children:[I.jsx("a",{className:i,target:a&&"_blank",href:e,rel:a&&"noopener noreferrer",children:t}),I.jsx("span",{children:s})]}),g1=()=>I.jsx(I.Fragment,{children:I.jsxs("section",{className:"footer-container",children:[I.jsx("div",{className:"bg-footer",children:I.jsx("img",{width:"1280px",height:"614px",src:kA,alt:"bg-img-footer"})}),I.jsxs("div",{className:"right-text",children:[I.jsxs("div",{children:[I.jsx("p",{children:"Libros:"}),I.jsx("p",{children:"Usados"}),I.jsx("p",{children:"Recomendados"}),I.jsx("p",{children:"Novedaeds"})]}),I.jsxs("div",{children:[I.jsx("p",{children:"Escritorxs"}),I.jsx("p",{children:"Nosotrxs"}),I.jsx("p",{children:"Contacto"}),I.jsx("p",{children:"-"}),I.jsx("p",{children:"Tienda"})]})]}),I.jsxs("div",{className:"credits-texts",children:[I.jsx("p",{className:"cr-text",children:"@lapalaciolibros. Copyright - All rights reserved"}),I.jsxs("div",{className:"small-credits-container",children:[I.jsx(gE,{className:"small-credits",url:"https://k-hroma.github.io/Portfolio/pages/index.html",text:"desarrollo web: k-roma",newTag:"true"}),I.jsx(gE,{className:"small-credits",url:"https://www.behance.net/rociofuks",text:"diseo web: rofuks",newTag:"true"})]})]})]})}),y1=()=>{[kA,DA,yh,NA,xA,MA,OA,VA].forEach(e=>{const t=new Image;t.src=e})},Iu=({children:i})=>(K.useEffect(()=>{y1()},[]),I.jsxs(I.Fragment,{children:[I.jsx("header",{children:I.jsx(p1,{})}),I.jsx("main",{children:i}),I.jsx("footer",{children:I.jsx(g1,{})})]})),LA=({index:i,itemSrc:e,itemAlt:t,title:s,author:a})=>{const l=["#CDB0EA","#383838","#954300","#CDB0EA","#DBD0C1","#CDB0EA","#34C759","#7D94A3"],h=["#954300","#DBD0C1","#CDB0EA","#DBD0C1","#7D94A3","#954300","#DBD0C1","#34C759"],d=l[i%l.length],p=h[i%h.length],[g,E]=K.useState(!1),A=()=>{E(!0)},w=()=>{E(!1)};return I.jsx(I.Fragment,{children:I.jsxs("div",{className:"item-container",children:[I.jsx("div",{style:g?{backgroundColor:d,border:"10px solid #FF76DC"}:{backgroundColor:d,border:`10px solid ${p}`},className:"cover-container",onMouseEnter:A,onMouseLeave:w,children:I.jsx("img",{src:e,alt:t})}),I.jsxs("div",{className:"item-info-container",children:[I.jsxs("div",{className:"item-description-container",children:[I.jsx("p",{children:s.toUpperCase()}),I.jsx("p",{children:a})]}),I.jsx("div",{className:"price-container",children:I.jsx("p",{children:"$16.500"})})]})]})})},yE="/TiendaLaPalacio/assets/default-cover-book-DU7nSfe5.png",_1=i=>{const[e,t]=K.useState(!0);return K.useEffect(()=>{(async()=>{try{const a=i.map(l=>new Promise((h,d)=>{const p=new Image;p.src=l,p.onload=()=>h(l),p.onerror=g=>d(g)}).catch(()=>null));await Promise.all(a)}catch(a){console.error("Algunas imgenes no cargaron:",a)}finally{t(!1)}})()},[i]),e},v1=()=>console.log("loading"),E1=()=>{const[i,e]=K.useState([]),t=()=>{fetch("https://openlibrary.org/search.json?q=queer&limit=8").then(l=>l.json()).then(l=>{e(l.docs)}).catch(l=>{console.log("Error fetching books",l)})};K.useEffect(()=>{t()},[]);const s=i.map(l=>l.cover_i?`https://covers.openlibrary.org/b/id/${l.cover_i}-M.jpg`:yE),a=_1([s]);return I.jsx(Iu,{children:a?I.jsx(v1,{}):I.jsxs("section",{className:"home-container",children:[I.jsxs("div",{className:"txt-used-container",children:[I.jsx("span",{className:"txt-used",children:"Usados"}),I.jsx(Zt,{className:"link-used",to:"/store",children:"Ver ms usados +"})]}),I.jsx("div",{className:"grid-container",children:i&&i.map((l,h)=>{var d;return I.jsx(LA,{index:h,itemSrc:l.cover_i?`https://covers.openlibrary.org/b/id/${l.cover_i}-M.jpg`:yE,itemAlt:l.title,title:l.title,author:((d=l.author_name)==null?void 0:d[0])||"Autor desconocido"},l.key)})})]})})},A1=()=>{};var _E={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re=function(i,e){if(!i)throw Vo(e)},Vo=function(i){return new Error("Firebase Database ("+PA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},T1=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const a=i[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],h=i[t++],d=i[t++],p=((a&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=i[t++],h=i[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|h&63)}}return e.join("")},zp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const l=i[a],h=a+1<i.length,d=h?i[a+1]:0,p=a+2<i.length,g=p?i[a+2]:0,E=l>>2,A=(l&3)<<4|d>>4;let w=(d&15)<<2|g>>6,D=g&63;p||(D=64,h||(w=64)),s.push(t[E],t[A],t[w],t[D])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(UA(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):T1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],d=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const A=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||d==null||g==null||A==null)throw new S1;const w=l<<2|d>>4;if(s.push(w),g!==64){const D=d<<4&240|g>>2;if(s.push(D),A!==64){const O=g<<6&192|A;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class S1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BA=function(i){const e=UA(i);return zp.encodeByteArray(e,!0)},Ch=function(i){return BA(i).replace(/\./g,"")},$m=function(i){try{return zp.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(i){return jA(void 0,i)}function jA(i,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!b1(t)||(i[t]=jA(i[t],e[t]));return i}function b1(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=()=>C1().__FIREBASE_DEFAULTS__,I1=()=>{if(typeof process>"u"||typeof _E>"u")return;const i=_E.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},D1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&$m(i[1]);return e&&JSON.parse(e)},qp=()=>{try{return A1()||R1()||I1()||D1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},N1=i=>{var e,t;return(t=(e=qp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},zA=i=>{const e=N1(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},qA=()=>{var i;return(i=qp())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ch(JSON.stringify(t)),Ch(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(HA())}function x1(){var i;const e=(i=qp())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function O1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V1(){return PA.NODE_ADMIN===!0}function k1(){return!x1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QA(){try{return typeof indexedDB=="object"}catch{return!1}}function KA(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function L1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="FirebaseError";class Er extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=P1,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$h.prototype.create)}}class $h{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],h=l?U1(l,s):"Error",d=`${this.serviceName}: ${h} (${a}).`;return new Er(a,d,s)}}function U1(i,e){return i.replace(B1,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const B1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(i){return JSON.parse(i)}function Jt(i){return JSON.stringify(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=function(i){let e={},t={},s={},a="";try{const l=i.split(".");e=pu($m(l[0])||""),t=pu($m(l[1])||""),a=l[2],s=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:s,signature:a}},j1=function(i){const e=YA(i),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},z1=function(i){const e=YA(i).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function To(i,e){if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}function vE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Rh(i,e,t){const s={};for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=e.call(t,i[a],a,i));return s}function So(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=i[a],h=e[a];if(EE(l)&&EE(h)){if(!So(l,h))return!1}else if(l!==h)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function EE(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if(typeof e=="string")for(let A=0;A<16;A++)s[A]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let A=0;A<16;A++)s[A]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let A=16;A<80;A++){const w=s[A-3]^s[A-8]^s[A-14]^s[A-16];s[A]=(w<<1|w>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],h=this.chain_[2],d=this.chain_[3],p=this.chain_[4],g,E;for(let A=0;A<80;A++){A<40?A<20?(g=d^l&(h^d),E=1518500249):(g=l^h^d,E=1859775393):A<60?(g=l&h|d&(l|h),E=2400959708):(g=l^h^d,E=3395469782);const w=(a<<5|a>>>27)+g+p+E+s[A]&4294967295;p=d,d=h,h=(l<<30|l>>>2)&4294967295,l=a,a=w}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const s=t-this.blockSize;let a=0;const l=this.buf_;let h=this.inbuf_;for(;a<t;){if(h===0)for(;a<=s;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[h]=e.charCodeAt(a),++h,++a,h===this.blockSize){this.compress_(l),h=0;break}}else for(;a<t;)if(l[h]=e[a],++h,++a,h===this.blockSize){this.compress_(l),h=0;break}}this.inbuf_=h,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let s=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[s]=this.chain_[a]>>l&255,++s;return e}}function H1(i,e){return`${i} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);if(a>=55296&&a<=56319){const l=a-55296;s++,re(s<i.length,"Surrogate pair missing trail surrogate.");const h=i.charCodeAt(s)-56320;a=65536+(l<<10)+h}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},ef=function(i){let e=0;for(let t=0;t<i.length;t++){const s=i.charCodeAt(t);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=1e3,K1=2,Y1=4*60*60*1e3,W1=.5;function AE(i,e=Q1,t=K1){const s=e*Math.pow(t,i),a=Math.round(W1*s*(Math.random()-.5)*2);return Math.min(Y1,s+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(i){return i&&i._delegate?i._delegate:i}class Oi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Fp;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J1(e))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ta){return this.instances.has(e)}getOptions(e=ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&h.resolve(a)}return a}onInit(e,t){var s;const a=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(a,l);const h=this.instances.get(a);return h&&e(h,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Z1(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ta){return this.component?this.component.multipleInstances?e:ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z1(i){return i===ta?void 0:i}function J1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new X1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Oe||(Oe={}));const eI={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},tI=Oe.INFO,nI={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},iI=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=nI[e];if(a)console[a](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tf{constructor(e){this.name=e,this._logLevel=tI,this._logHandler=iI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const sI=(i,e)=>e.some(t=>i instanceof t);let TE,SE;function rI(){return TE||(TE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aI(){return SE||(SE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WA=new WeakMap,ep=new WeakMap,XA=new WeakMap,Om=new WeakMap,Hp=new WeakMap;function oI(i){const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",h)},l=()=>{t(rr(i.result)),a()},h=()=>{s(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&WA.set(t,i)}).catch(()=>{}),Hp.set(e,i),e}function lI(i){if(ep.has(i))return;const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",h),i.removeEventListener("abort",h)},l=()=>{t(),a()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",h),i.addEventListener("abort",h)});ep.set(i,e)}let tp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return ep.get(i);if(e==="objectStoreNames")return i.objectStoreNames||XA.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rr(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function uI(i){tp=i(tp)}function cI(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(Vm(this),e,...t);return XA.set(s,e.sort?e.sort():[e]),rr(s)}:aI().includes(i)?function(...e){return i.apply(Vm(this),e),rr(WA.get(this))}:function(...e){return rr(i.apply(Vm(this),e))}}function hI(i){return typeof i=="function"?cI(i):(i instanceof IDBTransaction&&lI(i),sI(i,rI())?new Proxy(i,tp):i)}function rr(i){if(i instanceof IDBRequest)return oI(i);if(Om.has(i))return Om.get(i);const e=hI(i);return e!==i&&(Om.set(i,e),Hp.set(e,i)),e}const Vm=i=>Hp.get(i);function ZA(i,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const h=indexedDB.open(i,e),d=rr(h);return s&&h.addEventListener("upgradeneeded",p=>{s(rr(h.result),p.oldVersion,p.newVersion,rr(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const fI=["get","getKey","getAll","getAllKeys","count"],dI=["put","add","delete","clear"],km=new Map;function wE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(km.get(e))return km.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=dI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||fI.includes(t)))return;const l=async function(h,...d){const p=this.transaction(h,a?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return km.set(e,l),l}uI(i=>({...i,get:(e,t,s)=>wE(e,t)||i.get(e,t,s),has:(e,t)=>!!wE(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function pI(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const np="@firebase/app",bE="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new tf("@firebase/app"),gI="@firebase/app-compat",yI="@firebase/analytics-compat",_I="@firebase/analytics",vI="@firebase/app-check-compat",EI="@firebase/app-check",AI="@firebase/auth",TI="@firebase/auth-compat",SI="@firebase/database",wI="@firebase/data-connect",bI="@firebase/database-compat",CI="@firebase/functions",RI="@firebase/functions-compat",II="@firebase/installations",DI="@firebase/installations-compat",NI="@firebase/messaging",xI="@firebase/messaging-compat",MI="@firebase/performance",OI="@firebase/performance-compat",VI="@firebase/remote-config",kI="@firebase/remote-config-compat",LI="@firebase/storage",PI="@firebase/storage-compat",UI="@firebase/firestore",BI="@firebase/vertexai",jI="@firebase/firestore-compat",zI="firebase",qI="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="[DEFAULT]",FI={[np]:"fire-core",[gI]:"fire-core-compat",[_I]:"fire-analytics",[yI]:"fire-analytics-compat",[EI]:"fire-app-check",[vI]:"fire-app-check-compat",[AI]:"fire-auth",[TI]:"fire-auth-compat",[SI]:"fire-rtdb",[wI]:"fire-data-connect",[bI]:"fire-rtdb-compat",[CI]:"fire-fn",[RI]:"fire-fn-compat",[II]:"fire-iid",[DI]:"fire-iid-compat",[NI]:"fire-fcm",[xI]:"fire-fcm-compat",[MI]:"fire-perf",[OI]:"fire-perf-compat",[VI]:"fire-rc",[kI]:"fire-rc-compat",[LI]:"fire-gcs",[PI]:"fire-gcs-compat",[UI]:"fire-fst",[jI]:"fire-fst-compat",[BI]:"fire-vertex","fire-js":"fire-js",[zI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,HI=new Map,sp=new Map;function CE(i,e){try{i.container.addComponent(e)}catch(t){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function ps(i){const e=i.name;if(sp.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,i);for(const t of Ih.values())CE(t,i);for(const t of HI.values())CE(t,i);return!0}function ko(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function JA(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new $h("app","Firebase",GI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=qI;function eT(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:ip,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw ar.create("bad-app-name",{appName:String(a)});if(t||(t=qA()),!t)throw ar.create("no-options");const l=Ih.get(a);if(l){if(So(t,l.options)&&So(s,l.config))return l;throw ar.create("duplicate-app",{appName:a})}const h=new $1(a);for(const p of sp.values())h.addComponent(p);const d=new QI(t,s,h);return Ih.set(a,d),d}function Gp(i=ip){const e=Ih.get(i);if(!e&&i===ip&&qA())return eT();if(!e)throw ar.create("no-app",{appName:i});return e}function Jn(i,e,t){var s;let a=(s=FI[i])!==null&&s!==void 0?s:i;t&&(a+=`-${t}`);const l=a.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(d.join(" "));return}ps(new Oi(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firebase-heartbeat-database",YI=1,gu="firebase-heartbeat-store";let Lm=null;function tT(){return Lm||(Lm=ZA(KI,YI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(gu)}catch(t){console.warn(t)}}}}).catch(i=>{throw ar.create("idb-open",{originalErrorMessage:i.message})})),Lm}async function WI(i){try{const t=(await tT()).transaction(gu),s=await t.objectStore(gu).get(nT(i));return await t.done,s}catch(e){if(e instanceof Er)ms.warn(e.message);else{const t=ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ms.warn(t.message)}}}async function RE(i,e){try{const s=(await tT()).transaction(gu,"readwrite");await s.objectStore(gu).put(e,nT(i)),await s.done}catch(t){if(t instanceof Er)ms.warn(t.message);else{const s=ar.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ms.warn(s.message)}}}function nT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=1024,ZI=30;class JI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=IE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>ZI){const h=t2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ms.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=IE(),{heartbeatsToSend:s,unsentEntries:a}=$I(this._heartbeatsCache.heartbeats),l=Ch(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ms.warn(t),""}}}function IE(){return new Date().toISOString().substring(0,10)}function $I(i,e=XI){const t=[];let s=i.slice();for(const a of i){const l=t.find(h=>h.agent===a.agent);if(l){if(l.dates.push(a.date),DE(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),DE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class e2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QA()?KA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return RE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return RE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function DE(i){return Ch(JSON.stringify({version:2,heartbeats:i})).length}function t2(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(i){ps(new Oi("platform-logger",e=>new mI(e),"PRIVATE")),ps(new Oi("heartbeat",e=>new JI(e),"PRIVATE")),Jn(np,bE,i),Jn(np,bE,"esm2017"),Jn("fire-js","")}n2("");var i2="firebase",s2="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(i2,s2,"app");const iT="@firebase/installations",Qp="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=1e4,rT=`w:${Qp}`,aT="FIS_v2",r2="https://firebaseinstallations.googleapis.com/v1",a2=60*60*1e3,o2="installations",l2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},aa=new $h(o2,l2,u2);function oT(i){return i instanceof Er&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT({projectId:i}){return`${r2}/projects/${i}/installations`}function uT(i){return{token:i.token,requestStatus:2,expiresIn:h2(i.expiresIn),creationTime:Date.now()}}async function cT(i,e){const s=(await e.json()).error;return aa.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function hT({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function c2(i,{refreshToken:e}){const t=hT(i);return t.append("Authorization",f2(e)),t}async function fT(i){const e=await i();return e.status>=500&&e.status<600?i():e}function h2(i){return Number(i.replace("s","000"))}function f2(i){return`${aT} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2({appConfig:i,heartbeatServiceProvider:e},{fid:t}){const s=lT(i),a=hT(i),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const h={fid:t,authVersion:aT,appId:i.appId,sdkVersion:rT},d={method:"POST",headers:a,body:JSON.stringify(h)},p=await fT(()=>fetch(s,d));if(p.ok){const g=await p.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:uT(g.authToken)}}else throw await cT("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=/^[cdef][\w-]{21}$/,rp="";function g2(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const t=y2(i);return p2.test(t)?t:rp}catch{return rp}}function y2(i){return m2(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new Map;function pT(i,e){const t=nf(i);gT(t,e),_2(t,e)}function gT(i,e){const t=mT.get(i);if(t)for(const s of t)s(e)}function _2(i,e){const t=v2();t&&t.postMessage({key:i,fid:e}),E2()}let ia=null;function v2(){return!ia&&"BroadcastChannel"in self&&(ia=new BroadcastChannel("[Firebase] FID Change"),ia.onmessage=i=>{gT(i.data.key,i.data.fid)}),ia}function E2(){mT.size===0&&ia&&(ia.close(),ia=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="firebase-installations-database",T2=1,oa="firebase-installations-store";let Pm=null;function Kp(){return Pm||(Pm=ZA(A2,T2,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(oa)}}})),Pm}async function Dh(i,e){const t=nf(i),a=(await Kp()).transaction(oa,"readwrite"),l=a.objectStore(oa),h=await l.get(t);return await l.put(e,t),await a.done,(!h||h.fid!==e.fid)&&pT(i,e.fid),e}async function yT(i){const e=nf(i),s=(await Kp()).transaction(oa,"readwrite");await s.objectStore(oa).delete(e),await s.done}async function sf(i,e){const t=nf(i),a=(await Kp()).transaction(oa,"readwrite"),l=a.objectStore(oa),h=await l.get(t),d=e(h);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!h||h.fid!==d.fid)&&pT(i,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(i){let e;const t=await sf(i.appConfig,s=>{const a=S2(s),l=w2(i,a);return e=l.registrationPromise,l.installationEntry});return t.fid===rp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function S2(i){const e=i||{fid:g2(),registrationStatus:0};return _T(e)}function w2(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(aa.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=b2(i,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:C2(i)}:{installationEntry:e}}async function b2(i,e){try{const t=await d2(i,e);return Dh(i.appConfig,t)}catch(t){throw oT(t)&&t.customData.serverCode===409?await yT(i.appConfig):await Dh(i.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function C2(i){let e=await NE(i.appConfig);for(;e.registrationStatus===1;)await dT(100),e=await NE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Yp(i);return s||t}return e}function NE(i){return sf(i,e=>{if(!e)throw aa.create("installation-not-found");return _T(e)})}function _T(i){return R2(i)?{fid:i.fid,registrationStatus:0}:i}function R2(i){return i.registrationStatus===1&&i.registrationTime+sT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2({appConfig:i,heartbeatServiceProvider:e},t){const s=D2(i,t),a=c2(i,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const h={installation:{sdkVersion:rT,appId:i.appId}},d={method:"POST",headers:a,body:JSON.stringify(h)},p=await fT(()=>fetch(s,d));if(p.ok){const g=await p.json();return uT(g)}else throw await cT("Generate Auth Token",p)}function D2(i,{fid:e}){return`${lT(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(i,e=!1){let t;const s=await sf(i.appConfig,l=>{if(!vT(l))throw aa.create("not-registered");const h=l.authToken;if(!e&&M2(h))return l;if(h.requestStatus===1)return t=N2(i,e),l;{if(!navigator.onLine)throw aa.create("app-offline");const d=V2(l);return t=x2(i,d),d}});return t?await t:s.authToken}async function N2(i,e){let t=await xE(i.appConfig);for(;t.authToken.requestStatus===1;)await dT(100),t=await xE(i.appConfig);const s=t.authToken;return s.requestStatus===0?Wp(i,e):s}function xE(i){return sf(i,e=>{if(!vT(e))throw aa.create("not-registered");const t=e.authToken;return k2(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function x2(i,e){try{const t=await I2(i,e),s=Object.assign(Object.assign({},e),{authToken:t});return await Dh(i.appConfig,s),t}catch(t){if(oT(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await yT(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dh(i.appConfig,s)}throw t}}function vT(i){return i!==void 0&&i.registrationStatus===2}function M2(i){return i.requestStatus===2&&!O2(i)}function O2(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+a2}function V2(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function k2(i){return i.requestStatus===1&&i.requestTime+sT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(i){const e=i,{installationEntry:t,registrationPromise:s}=await Yp(e);return s?s.catch(console.error):Wp(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(i,e=!1){const t=i;return await U2(t),(await Wp(t,e)).token}async function U2(i){const{registrationPromise:e}=await Yp(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(i){if(!i||!i.options)throw Um("App Configuration");if(!i.name)throw Um("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!i.options[t])throw Um(t);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Um(i){return aa.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="installations",j2="installations-internal",z2=i=>{const e=i.getProvider("app").getImmediate(),t=B2(e),s=ko(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},q2=i=>{const e=i.getProvider("app").getImmediate(),t=ko(e,ET).getImmediate();return{getId:()=>L2(t),getToken:a=>P2(t,a)}};function F2(){ps(new Oi(ET,z2,"PUBLIC")),ps(new Oi(j2,q2,"PRIVATE"))}F2();Jn(iT,Qp);Jn(iT,Qp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh="analytics",H2="firebase_id",G2="origin",Q2=60*1e3,K2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new tf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Mn=new $h("analytics","Analytics",Y2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(i){if(!i.startsWith(Xp)){const e=Mn.create("invalid-gtag-resource",{gtagURL:i});return Sn.warn(e.message),""}return i}function AT(i){return Promise.all(i.map(e=>e.catch(t=>t)))}function X2(i,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(i,e)),t}function Z2(i,e){const t=X2("firebase-js-sdk-policy",{createScriptURL:W2}),s=document.createElement("script"),a=`${Xp}?l=${i}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function J2(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function $2(i,e,t,s,a,l){const h=s[a];try{if(h)await e[h];else{const p=(await AT(t)).find(g=>g.measurementId===a);p&&await e[p.appId]}}catch(d){Sn.error(d)}i("config",a,l)}async function eD(i,e,t,s,a){try{let l=[];if(a&&a.send_to){let h=a.send_to;Array.isArray(h)||(h=[h]);const d=await AT(t);for(const p of h){const g=d.find(A=>A.measurementId===p),E=g&&e[g.appId];if(E)l.push(E);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),i("event",s,a||{})}catch(l){Sn.error(l)}}function tD(i,e,t,s){async function a(l,...h){try{if(l==="event"){const[d,p]=h;await eD(i,e,t,d,p)}else if(l==="config"){const[d,p]=h;await $2(i,e,t,s,d,p)}else if(l==="consent"){const[d,p]=h;i("consent",d,p)}else if(l==="get"){const[d,p,g]=h;i("get",d,p,g)}else if(l==="set"){const[d]=h;i("set",d)}else i(l,...h)}catch(d){Sn.error(d)}}return a}function nD(i,e,t,s,a){let l=function(...h){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=tD(l,i,e,t),{gtagCore:l,wrappedGtag:window[a]}}function iD(i){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Xp)&&t.src.includes(i))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=30,rD=1e3;class aD{constructor(e={},t=rD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const TT=new aD;function oD(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function lD(i){var e;const{appId:t,apiKey:s}=i,a={method:"GET",headers:oD(s)},l=K2.replace("{app-id}",t),h=await fetch(l,a);if(h.status!==200&&h.status!==304){let d="";try{const p=await h.json();!((e=p.error)===null||e===void 0)&&e.message&&(d=p.error.message)}catch{}throw Mn.create("config-fetch-failed",{httpStatus:h.status,responseMessage:d})}return h.json()}async function uD(i,e=TT,t){const{appId:s,apiKey:a,measurementId:l}=i.options;if(!s)throw Mn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:s};throw Mn.create("no-api-key")}const h=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new fD;return setTimeout(async()=>{d.abort()},Q2),ST({appId:s,apiKey:a,measurementId:l},h,d,e)}async function ST(i,{throttleEndTimeMillis:e,backoffCount:t},s,a=TT){var l;const{appId:h,measurementId:d}=i;try{await cD(s,e)}catch(p){if(d)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:h,measurementId:d};throw p}try{const p=await lD(i);return a.deleteThrottleMetadata(h),p}catch(p){const g=p;if(!hD(g)){if(a.deleteThrottleMetadata(h),d)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:h,measurementId:d};throw p}const E=Number((l=g==null?void 0:g.customData)===null||l===void 0?void 0:l.httpStatus)===503?AE(t,a.intervalMillis,sD):AE(t,a.intervalMillis),A={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return a.setThrottleMetadata(h,A),Sn.debug(`Calling attemptFetch again in ${E} millis`),ST(i,A,s,a)}}function cD(i,e){return new Promise((t,s)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);i.addEventListener(()=>{clearTimeout(l),s(Mn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function hD(i){if(!(i instanceof Er)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class fD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function dD(i,e,t,s,a){if(a&&a.global){i("event",t,s);return}else{const l=await e,h=Object.assign(Object.assign({},s),{send_to:l});i("event",t,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(){if(QA())try{await KA()}catch(i){return Sn.warn(Mn.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return Sn.warn(Mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function pD(i,e,t,s,a,l,h){var d;const p=uD(i);p.then(D=>{t[D.measurementId]=D.appId,i.options.measurementId&&D.measurementId!==i.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${D.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(D=>Sn.error(D)),e.push(p);const g=mD().then(D=>{if(D)return s.getId()}),[E,A]=await Promise.all([p,g]);iD(l)||Z2(l,E.measurementId),a("js",new Date);const w=(d=h==null?void 0:h.config)!==null&&d!==void 0?d:{};return w[G2]="firebase",w.update=!0,A!=null&&(w[H2]=A),a("config",E.measurementId,w),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.app=e}_delete(){return delete ru[this.app.options.appId],Promise.resolve()}}let ru={},ME=[];const OE={};let Bm="dataLayer",yD="gtag",VE,wT,kE=!1;function _D(){const i=[];if(M1()&&i.push("This is a browser extension environment."),L1()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,a)=>`(${a+1}) ${s}`).join(" "),t=Mn.create("invalid-analytics-context",{errorInfo:e});Sn.warn(t.message)}}function vD(i,e,t){_D();const s=i.options.appId;if(!s)throw Mn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Mn.create("no-api-key");if(ru[s]!=null)throw Mn.create("already-exists",{id:s});if(!kE){J2(Bm);const{wrappedGtag:l,gtagCore:h}=nD(ru,ME,OE,Bm,yD);wT=l,VE=h,kE=!0}return ru[s]=pD(i,ME,OE,e,VE,Bm,t),new gD(i)}function ED(i=Gp()){i=ei(i);const e=ko(i,Nh);return e.isInitialized()?e.getImmediate():AD(i)}function AD(i,e={}){const t=ko(i,Nh);if(t.isInitialized()){const a=t.getImmediate();if(So(e,t.getOptions()))return a;throw Mn.create("already-initialized")}return t.initialize({options:e})}function TD(i,e,t,s){i=ei(i),dD(wT,ru[i.app.options.appId],e,t,s).catch(a=>Sn.error(a))}const LE="@firebase/analytics",PE="0.10.12";function SD(){ps(new Oi(Nh,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return vD(s,a,t)},"PUBLIC")),ps(new Oi("analytics-internal",i,"PRIVATE")),Jn(LE,PE),Jn(LE,PE,"esm2017");function i(e){try{const t=e.getProvider(Nh).getImmediate();return{logEvent:(s,a,l)=>TD(t,s,a,l)}}catch(t){throw Mn.create("interop-component-reg-failed",{reason:t})}}}SD();var UE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var or,bT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,R){function b(){}b.prototype=R.prototype,L.D=R.prototype,L.prototype=new b,L.prototype.constructor=L,L.C=function(x,k,j){for(var N=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)N[Ct-2]=arguments[Ct];return R.prototype[k].apply(x,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(L,R,b){b||(b=0);var x=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)x[k]=R.charCodeAt(b++)|R.charCodeAt(b++)<<8|R.charCodeAt(b++)<<16|R.charCodeAt(b++)<<24;else for(k=0;16>k;++k)x[k]=R[b++]|R[b++]<<8|R[b++]<<16|R[b++]<<24;R=L.g[0],b=L.g[1],k=L.g[2];var j=L.g[3],N=R+(j^b&(k^j))+x[0]+3614090360&4294967295;R=b+(N<<7&4294967295|N>>>25),N=j+(k^R&(b^k))+x[1]+3905402710&4294967295,j=R+(N<<12&4294967295|N>>>20),N=k+(b^j&(R^b))+x[2]+606105819&4294967295,k=j+(N<<17&4294967295|N>>>15),N=b+(R^k&(j^R))+x[3]+3250441966&4294967295,b=k+(N<<22&4294967295|N>>>10),N=R+(j^b&(k^j))+x[4]+4118548399&4294967295,R=b+(N<<7&4294967295|N>>>25),N=j+(k^R&(b^k))+x[5]+1200080426&4294967295,j=R+(N<<12&4294967295|N>>>20),N=k+(b^j&(R^b))+x[6]+2821735955&4294967295,k=j+(N<<17&4294967295|N>>>15),N=b+(R^k&(j^R))+x[7]+4249261313&4294967295,b=k+(N<<22&4294967295|N>>>10),N=R+(j^b&(k^j))+x[8]+1770035416&4294967295,R=b+(N<<7&4294967295|N>>>25),N=j+(k^R&(b^k))+x[9]+2336552879&4294967295,j=R+(N<<12&4294967295|N>>>20),N=k+(b^j&(R^b))+x[10]+4294925233&4294967295,k=j+(N<<17&4294967295|N>>>15),N=b+(R^k&(j^R))+x[11]+2304563134&4294967295,b=k+(N<<22&4294967295|N>>>10),N=R+(j^b&(k^j))+x[12]+1804603682&4294967295,R=b+(N<<7&4294967295|N>>>25),N=j+(k^R&(b^k))+x[13]+4254626195&4294967295,j=R+(N<<12&4294967295|N>>>20),N=k+(b^j&(R^b))+x[14]+2792965006&4294967295,k=j+(N<<17&4294967295|N>>>15),N=b+(R^k&(j^R))+x[15]+1236535329&4294967295,b=k+(N<<22&4294967295|N>>>10),N=R+(k^j&(b^k))+x[1]+4129170786&4294967295,R=b+(N<<5&4294967295|N>>>27),N=j+(b^k&(R^b))+x[6]+3225465664&4294967295,j=R+(N<<9&4294967295|N>>>23),N=k+(R^b&(j^R))+x[11]+643717713&4294967295,k=j+(N<<14&4294967295|N>>>18),N=b+(j^R&(k^j))+x[0]+3921069994&4294967295,b=k+(N<<20&4294967295|N>>>12),N=R+(k^j&(b^k))+x[5]+3593408605&4294967295,R=b+(N<<5&4294967295|N>>>27),N=j+(b^k&(R^b))+x[10]+38016083&4294967295,j=R+(N<<9&4294967295|N>>>23),N=k+(R^b&(j^R))+x[15]+3634488961&4294967295,k=j+(N<<14&4294967295|N>>>18),N=b+(j^R&(k^j))+x[4]+3889429448&4294967295,b=k+(N<<20&4294967295|N>>>12),N=R+(k^j&(b^k))+x[9]+568446438&4294967295,R=b+(N<<5&4294967295|N>>>27),N=j+(b^k&(R^b))+x[14]+3275163606&4294967295,j=R+(N<<9&4294967295|N>>>23),N=k+(R^b&(j^R))+x[3]+4107603335&4294967295,k=j+(N<<14&4294967295|N>>>18),N=b+(j^R&(k^j))+x[8]+1163531501&4294967295,b=k+(N<<20&4294967295|N>>>12),N=R+(k^j&(b^k))+x[13]+2850285829&4294967295,R=b+(N<<5&4294967295|N>>>27),N=j+(b^k&(R^b))+x[2]+4243563512&4294967295,j=R+(N<<9&4294967295|N>>>23),N=k+(R^b&(j^R))+x[7]+1735328473&4294967295,k=j+(N<<14&4294967295|N>>>18),N=b+(j^R&(k^j))+x[12]+2368359562&4294967295,b=k+(N<<20&4294967295|N>>>12),N=R+(b^k^j)+x[5]+4294588738&4294967295,R=b+(N<<4&4294967295|N>>>28),N=j+(R^b^k)+x[8]+2272392833&4294967295,j=R+(N<<11&4294967295|N>>>21),N=k+(j^R^b)+x[11]+1839030562&4294967295,k=j+(N<<16&4294967295|N>>>16),N=b+(k^j^R)+x[14]+4259657740&4294967295,b=k+(N<<23&4294967295|N>>>9),N=R+(b^k^j)+x[1]+2763975236&4294967295,R=b+(N<<4&4294967295|N>>>28),N=j+(R^b^k)+x[4]+1272893353&4294967295,j=R+(N<<11&4294967295|N>>>21),N=k+(j^R^b)+x[7]+4139469664&4294967295,k=j+(N<<16&4294967295|N>>>16),N=b+(k^j^R)+x[10]+3200236656&4294967295,b=k+(N<<23&4294967295|N>>>9),N=R+(b^k^j)+x[13]+681279174&4294967295,R=b+(N<<4&4294967295|N>>>28),N=j+(R^b^k)+x[0]+3936430074&4294967295,j=R+(N<<11&4294967295|N>>>21),N=k+(j^R^b)+x[3]+3572445317&4294967295,k=j+(N<<16&4294967295|N>>>16),N=b+(k^j^R)+x[6]+76029189&4294967295,b=k+(N<<23&4294967295|N>>>9),N=R+(b^k^j)+x[9]+3654602809&4294967295,R=b+(N<<4&4294967295|N>>>28),N=j+(R^b^k)+x[12]+3873151461&4294967295,j=R+(N<<11&4294967295|N>>>21),N=k+(j^R^b)+x[15]+530742520&4294967295,k=j+(N<<16&4294967295|N>>>16),N=b+(k^j^R)+x[2]+3299628645&4294967295,b=k+(N<<23&4294967295|N>>>9),N=R+(k^(b|~j))+x[0]+4096336452&4294967295,R=b+(N<<6&4294967295|N>>>26),N=j+(b^(R|~k))+x[7]+1126891415&4294967295,j=R+(N<<10&4294967295|N>>>22),N=k+(R^(j|~b))+x[14]+2878612391&4294967295,k=j+(N<<15&4294967295|N>>>17),N=b+(j^(k|~R))+x[5]+4237533241&4294967295,b=k+(N<<21&4294967295|N>>>11),N=R+(k^(b|~j))+x[12]+1700485571&4294967295,R=b+(N<<6&4294967295|N>>>26),N=j+(b^(R|~k))+x[3]+2399980690&4294967295,j=R+(N<<10&4294967295|N>>>22),N=k+(R^(j|~b))+x[10]+4293915773&4294967295,k=j+(N<<15&4294967295|N>>>17),N=b+(j^(k|~R))+x[1]+2240044497&4294967295,b=k+(N<<21&4294967295|N>>>11),N=R+(k^(b|~j))+x[8]+1873313359&4294967295,R=b+(N<<6&4294967295|N>>>26),N=j+(b^(R|~k))+x[15]+4264355552&4294967295,j=R+(N<<10&4294967295|N>>>22),N=k+(R^(j|~b))+x[6]+2734768916&4294967295,k=j+(N<<15&4294967295|N>>>17),N=b+(j^(k|~R))+x[13]+1309151649&4294967295,b=k+(N<<21&4294967295|N>>>11),N=R+(k^(b|~j))+x[4]+4149444226&4294967295,R=b+(N<<6&4294967295|N>>>26),N=j+(b^(R|~k))+x[11]+3174756917&4294967295,j=R+(N<<10&4294967295|N>>>22),N=k+(R^(j|~b))+x[2]+718787259&4294967295,k=j+(N<<15&4294967295|N>>>17),N=b+(j^(k|~R))+x[9]+3951481745&4294967295,L.g[0]=L.g[0]+R&4294967295,L.g[1]=L.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,L.g[2]=L.g[2]+k&4294967295,L.g[3]=L.g[3]+j&4294967295}s.prototype.u=function(L,R){R===void 0&&(R=L.length);for(var b=R-this.blockSize,x=this.B,k=this.h,j=0;j<R;){if(k==0)for(;j<=b;)a(this,L,j),j+=this.blockSize;if(typeof L=="string"){for(;j<R;)if(x[k++]=L.charCodeAt(j++),k==this.blockSize){a(this,x),k=0;break}}else for(;j<R;)if(x[k++]=L[j++],k==this.blockSize){a(this,x),k=0;break}}this.h=k,this.o+=R},s.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var R=1;R<L.length-8;++R)L[R]=0;var b=8*this.o;for(R=L.length-8;R<L.length;++R)L[R]=b&255,b/=256;for(this.u(L),L=Array(16),R=b=0;4>R;++R)for(var x=0;32>x;x+=8)L[b++]=this.g[R]>>>x&255;return L};function l(L,R){var b=d;return Object.prototype.hasOwnProperty.call(b,L)?b[L]:b[L]=R(L)}function h(L,R){this.h=R;for(var b=[],x=!0,k=L.length-1;0<=k;k--){var j=L[k]|0;x&&j==R||(b[k]=j,x=!1)}this.g=b}var d={};function p(L){return-128<=L&&128>L?l(L,function(R){return new h([R|0],0>R?-1:0)}):new h([L|0],0>L?-1:0)}function g(L){if(isNaN(L)||!isFinite(L))return A;if(0>L)return z(g(-L));for(var R=[],b=1,x=0;L>=b;x++)R[x]=L/b|0,b*=4294967296;return new h(R,0)}function E(L,R){if(L.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(L.charAt(0)=="-")return z(E(L.substring(1),R));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=g(Math.pow(R,8)),x=A,k=0;k<L.length;k+=8){var j=Math.min(8,L.length-k),N=parseInt(L.substring(k,k+j),R);8>j?(j=g(Math.pow(R,j)),x=x.j(j).add(g(N))):(x=x.j(b),x=x.add(g(N)))}return x}var A=p(0),w=p(1),D=p(16777216);i=h.prototype,i.m=function(){if(G(this))return-z(this).m();for(var L=0,R=1,b=0;b<this.g.length;b++){var x=this.i(b);L+=(0<=x?x:4294967296+x)*R,R*=4294967296}return L},i.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(O(this))return"0";if(G(this))return"-"+z(this).toString(L);for(var R=g(Math.pow(L,6)),b=this,x="";;){var k=_e(b,R).g;b=W(b,k.j(R));var j=((0<b.g.length?b.g[0]:b.h)>>>0).toString(L);if(b=k,O(b))return j+x;for(;6>j.length;)j="0"+j;x=j+x}},i.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function O(L){if(L.h!=0)return!1;for(var R=0;R<L.g.length;R++)if(L.g[R]!=0)return!1;return!0}function G(L){return L.h==-1}i.l=function(L){return L=W(this,L),G(L)?-1:O(L)?0:1};function z(L){for(var R=L.g.length,b=[],x=0;x<R;x++)b[x]=~L.g[x];return new h(b,~L.h).add(w)}i.abs=function(){return G(this)?z(this):this},i.add=function(L){for(var R=Math.max(this.g.length,L.g.length),b=[],x=0,k=0;k<=R;k++){var j=x+(this.i(k)&65535)+(L.i(k)&65535),N=(j>>>16)+(this.i(k)>>>16)+(L.i(k)>>>16);x=N>>>16,j&=65535,N&=65535,b[k]=N<<16|j}return new h(b,b[b.length-1]&-2147483648?-1:0)};function W(L,R){return L.add(z(R))}i.j=function(L){if(O(this)||O(L))return A;if(G(this))return G(L)?z(this).j(z(L)):z(z(this).j(L));if(G(L))return z(this.j(z(L)));if(0>this.l(D)&&0>L.l(D))return g(this.m()*L.m());for(var R=this.g.length+L.g.length,b=[],x=0;x<2*R;x++)b[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<L.g.length;k++){var j=this.i(x)>>>16,N=this.i(x)&65535,Ct=L.i(k)>>>16,vt=L.i(k)&65535;b[2*x+2*k]+=N*vt,ne(b,2*x+2*k),b[2*x+2*k+1]+=j*vt,ne(b,2*x+2*k+1),b[2*x+2*k+1]+=N*Ct,ne(b,2*x+2*k+1),b[2*x+2*k+2]+=j*Ct,ne(b,2*x+2*k+2)}for(x=0;x<R;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=R;x<2*R;x++)b[x]=0;return new h(b,0)};function ne(L,R){for(;(L[R]&65535)!=L[R];)L[R+1]+=L[R]>>>16,L[R]&=65535,R++}function te(L,R){this.g=L,this.h=R}function _e(L,R){if(O(R))throw Error("division by zero");if(O(L))return new te(A,A);if(G(L))return R=_e(z(L),R),new te(z(R.g),z(R.h));if(G(R))return R=_e(L,z(R)),new te(z(R.g),R.h);if(30<L.g.length){if(G(L)||G(R))throw Error("slowDivide_ only works with positive integers.");for(var b=w,x=R;0>=x.l(L);)b=fe(b),x=fe(x);var k=Re(b,1),j=Re(x,1);for(x=Re(x,2),b=Re(b,2);!O(x);){var N=j.add(x);0>=N.l(L)&&(k=k.add(b),j=N),x=Re(x,1),b=Re(b,1)}return R=W(L,k.j(R)),new te(k,R)}for(k=A;0<=L.l(R);){for(b=Math.max(1,Math.floor(L.m()/R.m())),x=Math.ceil(Math.log(b)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),j=g(b),N=j.j(R);G(N)||0<N.l(L);)b-=x,j=g(b),N=j.j(R);O(j)&&(j=w),k=k.add(j),L=W(L,N)}return new te(k,L)}i.A=function(L){return _e(this,L).h},i.and=function(L){for(var R=Math.max(this.g.length,L.g.length),b=[],x=0;x<R;x++)b[x]=this.i(x)&L.i(x);return new h(b,this.h&L.h)},i.or=function(L){for(var R=Math.max(this.g.length,L.g.length),b=[],x=0;x<R;x++)b[x]=this.i(x)|L.i(x);return new h(b,this.h|L.h)},i.xor=function(L){for(var R=Math.max(this.g.length,L.g.length),b=[],x=0;x<R;x++)b[x]=this.i(x)^L.i(x);return new h(b,this.h^L.h)};function fe(L){for(var R=L.g.length+1,b=[],x=0;x<R;x++)b[x]=L.i(x)<<1|L.i(x-1)>>>31;return new h(b,L.h)}function Re(L,R){var b=R>>5;R%=32;for(var x=L.g.length-b,k=[],j=0;j<x;j++)k[j]=0<R?L.i(j+b)>>>R|L.i(j+b+1)<<32-R:L.i(j+b);return new h(k,L.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,bT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=E,or=h}).apply(typeof UE<"u"?UE:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CT,nu,RT,_h,ap,IT,DT,NT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function a(c,y){if(y)e:{var _=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var B=c[S];if(!(B in _))break e;_=_[B]}c=c[c.length-1],S=_[c],y=y(S),y!=S&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function l(c,y){c instanceof String&&(c+="");var _=0,S=!1,B={next:function(){if(!S&&_<c.length){var H=_++;return{value:y(H,c[H]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(c){return c||function(){return l(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,_){return c.call.apply(c.bind,arguments)}function A(c,y,_){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function w(c,y,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,w.apply(null,arguments)}function D(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function O(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(S,B,H){for(var ie=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ie[Le-2]=arguments[Le];return y.prototype[B].apply(S,ie)}}function G(c){const y=c.length;if(0<y){const _=Array(y);for(let S=0;S<y;S++)_[S]=c[S];return _}return[]}function z(c,y){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(p(S)){const B=c.length||0,H=S.length||0;c.length=B+H;for(let ie=0;ie<H;ie++)c[B+ie]=S[ie]}else c.push(S)}}class W{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ne(c){return/^[\s\xa0]*$/.test(c)}function te(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function _e(c){return _e[" "](c),c}_e[" "]=function(){};var fe=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function Re(c,y,_){for(const S in c)y.call(_,c[S],S,c)}function L(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function R(c){const y={};for(const _ in c)y[_]=c[_];return y}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,y){let _,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(_ in S)c[_]=S[_];for(let H=0;H<b.length;H++)_=b[H],Object.prototype.hasOwnProperty.call(S,_)&&(c[_]=S[_])}}function k(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function j(c){d.setTimeout(()=>{throw c},0)}function N(){var c=Qe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ct{constructor(){this.h=this.g=null}add(y,_){const S=vt.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var vt=new W(()=>new se,c=>c.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,pe=!1,Qe=new Ct,M=()=>{const c=d.Promise.resolve(void 0);ve=()=>{c.then(ee)}};var ee=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(_){j(_)}var y=vt;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}pe=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return c}();function Ce(c,y){if(ae.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(fe){e:{try{_e(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ce.aa.h.call(this)}}O(Ce,ae);var we={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),qe=0;function ht(c,y,_,S,B){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=B,this.key=++qe,this.da=this.fa=!1}function Xe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function hn(c){this.src=c,this.g={},this.h=0}hn.prototype.add=function(c,y,_,S,B){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var ie=Vn(c,y,S,B);return-1<ie?(y=c[ie],_||(y.fa=!1)):(y=new ht(y,this.src,H,!!S,B),y.fa=_,c.push(y)),y};function Pi(c,y){var _=y.type;if(_ in c.g){var S=c.g[_],B=Array.prototype.indexOf.call(S,y,void 0),H;(H=0<=B)&&Array.prototype.splice.call(S,B,1),H&&(Xe(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Vn(c,y,_,S){for(var B=0;B<c.length;++B){var H=c[B];if(!H.da&&H.listener==y&&H.capture==!!_&&H.ha==S)return B}return-1}var As="closure_lm_"+(1e6*Math.random()|0),Ts={};function Ui(c,y,_,S,B){if(Array.isArray(y)){for(var H=0;H<y.length;H++)Ui(c,y[H],_,S,B);return null}return _=Bu(_),c&&c[Et]?c.K(y,_,g(S)?!!S.capture:!1,B):Fo(c,y,_,!1,S,B)}function Fo(c,y,_,S,B,H){if(!y)throw Error("Invalid event type");var ie=g(B)?!!B.capture:!!B,Le=Ho(c);if(Le||(c[As]=Le=new hn(c)),_=Le.add(y,_,S,ie,H),_.proxy)return _;if(S=Ea(),_.proxy=S,S.src=c,S.listener=_,c.addEventListener)oe||(B=ie),B===void 0&&(B=!1),c.addEventListener(y.toString(),S,B);else if(c.attachEvent)c.attachEvent(Ta(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ea(){function c(_){return y.call(c.src,c.listener,_)}const y=Rf;return c}function Aa(c,y,_,S,B){if(Array.isArray(y))for(var H=0;H<y.length;H++)Aa(c,y[H],_,S,B);else S=g(S)?!!S.capture:!!S,_=Bu(_),c&&c[Et]?(c=c.i,y=String(y).toString(),y in c.g&&(H=c.g[y],_=Vn(H,_,S,B),-1<_&&(Xe(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete c.g[y],c.h--)))):c&&(c=Ho(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Vn(y,_,S,B)),(_=-1<c?y[c]:null)&&Sr(_))}function Sr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Et])Pi(y.i,c);else{var _=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(_,S,c.capture):y.detachEvent?y.detachEvent(Ta(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=Ho(y))?(Pi(_,c),_.h==0&&(_.src=null,y[As]=null)):Xe(c)}}}function Ta(c){return c in Ts?Ts[c]:Ts[c]="on"+c}function Rf(c,y){if(c.da)c=!0;else{y=new Ce(y,this);var _=c.listener,S=c.ha||c.src;c.fa&&Sr(c),c=_.call(S,y)}return c}function Ho(c){return c=c[As],c instanceof hn?c:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bu(c){return typeof c=="function"?c:(c[yn]||(c[yn]=function(y){return c.handleEvent(y)}),c[yn])}function Rt(){he.call(this),this.i=new hn(this),this.M=this,this.F=null}O(Rt,he),Rt.prototype[Et]=!0,Rt.prototype.removeEventListener=function(c,y,_,S){Aa(this,c,y,_,S)};function Lt(c,y){var _,S=c.F;if(S)for(_=[];S;S=S.F)_.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new ae(y,c);else if(y instanceof ae)y.target=y.target||c;else{var B=y;y=new ae(S,c),x(y,B)}if(B=!0,_)for(var H=_.length-1;0<=H;H--){var ie=y.g=_[H];B=Bi(ie,S,!0,y)&&B}if(ie=y.g=c,B=Bi(ie,S,!0,y)&&B,B=Bi(ie,S,!1,y)&&B,_)for(H=0;H<_.length;H++)ie=y.g=_[H],B=Bi(ie,S,!1,y)&&B}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],S=0;S<_.length;S++)Xe(_[S]);delete c.g[y],c.h--}}this.F=null},Rt.prototype.K=function(c,y,_,S){return this.i.add(String(c),y,!1,_,S)},Rt.prototype.L=function(c,y,_,S){return this.i.add(String(c),y,!0,_,S)};function Bi(c,y,_,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,H=0;H<y.length;++H){var ie=y[H];if(ie&&!ie.da&&ie.capture==_){var Le=ie.listener,Dt=ie.ha||ie.src;ie.fa&&Pi(c.i,ie),B=Le.call(Dt,S)!==!1&&B}}return B&&!S.defaultPrevented}function ju(c,y,_){if(typeof c=="function")_&&(c=w(c,_));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(c,y||0)}function Go(c){c.g=ju(()=>{c.g=null,c.i&&(c.i=!1,Go(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class If extends he{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Go(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wr(c){he.call(this),this.h=c,this.g={}}O(wr,he);var Ss=[];function tn(c){Re(c.g,function(y,_){this.g.hasOwnProperty(_)&&Sr(y)},c),c.g={}}wr.prototype.N=function(){wr.aa.N.call(this),tn(this)},wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qo=d.JSON.stringify,di=d.JSON.parse,fn=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Ko(){}Ko.prototype.h=null;function zu(c){return c.h||(c.h=c.i())}function qu(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ws(){ae.call(this,"d")}O(ws,ae);function ni(){ae.call(this,"c")}O(ni,ae);var kn={},bs=null;function Sa(){return bs=bs||new Rt}kn.La="serverreachability";function Yo(c){ae.call(this,kn.La,c)}O(Yo,ae);function Cs(c){const y=Sa();Lt(y,new Yo(y))}kn.STAT_EVENT="statevent";function wa(c,y){ae.call(this,kn.STAT_EVENT,c),this.stat=y}O(wa,ae);function gt(c){const y=Sa();Lt(y,new wa(y,c))}kn.Ma="timingevent";function Fu(c,y){ae.call(this,kn.Ma,c),this.size=y}O(Fu,ae);function Rs(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},y)}function Is(){this.g=!0}Is.prototype.xa=function(){this.g=!1};function Hu(c,y,_,S,B,H){c.info(function(){if(c.g)if(H)for(var ie="",Le=H.split("&"),Dt=0;Dt<Le.length;Dt++){var Pe=Le[Dt].split("=");if(1<Pe.length){var Bt=Pe[0];Pe=Pe[1];var Nt=Bt.split("_");ie=2<=Nt.length&&Nt[1]=="type"?ie+(Bt+"="+Pe+"&"):ie+(Bt+"=redacted&")}}else ie=null;else ie=H;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+y+`
`+_+`
`+ie})}function Gu(c,y,_,S,B,H,ie){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+y+`
`+_+`
`+H+" "+ie})}function Ds(c,y,_,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Pt(c,_)+(S?" "+S:"")})}function pi(c,y){c.info(function(){return"TIMEOUT: "+y})}Is.prototype.info=function(){};function Pt(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var S=_[c];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var H=B[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ie=1;ie<B.length;ie++)B[ie]=""}}}}return Qo(_)}catch{return y}}var It={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},br;function ba(){}O(ba,Ko),ba.prototype.g=function(){return new XMLHttpRequest},ba.prototype.i=function(){return{}},br=new ba;function gi(c,y,_,S){this.j=c,this.i=y,this.l=_,this.R=S||1,this.U=new wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wo}function Wo(){this.i=null,this.g="",this.h=!1}var Ns={},Cr={};function ii(c,y,_){c.L=1,c.v=Dr(ft(y)),c.m=_,c.P=!0,zi(c,null)}function zi(c,y){c.F=Date.now(),ot(c),c.A=ft(c.v);var _=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Hi(_.i,"t",S),c.C=0,_=c.j.J,c.h=new Wo,c.g=rc(c.j,_?y:null,!c.m),0<c.O&&(c.M=new If(w(c.Y,c,c.g),c.O)),y=c.U,_=c.g,S=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Ss[0]=B.toString()),B=Ss);for(var H=0;H<B.length;H++){var ie=Ui(_,B[H],S||y.handleEvent,!1,y.h||y);if(!ie)break;y.g[ie.key]=ie}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Cs(),Hu(c.i,c.u,c.A,c.l,c.R,c.m)}gi.prototype.ca=function(c){c=c.target;const y=this.M;y&&jn(c)==3?y.j():this.Y(c)},gi.prototype.Y=function(c){try{if(c==this.g)e:{const Nt=jn(this.g);var y=this.g.Ba();const Yi=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Zu(this.g)))){this.J||Nt!=4||y==7||(y==8||0>=Yi?Cs(3):Cs(2)),Ca(this);var _=this.g.Z();this.X=_;t:if(xs(this)){var S=Zu(this.g);c="";var B=S.length,H=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),wn(this);var ie="";break t}this.h.i=new d.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!(H&&y==B-1)});S.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=_==200,Gu(this.i,this.u,this.A,this.l,this.R,Nt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Dt=this.g;if((Le=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Le)){var Pe=Le;break t}}Pe=null}if(_=Pe)Ds(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bn(this,_);else{this.o=!1,this.s=3,gt(12),_n(this),wn(this);break e}}if(this.P){_=!0;let Kt;for(;!this.J&&this.C<ie.length;)if(Kt=Ms(this,ie),Kt==Cr){Nt==4&&(this.s=4,gt(14),_=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Ns){this.s=4,gt(15),Ds(this.i,this.l,ie,"[Invalid Chunk]"),_=!1;break}else Ds(this.i,this.l,Kt,null),bn(this,Kt);if(xs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ie.length!=0||this.h.h||(this.s=1,gt(16),_=!1),this.o=this.o&&_,!_)Ds(this.i,this.l,ie,"[Invalid Chunked Response]"),_n(this),wn(this);else if(0<ie.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Lr(Bt),Bt.M=!0,gt(11))}}else Ds(this.i,this.l,ie,null),bn(this,ie);Nt==4&&_n(this),this.o&&!this.J&&(Nt==4?nc(this.j,this):(this.o=!1,ot(this)))}else Vf(this.g),_==400&&0<ie.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),_n(this),wn(this)}}}catch{}finally{}};function xs(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ms(c,y){var _=c.C,S=y.indexOf(`
`,_);return S==-1?Cr:(_=Number(y.substring(_,S)),isNaN(_)?Ns:(S+=1,S+_>y.length?Cr:(y=y.slice(S,S+_),c.C=S+_,y)))}gi.prototype.cancel=function(){this.J=!0,_n(this)};function ot(c){c.S=Date.now()+c.I,Xo(c,c.I)}function Xo(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Rs(w(c.ba,c),y)}function Ca(c){c.B&&(d.clearTimeout(c.B),c.B=null)}gi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(pi(this.i,this.A),this.L!=2&&(Cs(),gt(17)),_n(this),this.s=2,wn(this)):Xo(this,this.S-c)};function wn(c){c.j.G==0||c.J||nc(c.j,c)}function _n(c){Ca(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,tn(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function bn(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||Os(_.h,c))){if(!c.K&&Os(_.h,c)&&_.G==3){try{var S=_.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)La(_),Va(_);else break e;ol(_),gt(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=Rs(w(_.Za,_),6e3));if(1>=Qu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ki(_,11)}else if((c.K||_.g==c)&&La(_),!ne(y))for(B=_.Da.g.parse(y),y=0;y<B.length;y++){let Pe=B[y];if(_.T=Pe[0],Pe=Pe[1],_.G==2)if(Pe[0]=="c"){_.K=Pe[1],_.ia=Pe[2];const Bt=Pe[3];Bt!=null&&(_.la=Bt,_.j.info("VER="+_.la));const Nt=Pe[4];Nt!=null&&(_.Aa=Nt,_.j.info("SVER="+_.Aa));const Yi=Pe[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(S=1.5*Yi,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Kt=c.g;if(Kt){const Si=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var H=S.h;H.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Vs(H,H.h),H.h=null))}if(S.D){const ul=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(S.ya=ul,Fe(S.I,S.D,ul))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var ie=c;if(S.qa=sc(S,S.J?S.ia:null,S.W),ie.K){Ln(S.h,ie);var Le=ie,Dt=S.L;Dt&&(Le.I=Dt),Le.B&&(Ca(Le),ot(Le)),S.g=ie}else ec(S);0<_.i.length&&ka(_)}else Pe[0]!="stop"&&Pe[0]!="close"||Ki(_,7);else _.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Ki(_,7):rl(_):Pe[0]!="noop"&&_.l&&_.l.ta(Pe),_.v=0)}}Cs(4)}catch{}}var Df=class{constructor(c,y){this.g=c,this.map=y}};function Zo(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Qu(c){return c.h?1:c.g?c.g.size:0}function Os(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Vs(c,y){c.g?c.g.add(y):c.h=y}function Ln(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Zo.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function dn(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return G(c.i)}function Ku(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],_=c.length,S=0;S<_;S++)y.push(c[S]);return y}y=[],_=0;for(S in c)y[_++]=c[S];return y}function Nf(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const S in c)y[_++]=S;return y}}}function Rr(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=Nf(c),S=Ku(c),B=S.length,H=0;H<B;H++)y.call(void 0,S[H],_&&_[H],c)}var $o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var S=c[_].indexOf("="),B=null;if(0<=S){var H=c[_].substring(0,S);B=c[_].substring(S+1)}else H=c[_];y(H,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function qi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof qi){this.h=c.h,ks(this,c.j),this.o=c.o,this.g=c.g,Ir(this,c.s),this.l=c.l;var y=c.i,_=new yi;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),Ia(this,_),this.m=c.m}else c&&(y=String(c).match($o))?(this.h=!1,ks(this,y[1]||"",!0),this.o=Ls(y[2]||""),this.g=Ls(y[3]||"",!0),Ir(this,y[4]),this.l=Ls(y[5]||"",!0),Ia(this,y[6]||"",!0),this.m=Ls(y[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}qi.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Pn(y,el,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Pn(y,el,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Pn(_,_.charAt(0)=="/"?tl:Yu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Pn(_,Of)),c.join("")};function ft(c){return new qi(c)}function ks(c,y,_){c.j=_?Ls(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ir(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Ia(c,y,_){y instanceof yi?(c.i=y,nl(c.i,c.h)):(_||(y=Pn(y,Mf)),c.i=new yi(y,c.h))}function Fe(c,y,_){c.i.set(y,_)}function Dr(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ls(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Pn(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,xf),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xf(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var el=/[#\/\?@]/g,Yu=/[#\?:]/g,tl=/[#\?]/g,Mf=/[#\?@]/g,Of=/#/g;function yi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Un(c){c.g||(c.g=new Map,c.h=0,c.i&&Ra(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=yi.prototype,i.add=function(c,y){Un(this),this.i=null,c=Gi(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function Da(c,y){Un(c),y=Gi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Fi(c,y){return Un(c),y=Gi(c,y),c.g.has(y)}i.forEach=function(c,y){Un(this),this.g.forEach(function(_,S){_.forEach(function(B){c.call(y,B,S,this)},this)},this)},i.na=function(){Un(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let S=0;S<y.length;S++){const B=c[S];for(let H=0;H<B.length;H++)_.push(y[S])}return _},i.V=function(c){Un(this);let y=[];if(typeof c=="string")Fi(this,c)&&(y=y.concat(this.g.get(Gi(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},i.set=function(c,y){return Un(this),this.i=null,c=Gi(this,c),Fi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Hi(c,y,_){Da(c,y),0<_.length&&(c.i=null,c.g.set(Gi(c,y),G(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var S=y[_];const H=encodeURIComponent(String(S)),ie=this.V(S);for(S=0;S<ie.length;S++){var B=H;ie[S]!==""&&(B+="="+encodeURIComponent(String(ie[S]))),c.push(B)}}return this.i=c.join("&")};function Gi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function nl(c,y){y&&!c.j&&(Un(c),c.i=null,c.g.forEach(function(_,S){var B=S.toLowerCase();S!=B&&(Da(this,S),Hi(this,B,_))},c)),c.j=y}function Wu(c,y){const _=new Is;if(d.Image){const S=new Image;S.onload=D(Bn,_,"TestLoadImage: loaded",!0,y,S),S.onerror=D(Bn,_,"TestLoadImage: error",!1,y,S),S.onabort=D(Bn,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=D(Bn,_,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function Nr(c,y){const _=new Is,S=new AbortController,B=setTimeout(()=>{S.abort(),Bn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then(H=>{clearTimeout(B),H.ok?Bn(_,"TestPingServer: ok",!0,y):Bn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Bn(_,"TestPingServer: error",!1,y)})}function Bn(c,y,_,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(_)}catch{}}function xr(){this.g=new fn}function _i(c,y,_){const S=_||"";try{Rr(c,function(B,H){let ie=B;g(B)&&(ie=Qo(B)),y.push(S+H+"="+encodeURIComponent(ie))})}catch(B){throw y.push(S+"type="+encodeURIComponent("_badmap")),B}}function Ps(c){this.l=c.Ub||null,this.j=c.eb||!1}O(Ps,Ko),Ps.prototype.g=function(){return new Qi(this.l,this.j)},Ps.prototype.i=function(c){return function(){return c}}({});function Qi(c,y){Rt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Qi,Rt),i=Qi.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Ei(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;il(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function il(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?vi(this):Ei(this),this.readyState==3&&il(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,vi(this))},i.Qa=function(c){this.g&&(this.response=c,vi(this))},i.ga=function(){this.g&&vi(this)};function vi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ei(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function Ei(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sl(c){let y="";return Re(c,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function Ut(c,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=sl(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Fe(c,y,_))}function Ke(c){Rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Ke,Rt);var Na=/^https?$/i,Mr=["POST","PUT"];i=Ke.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():br.g(),this.v=this.o?zu(this.o):zu(br),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(H){Xu(this,H);return}if(c=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)_.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())_.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),B=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Mr,y,void 0))||S||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of _)this.g.setRequestHeader(H,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Or(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){Xu(this,H)}};function Xu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,xa(c),Ai(c)}function xa(c){c.A||(c.A=!0,Lt(c,"complete"),Lt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Lt(this,"complete"),Lt(this,"abort"),Ai(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),Ke.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ma(this):this.bb())},i.bb=function(){Ma(this)};function Ma(c){if(c.h&&typeof h<"u"&&(!c.v[1]||jn(c)!=4||c.Z()!=2)){if(c.u&&jn(c)==4)ju(c.Ea,0,c);else if(Lt(c,"readystatechange"),jn(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=ie===0){var B=String(c.D).match($o)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),S=!Na.test(B?B.toLowerCase():"")}_=S}if(_)Lt(c,"complete"),Lt(c,"success");else{c.m=6;try{var H=2<jn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",xa(c)}}finally{Ai(c)}}}}function Ai(c,y){if(c.g){Or(c);const _=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Lt(c,"ready");try{_.onreadystatechange=S}catch{}}}function Or(c){c.I&&(d.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),di(y)}};function Zu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Vf(c){const y={};c=(c.g&&2<=jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(ne(c[S]))continue;var _=k(c[S]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=y[B]||[];y[B]=H,H.push(_)}L(y,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Oa(c){this.Aa=0,this.i=[],this.j=new Is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,c),this.cb=Vr("retryDelaySeedMs",1e4,c),this.Wa=Vr("forwardChannelMaxRetries",2,c),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Zo(c&&c.concurrentRequestLimit),this.Da=new xr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Oa.prototype,i.la=8,i.G=1,i.connect=function(c,y,_,S){gt(0),this.W=c,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=sc(this,null,this.W),ka(this)};function rl(c){if(Ju(c),c.G==3){var y=c.U++,_=ft(c.I);if(Fe(_,"SID",c.K),Fe(_,"RID",y),Fe(_,"TYPE","terminate"),kr(c,_),y=new gi(c,c.j,y),y.L=2,y.v=Dr(ft(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.v,_=!0),_||(y.g=rc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ot(y)}ic(c)}function Va(c){c.g&&(Lr(c),c.g.cancel(),c.g=null)}function Ju(c){Va(c),c.u&&(d.clearTimeout(c.u),c.u=null),La(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function ka(c){if(!Jo(c.h)&&!c.s){c.s=!0;var y=c.Ga;ve||M(),pe||(ve(),pe=!0),Qe.add(y,c),c.B=0}}function kf(c,y){return Qu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Rs(w(c.Ga,c,y),ll(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new gi(this,this.j,c);let H=this.o;if(this.S&&(H?(H=R(H),x(H,this.S)):H=this.S),this.m!==null||this.O||(B.H=H,H=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=$u(this,B,y),_=ft(this.I),Fe(_,"RID",c),Fe(_,"CVER",22),this.D&&Fe(_,"X-HTTP-Session-Id",this.D),kr(this,_),H&&(this.O?y="headers="+encodeURIComponent(String(sl(H)))+"&"+y:this.m&&Ut(_,this.m,H)),Vs(this.h,B),this.Ua&&Fe(_,"TYPE","init"),this.P?(Fe(_,"$req",y),Fe(_,"SID","null"),B.T=!0,ii(B,_,null)):ii(B,_,y),this.G=2}}else this.G==3&&(c?al(this,c):this.i.length==0||Jo(this.h)||al(this))};function al(c,y){var _;y?_=y.l:_=c.U++;const S=ft(c.I);Fe(S,"SID",c.K),Fe(S,"RID",_),Fe(S,"AID",c.T),kr(c,S),c.m&&c.o&&Ut(S,c.m,c.o),_=new gi(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=$u(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Vs(c.h,_),ii(_,S,y)}function kr(c,y){c.H&&Re(c.H,function(_,S){Fe(y,S,_)}),c.l&&Rr({},function(_,S){Fe(y,S,_)})}function $u(c,y,_){_=Math.min(c.i.length,_);var S=c.l?w(c.l.Na,c.l,c):null;e:{var B=c.i;let H=-1;for(;;){const ie=["count="+_];H==-1?0<_?(H=B[0].g,ie.push("ofs="+H)):H=0:ie.push("ofs="+H);let Le=!0;for(let Dt=0;Dt<_;Dt++){let Pe=B[Dt].g;const Bt=B[Dt].map;if(Pe-=H,0>Pe)H=Math.max(0,B[Dt].g-100),Le=!1;else try{_i(Bt,ie,"req"+Pe+"_")}catch{S&&S(Bt)}}if(Le){S=ie.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,S}function ec(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ve||M(),pe||(ve(),pe=!0),Qe.add(y,c),c.v=0}}function ol(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Rs(w(c.Fa,c),ll(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,tc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Rs(w(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Va(this),tc(this))};function Lr(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function tc(c){c.g=new gi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=ft(c.qa);Fe(y,"RID","rpc"),Fe(y,"SID",c.K),Fe(y,"AID",c.T),Fe(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(y,"TO",c.ja),Fe(y,"TYPE","xmlhttp"),kr(c,y),c.m&&c.o&&Ut(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Dr(ft(y)),_.m=null,_.P=!0,zi(_,c)}i.Za=function(){this.C!=null&&(this.C=null,Va(this),ol(this),gt(19))};function La(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function nc(c,y){var _=null;if(c.g==y){La(c),Lr(c),c.g=null;var S=2}else if(Os(c.h,y))_=y.D,Ln(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;S=Sa(),Lt(S,new Fu(S,_)),ka(c)}else ec(c);else if(B=y.s,B==3||B==0&&0<y.X||!(S==1&&kf(c,y)||S==2&&ol(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),B){case 1:Ki(c,5);break;case 4:Ki(c,10);break;case 3:Ki(c,6);break;default:Ki(c,2)}}}function ll(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function Ki(c,y){if(c.j.info("Error code "+y),y==2){var _=w(c.fb,c),S=c.Xa;const B=!S;S=new qi(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ks(S,"https"),Dr(S),B?Wu(S.toString(),_):Nr(S.toString(),_)}else gt(2);c.G=0,c.l&&c.l.sa(y),ic(c),Ju(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function ic(c){if(c.G=0,c.ka=[],c.l){const y=dn(c.h);(y.length!=0||c.i.length!=0)&&(z(c.ka,y),z(c.ka,c.i),c.h.i.length=0,G(c.i),c.i.length=0),c.l.ra()}}function sc(c,y,_){var S=_ instanceof qi?ft(_):new qi(_);if(S.g!="")y&&(S.g=y+"."+S.g),Ir(S,S.s);else{var B=d.location;S=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var H=new qi(null);S&&ks(H,S),y&&(H.g=y),B&&Ir(H,B),_&&(H.l=_),S=H}return _=c.D,y=c.ya,_&&y&&Fe(S,_,y),Fe(S,"VER",c.la),kr(c,S),S}function rc(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Ke(new Ps({eb:_})):new Ke(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ac(){}i=ac.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Pa(){}Pa.prototype.g=function(c,y){return new mn(c,y)};function mn(c,y){Rt.call(this),this.g=new Oa(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!ne(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ne(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Ti(this)}O(mn,Rt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){rl(this.g)},mn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Qo(c),c=_);y.i.push(new Df(y.Ya++,c)),y.G==3&&ka(y)},mn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,mn.aa.N.call(this)};function oc(c){ws.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}O(oc,ws);function lc(){ni.call(this),this.status=1}O(lc,ni);function Ti(c){this.g=c}O(Ti,ac),Ti.prototype.ua=function(){Lt(this.g,"a")},Ti.prototype.ta=function(c){Lt(this.g,new oc(c))},Ti.prototype.sa=function(c){Lt(this.g,new lc)},Ti.prototype.ra=function(){Lt(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,NT=function(){return new Pa},DT=function(){return Sa()},IT=kn,ap={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,_h=It,ji.COMPLETE="complete",RT=ji,qu.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,nu=qu,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,CT=Ke}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const BE="@firebase/firestore",jE="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new tf("@firebase/firestore");function fo(){return la.logLevel}function le(i,...e){if(la.logLevel<=Oe.DEBUG){const t=e.map(Zp);la.debug(`Firestore (${Lo}): ${i}`,...t)}}function gs(i,...e){if(la.logLevel<=Oe.ERROR){const t=e.map(Zp);la.error(`Firestore (${Lo}): ${i}`,...t)}}function wo(i,...e){if(la.logLevel<=Oe.WARN){const t=e.map(Zp);la.warn(`Firestore (${Lo}): ${i}`,...t)}}function Zp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(i="Unexpected state"){const e=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: `+i;throw gs(e),new Error(e)}function We(i,e){i||Ee()}function Se(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Er{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}}class bD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class CD{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new lr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},d=p=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new lr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string"),new xT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new an(e)}}class RD{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ID{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new RD(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DD{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,JA(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){We(this.o===void 0);const s=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,le("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new zE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We(typeof t.token=="string"),this.R=t.token,new zE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=ND(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Ve(i,e){return i<e?-1:i>e?1:0}function bo(i,e,t){return i.length===e.length&&i.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=-62135596800,FE=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*FE);return new Vt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qE)throw new me($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Vt(0,0))}static max(){return new Ae(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="__name__";class Di{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(),s===void 0?s=e.length-t:s>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Di.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=Di.isNumericId(e),a=Di.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Di.extractNumericId(e).compare(Di.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return or.fromString(e.substring(4,e.length-2))}}class at extends Di{construct(e,t,s){return new at(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new me($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new at(t)}static emptyPath(){return new at([])}}const xD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Di{construct(e,t,s){return new $t(e,t,s)}static isValidIdentifier(e){return xD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HE}static keyField(){return new $t([HE])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new me($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new me($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new me($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else d==="`"?(h=!h,a++):d!=="."||h?(s+=d,a++):(l(),a++)}if(l(),h)throw new me($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(at.fromString(e))}static fromName(e){return new ge(at.fromString(e).popFirst(5))}static empty(){return new ge(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function MD(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(s===1e9?new Vt(t+1,0):new Vt(t,s));return new dr(a,ge.empty(),e)}function OD(i){return new dr(i.readTime,i.key,yu)}class dr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new dr(Ae.min(),ge.empty(),yu)}static max(){return new dr(Ae.max(),ge.empty(),yu)}}function VD(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(i.documentKey,e.documentKey),t!==0?t:Ve(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==kD)throw i;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.reject(t)}static resolve(e){return new Z((t,s)=>{t(e)})}static reject(e){return new Z((t,s)=>{s(e)})}static waitFor(e){return new Z((t,s)=>{let a=0,l=0,h=!1;e.forEach(d=>{++a,d.next(()=>{++l,h&&l===a&&t()},p=>s(p))}),h=!0,l===a&&t()})}static or(e){let t=Z.resolve(!1);for(const s of e)t=t.next(a=>a?Z.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new Z((s,a)=>{const l=e.length,h=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next(E=>{h[g]=E,++d,d===l&&s(h)},E=>a(E))}})}static doWhile(e,t){return new Z((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function PD(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Uo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.oe(s),this._e=s=>t.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}rf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=-1;function af(i){return i==null}function xh(i){return i===0&&1/i==-1/0}function UD(i){return typeof i=="number"&&Number.isInteger(i)&&!xh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="";function BD(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=GE(e)),e=jD(i.get(t),e);return GE(e)}function jD(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case OT:t+="";break;default:t+=l}}return t}function GE(i){return i+OT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ar(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function VT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bt=class op{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new op(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new op(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}},lh=class{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ur=class cs{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??cs.RED,this.left=a??cs.EMPTY,this.right=l??cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new cs(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return cs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return cs.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}};ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,s,a,l){return this}insert(e,t,s){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new KE(this.data.getIterator())}getIteratorFrom(e){return new KE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class KE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new xn([])}unionWith(e){let t=new kt($t.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new kT("Invalid base64 string: "+l):l}}(e);return new en(t)}static fromUint8Array(e){const t=function(a){let l="";for(let h=0;h<a.length;++h)l+=String.fromCharCode(a[h]);return l}(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const zD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(i){if(We(!!i),typeof i=="string"){let e=0;const t=zD.exec(i);if(We(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_t(i.seconds),nanos:_t(i.nanos)}}function _t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function pr(i){return typeof i=="string"?en.fromBase64String(i):en.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="server_timestamp",PT="__type__",UT="__previous_value__",BT="__local_write_time__";function $p(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[PT])===null||t===void 0?void 0:t.stringValue)===LT}function of(i){const e=i.mapValue.fields[UT];return $p(e)?of(e):e}function _u(i){const e=mr(i.mapValue.fields[BT].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t,s,a,l,h,d,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g}}const Mh="(default)";class vu{constructor(e,t){this.projectId=e,this.database=t||Mh}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="__type__",FD="__max__",uh={mapValue:{}},zT="__vector__",Oh="value";function gr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?$p(i)?4:GD(i)?9007199254740991:HD(i)?10:11:Ee()}function Vi(i,e){if(i===e)return!0;const t=gr(i);if(t!==gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _u(i).isEqual(_u(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const h=mr(a.timestampValue),d=mr(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,l){return pr(a.bytesValue).isEqual(pr(l.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,l){return _t(a.geoPointValue.latitude)===_t(l.geoPointValue.latitude)&&_t(a.geoPointValue.longitude)===_t(l.geoPointValue.longitude)}(i,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return _t(a.integerValue)===_t(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const h=_t(a.doubleValue),d=_t(l.doubleValue);return h===d?xh(h)===xh(d):isNaN(h)&&isNaN(d)}return!1}(i,e);case 9:return bo(i.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(a,l){const h=a.mapValue.fields||{},d=l.mapValue.fields||{};if(QE(h)!==QE(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!Vi(h[p],d[p])))return!1;return!0}(i,e);default:return Ee()}}function Eu(i,e){return(i.values||[]).find(t=>Vi(t,e))!==void 0}function Co(i,e){if(i===e)return 0;const t=gr(i),s=gr(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(i.booleanValue,e.booleanValue);case 2:return function(l,h){const d=_t(l.integerValue||l.doubleValue),p=_t(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return YE(i.timestampValue,e.timestampValue);case 4:return YE(_u(i),_u(e));case 5:return Ve(i.stringValue,e.stringValue);case 6:return function(l,h){const d=pr(l),p=pr(h);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),p=h.split("/");for(let g=0;g<d.length&&g<p.length;g++){const E=Ve(d[g],p[g]);if(E!==0)return E}return Ve(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,h){const d=Ve(_t(l.latitude),_t(h.latitude));return d!==0?d:Ve(_t(l.longitude),_t(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return WE(i.arrayValue,e.arrayValue);case 10:return function(l,h){var d,p,g,E;const A=l.fields||{},w=h.fields||{},D=(d=A[Oh])===null||d===void 0?void 0:d.arrayValue,O=(p=w[Oh])===null||p===void 0?void 0:p.arrayValue,G=Ve(((g=D==null?void 0:D.values)===null||g===void 0?void 0:g.length)||0,((E=O==null?void 0:O.values)===null||E===void 0?void 0:E.length)||0);return G!==0?G:WE(D,O)}(i.mapValue,e.mapValue);case 11:return function(l,h){if(l===uh.mapValue&&h===uh.mapValue)return 0;if(l===uh.mapValue)return 1;if(h===uh.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=h.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let A=0;A<p.length&&A<E.length;++A){const w=Ve(p[A],E[A]);if(w!==0)return w;const D=Co(d[p[A]],g[E[A]]);if(D!==0)return D}return Ve(p.length,E.length)}(i.mapValue,e.mapValue);default:throw Ee()}}function YE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ve(i,e);const t=mr(i),s=mr(e),a=Ve(t.seconds,s.seconds);return a!==0?a:Ve(t.nanos,s.nanos)}function WE(i,e){const t=i.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Co(t[a],s[a]);if(l)return l}return Ve(t.length,s.length)}function Ro(i){return lp(i)}function lp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=mr(t);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return pr(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ge.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=lp(l);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const h of s)l?l=!1:a+=",",a+=`${h}:${lp(t.fields[h])}`;return a+"}"}(i.mapValue):Ee()}function vh(i){switch(gr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(i);return e?16+vh(e):16;case 5:return 2*i.stringValue.length;case 6:return pr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+vh(l),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return Ar(s.fields,(l,h)=>{a+=l.length+vh(h)}),a}(i.mapValue);default:throw Ee()}}function up(i){return!!i&&"integerValue"in i}function eg(i){return!!i&&"arrayValue"in i}function XE(i){return!!i&&"nullValue"in i}function ZE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Eh(i){return!!i&&"mapValue"in i}function HD(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[jT])===null||t===void 0?void 0:t.stringValue)===zT}function au(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ar(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=au(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(i.arrayValue.values[t]);return e}return Object.assign({},i)}function GD(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===FD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=$t.emptyPath(),s={},a=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=d.popLast()}h?s[d.lastSegment()]=au(h):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Eh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ar(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new An(au(this.value))}}function qT(i){const e=[];return Ar(i.fields,(t,s)=>{const a=new $t([t]);if(Eh(s)){const l=qT(s.mapValue).fields;if(l.length===0)e.push(a);else for(const h of l)e.push(a.child(h))}else e.push(a)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,a,l,h,d){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new on(e,0,Ae.min(),Ae.min(),Ae.min(),An.empty(),0)}static newFoundDocument(e,t,s,a){return new on(e,1,t,Ae.min(),s,a,0)}static newNoDocument(e,t){return new on(e,2,t,Ae.min(),Ae.min(),An.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ae.min(),Ae.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.position=e,this.inclusive=t}}function JE(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const l=e[a],h=i.position[a];if(l.field.isKeyField()?s=ge.comparator(ge.fromName(h.referenceValue),t.key):s=Co(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function $E(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Vi(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t="asc"){this.field=e,this.dir=t}}function QD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{}class Ot extends FT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new YD(e,t,s):t==="array-contains"?new ZD(e,s):t==="in"?new JD(e,s):t==="not-in"?new $D(e,s):t==="array-contains-any"?new eN(e,s):new Ot(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new WD(e,s):new XD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Co(t,this.value)):t!==null&&gr(this.value)===gr(t)&&this.matchesComparison(Co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ki extends FT{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ki(e,t)}matches(e){return HT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function HT(i){return i.op==="and"}function GT(i){return KD(i)&&HT(i)}function KD(i){for(const e of i.filters)if(e instanceof ki)return!1;return!0}function cp(i){if(i instanceof Ot)return i.field.canonicalString()+i.op.toString()+Ro(i.value);if(GT(i))return i.filters.map(e=>cp(e)).join(",");{const e=i.filters.map(t=>cp(t)).join(",");return`${i.op}(${e})`}}function QT(i,e){return i instanceof Ot?function(s,a){return a instanceof Ot&&s.op===a.op&&s.field.isEqual(a.field)&&Vi(s.value,a.value)}(i,e):i instanceof ki?function(s,a){return a instanceof ki&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,h,d)=>l&&QT(h,a.filters[d]),!0):!1}(i,e):void Ee()}function KT(i){return i instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${Ro(t.value)}`}(i):i instanceof ki?function(t){return t.op.toString()+" {"+t.getFilters().map(KT).join(" ,")+"}"}(i):"Filter"}class YD extends Ot{constructor(e,t,s){super(e,t,s),this.key=ge.fromName(s.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class WD extends Ot{constructor(e,t){super(e,"in",t),this.keys=YT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XD extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=YT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YT(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ge.fromName(s.referenceValue))}class ZD extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eg(t)&&Eu(t.arrayValue,this.value)}}class JD extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}}class $D extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Eu(this.value.arrayValue,t)}}class eN extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Eu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t=null,s=[],a=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=h,this.endAt=d,this.le=null}}function e0(i,e=null,t=[],s=[],a=null,l=null,h=null){return new tN(i,e,t,s,a,l,h)}function tg(i){const e=Se(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>cp(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),af(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Ro(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Ro(s)).join(",")),e.le=t}return e.le}function ng(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!QD(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!QT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!$E(i.startAt,e.startAt)&&$E(i.endAt,e.endAt)}function hp(i){return ge.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t=null,s=[],a=[],l=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function nN(i,e,t,s,a,l,h,d){return new lf(i,e,t,s,a,l,h,d)}function WT(i){return new lf(i)}function t0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function iN(i){return i.collectionGroup!==null}function ou(i){const e=Se(i);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new kt($t.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new kh(l,s))}),t.has($t.keyField().canonicalString())||e.he.push(new kh($t.keyField(),s))}return e.he}function xi(i){const e=Se(i);return e.Pe||(e.Pe=sN(e,ou(i))),e.Pe}function sN(i,e){if(i.limitType==="F")return e0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new kh(a.field,l)});const t=i.endAt?new Vh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Vh(i.startAt.position,i.startAt.inclusive):null;return e0(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function fp(i,e,t){return new lf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function uf(i,e){return ng(xi(i),xi(e))&&i.limitType===e.limitType}function XT(i){return`${tg(xi(i))}|lt:${i.limitType}`}function mo(i){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>KT(a)).join(", ")}]`),af(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>Ro(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>Ro(a)).join(",")),`Target(${s})`}(xi(i))}; limitType=${i.limitType})`}function cf(i,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ge.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(i,e)&&function(s,a){for(const l of ou(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(h,d,p){const g=JE(h,d,p);return h.inclusive?g<=0:g<0}(s.startAt,ou(s),a)||s.endAt&&!function(h,d,p){const g=JE(h,d,p);return h.inclusive?g>=0:g>0}(s.endAt,ou(s),a))}(i,e)}function rN(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ZT(i){return(e,t)=>{let s=!1;for(const a of ou(i)){const l=aN(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function aN(i,e,t){const s=i.field.isKeyField()?ge.comparator(e.key,t.key):function(l,h,d){const p=h.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Co(p,g):Ee()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ar(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return VT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new bt(ge.comparator);function ys(){return oN}const JT=new bt(ge.comparator);function iu(...i){let e=JT;for(const t of i)e=e.insert(t.key,t);return e}function $T(i){let e=JT;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function sa(){return lu()}function eS(){return lu()}function lu(){return new ga(i=>i.toString(),(i,e)=>i.isEqual(e))}const lN=new bt(ge.comparator),uN=new kt(ge.comparator);function xe(...i){let e=uN;for(const t of i)e=e.add(t);return e}const cN=new kt(Ve);function hN(){return cN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function tS(i){return{integerValue:""+i}}function fN(i,e){return UD(e)?tS(e):ig(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this._=void 0}}function dN(i,e,t){return i instanceof Lh?function(a,l){const h={fields:{[PT]:{stringValue:LT},[BT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&$p(l)&&(l=of(l)),l&&(h.fields[UT]=l),{mapValue:h}}(t,e):i instanceof Au?iS(i,e):i instanceof Tu?sS(i,e):function(a,l){const h=nS(a,l),d=n0(h)+n0(a.Ie);return up(h)&&up(a.Ie)?tS(d):ig(a.serializer,d)}(i,e)}function mN(i,e,t){return i instanceof Au?iS(i,e):i instanceof Tu?sS(i,e):t}function nS(i,e){return i instanceof Ph?function(s){return up(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class Lh extends hf{}class Au extends hf{constructor(e){super(),this.elements=e}}function iS(i,e){const t=rS(e);for(const s of i.elements)t.some(a=>Vi(a,s))||t.push(s);return{arrayValue:{values:t}}}class Tu extends hf{constructor(e){super(),this.elements=e}}function sS(i,e){let t=rS(e);for(const s of i.elements)t=t.filter(a=>!Vi(a,s));return{arrayValue:{values:t}}}class Ph extends hf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function n0(i){return _t(i.integerValue||i.doubleValue)}function rS(i){return eg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function pN(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof Au&&a instanceof Au||s instanceof Tu&&a instanceof Tu?bo(s.elements,a.elements,Vi):s instanceof Ph&&a instanceof Ph?Vi(s.Ie,a.Ie):s instanceof Lh&&a instanceof Lh}(i.transform,e.transform)}class gN{constructor(e,t){this.version=e,this.transformResults=t}}class ci{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ff{}function aS(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new sg(i.key,ci.none()):new Du(i.key,i.data,ci.none());{const t=i.data,s=An.empty();let a=new kt($t.comparator);for(let l of e.fields)if(!a.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),a=a.add(l)}return new Tr(i.key,s,new xn(a.toArray()),ci.none())}}function yN(i,e,t){i instanceof Du?function(a,l,h){const d=a.value.clone(),p=s0(a.fieldTransforms,l,h.transformResults);d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Tr?function(a,l,h){if(!Ah(a.precondition,l))return void l.convertToUnknownDocument(h.version);const d=s0(a.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(oS(a)),p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(i,e,t):function(a,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function uu(i,e,t,s){return i instanceof Du?function(l,h,d,p){if(!Ah(l.precondition,h))return d;const g=l.value.clone(),E=r0(l.fieldTransforms,p,h);return g.setAll(E),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(i,e,t,s):i instanceof Tr?function(l,h,d,p){if(!Ah(l.precondition,h))return d;const g=r0(l.fieldTransforms,p,h),E=h.data;return E.setAll(oS(l)),E.setAll(g),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(A=>A.field))}(i,e,t,s):function(l,h,d){return Ah(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(i,e,t)}function _N(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),l=nS(s.transform,a||null);l!=null&&(t===null&&(t=An.empty()),t.set(s.field,l))}return t||null}function i0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&bo(s,a,(l,h)=>pN(l,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Du extends ff{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Tr extends ff{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function oS(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function s0(i,e,t){const s=new Map;We(i.length===t.length);for(let a=0;a<t.length;a++){const l=i[a],h=l.transform,d=e.data.field(l.field);s.set(l.field,mN(h,d,t[a]))}return s}function r0(i,e,t){const s=new Map;for(const a of i){const l=a.transform,h=t.data.field(a.field);s.set(a.field,dN(l,h,e))}return s}class sg extends ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vN extends ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&yN(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=uu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=uu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=eS();return this.mutations.forEach(a=>{const l=e.get(a.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(a.key)?null:d;const p=aS(h,d);p!==null&&s.set(a.key,p),h.isValidDocument()||h.convertToNoDocument(Ae.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,(t,s)=>i0(t,s))&&bo(this.baseMutations,e.baseMutations,(t,s)=>i0(t,s))}}class rg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){We(e.mutations.length===s.length);let a=function(){return lN}();const l=e.mutations;for(let h=0;h<l.length;h++)a=a.insert(l[h].key,s[h].version);return new rg(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Be;function SN(i){switch(i){case $.OK:return Ee();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Ee()}}function lS(i){if(i===void 0)return gs("GRPC error has no .code"),$.UNKNOWN;switch(i){case wt.OK:return $.OK;case wt.CANCELLED:return $.CANCELLED;case wt.UNKNOWN:return $.UNKNOWN;case wt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case wt.INTERNAL:return $.INTERNAL;case wt.UNAVAILABLE:return $.UNAVAILABLE;case wt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case wt.NOT_FOUND:return $.NOT_FOUND;case wt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case wt.ABORTED:return $.ABORTED;case wt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case wt.DATA_LOSS:return $.DATA_LOSS;default:return Ee()}}(Be=wt||(wt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=new or([4294967295,4294967295],0);function a0(i){const e=wN().encode(i),t=new bT;return t.update(e),new Uint8Array(t.digest())}function o0(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new or([t,s],0),new or([a,l],0)]}class ag{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new su(`Invalid padding: ${t}`);if(s<0)throw new su(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new su(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=or.fromNumber(this.Ee)}Ae(e,t,s){let a=e.add(t.multiply(or.fromNumber(s)));return a.compare(bN)===1&&(a=new or([a.getBits(0),a.getBits(1)],0)),a.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=a0(e),[s,a]=o0(t);for(let l=0;l<this.hashCount;l++){const h=this.Ae(s,a,l);if(!this.Re(h))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new ag(l,a,t);return s.forEach(d=>h.insert(d)),h}insert(e){if(this.Ee===0)return;const t=a0(e),[s,a]=o0(t);for(let l=0;l<this.hashCount;l++){const h=this.Ae(s,a,l);this.Ve(h)}}Ve(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new df(Ae.min(),a,new bt(Ve),ys(),xe())}}class Nu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Nu(s,t,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,s,a){this.me=e,this.removedTargetIds=t,this.key=s,this.fe=a}}class uS{constructor(e,t){this.targetId=e,this.ge=t}}class cS{constructor(e,t,s=en.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class l0{constructor(){this.pe=0,this.ye=u0(),this.we=en.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=xe(),t=xe(),s=xe();return this.ye.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ee()}}),new Nu(this.we,this.be,e,t,s)}Me(){this.Se=!1,this.ye=u0()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,We(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class CN{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ys(),this.$e=ch(),this.Ke=ch(),this.Ue=new bt(Ve)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const s=this.He(t);switch(e.state){case 0:this.Je(t)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(t);break;case 3:this.Je(t)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),s.Ce(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((s,a)=>{this.Je(a)&&t(a)})}Ze(e){const t=e.targetId,s=e.ge.count,a=this.Xe(t);if(a){const l=a.target;if(hp(l))if(s===0){const h=new ge(l.path);this.ze(t,h,on.newNoDocument(h,Ae.min()))}else We(s===1);else{const h=this.et(t);if(h!==s){const d=this.tt(e),p=d?this.nt(d,e,h):1;if(p!==0){this.Ye(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,g)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let h,d;try{h=pr(s).toUint8Array()}catch(p){if(p instanceof kT)return wo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new ag(h,a,l)}catch(p){return wo(p instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ee===0?null:d}nt(e,t,s){return t.ge.count===s-this.st(e,t.targetId)?0:2}st(e,t){const s=this.ke.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const h=this.ke.it(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),a++)}),a}ot(e){const t=new Map;this.qe.forEach((l,h)=>{const d=this.Xe(h);if(d){if(l.current&&hp(d.target)){const p=new ge(d.target.path);this._t(p).has(h)||this.ut(h,p)||this.ze(h,p,on.newNoDocument(p,e))}l.ve&&(t.set(h,l.Fe()),l.Me())}});let s=xe();this.Ke.forEach((l,h)=>{let d=!0;h.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(l))}),this.Qe.forEach((l,h)=>h.setReadTime(e));const a=new df(e,t,this.Ue,this.Qe,s);return this.Qe=ys(),this.$e=ch(),this.Ke=ch(),this.Ue=new bt(Ve),a}Ge(e,t){if(!this.Je(e))return;const s=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,s),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,s){if(!this.Je(e))return;const a=this.He(e);this.ut(e,t)?a.xe(t,1):a.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),s&&(this.Qe=this.Qe.insert(t,s))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new l0,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new kt(Ve),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new kt(Ve),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new l0),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function ch(){return new bt(ge.comparator)}function u0(){return new bt(ge.comparator)}const RN={asc:"ASCENDING",desc:"DESCENDING"},IN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DN={and:"AND",or:"OR"};class NN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dp(i,e){return i.useProto3Json||af(e)?e:{value:e}}function Uh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hS(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function xN(i,e){return Uh(i,e.toTimestamp())}function Mi(i){return We(!!i),Ae.fromTimestamp(function(t){const s=mr(t);return new Vt(s.seconds,s.nanos)}(i))}function og(i,e){return mp(i,e).canonicalString()}function mp(i,e){const t=function(a){return new at(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?t:t.child(e)}function fS(i){const e=at.fromString(i);return We(yS(e)),e}function pp(i,e){return og(i.databaseId,e.path)}function jm(i,e){const t=fS(e);if(t.get(1)!==i.databaseId.projectId)throw new me($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new me($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ge(mS(t))}function dS(i,e){return og(i.databaseId,e)}function MN(i){const e=fS(i);return e.length===4?at.emptyPath():mS(e)}function gp(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function mS(i){return We(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function c0(i,e,t){return{name:pp(i,e),fields:t.value.mapValue.fields}}function ON(i,e){let t;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,E){return g.useProto3Json?(We(E===void 0||typeof E=="string"),en.fromBase64String(E||"")):(We(E===void 0||E instanceof Buffer||E instanceof Uint8Array),en.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(g){const E=g.code===void 0?$.UNKNOWN:lS(g.code);return new me(E,g.message||"")}(h);t=new cS(s,a,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=jm(i,s.document.name),l=Mi(s.document.updateTime),h=s.document.createTime?Mi(s.document.createTime):Ae.min(),d=new An({mapValue:{fields:s.document.fields}}),p=on.newFoundDocument(a,l,h,d),g=s.targetIds||[],E=s.removedTargetIds||[];t=new Th(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=jm(i,s.document),l=s.readTime?Mi(s.readTime):Ae.min(),h=on.newNoDocument(a,l),d=s.removedTargetIds||[];t=new Th([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=jm(i,s.document),l=s.removedTargetIds||[];t=new Th([],l,a,null)}else{if(!("filter"in e))return Ee();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,h=new TN(a,l),d=s.targetId;t=new uS(d,h)}}return t}function VN(i,e){let t;if(e instanceof Du)t={update:c0(i,e.key,e.value)};else if(e instanceof sg)t={delete:pp(i,e.key)};else if(e instanceof Tr)t={update:c0(i,e.key,e.data),updateMask:FN(e.fieldMask)};else{if(!(e instanceof vN))return Ee();t={verify:pp(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const d=h.transform;if(d instanceof Lh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Au)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Tu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ph)return{fieldPath:h.field.canonicalString(),increment:d.Ie};throw Ee()}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:xN(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee()}(i,e.precondition)),t}function kN(i,e){return i&&i.length>0?(We(e!==void 0),i.map(t=>function(a,l){let h=a.updateTime?Mi(a.updateTime):Mi(l);return h.isEqual(Ae.min())&&(h=Mi(l)),new gN(h,a.transformResults||[])}(t,e))):[]}function LN(i,e){return{documents:[dS(i,e.path)]}}function PN(i,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=dS(i,a);const l=function(g){if(g.length!==0)return gS(ki.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(g){if(g.length!==0)return g.map(E=>function(w){return{field:po(w.field),direction:jN(w.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=dp(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:t,parent:a}}function UN(i){let e=MN(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){We(s===1);const E=t.from[0];E.allDescendants?a=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(A){const w=pS(A);return w instanceof ki&&GT(w)?w.getFilters():[w]}(t.where));let h=[];t.orderBy&&(h=function(A){return A.map(w=>function(O){return new kh(go(O.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(A){let w;return w=typeof A=="object"?A.value:A,af(w)?null:w}(t.limit));let p=null;t.startAt&&(p=function(A){const w=!!A.before,D=A.values||[];return new Vh(D,w)}(t.startAt));let g=null;return t.endAt&&(g=function(A){const w=!A.before,D=A.values||[];return new Vh(D,w)}(t.endAt)),nN(e,a,h,l,d,"F",p,g)}function BN(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pS(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=go(t.unaryFilter.field);return Ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=go(t.unaryFilter.field);return Ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=go(t.unaryFilter.field);return Ot.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(i):i.fieldFilter!==void 0?function(t){return Ot.create(go(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return ki.create(t.compositeFilter.filters.map(s=>pS(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(i):Ee()}function jN(i){return RN[i]}function zN(i){return IN[i]}function qN(i){return DN[i]}function po(i){return{fieldPath:i.canonicalString()}}function go(i){return $t.fromServerFormat(i.fieldPath)}function gS(i){return i instanceof Ot?function(t){if(t.op==="=="){if(ZE(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NAN"}};if(XE(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ZE(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NAN"}};if(XE(t.value))return{unaryFilter:{field:po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(t.field),op:zN(t.op),value:t.value}}}(i):i instanceof ki?function(t){const s=t.getFilters().map(a=>gS(a));return s.length===1?s[0]:{compositeFilter:{op:qN(t.op),filters:s}}}(i):Ee()}function FN(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,t,s,a,l=Ae.min(),h=Ae.min(),d=en.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.Tt=e}}function GN(i){const e=UN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?fp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.Tn=new KN}addToCollectionParentIndex(e,t){return this.Tn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(dr.min())}updateCollectionGroup(e,t,s){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class KN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new kt(at.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new kt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_S=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(_S,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Io(0)}static Un(){return new Io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="LruGarbageCollector",YN=1048576;function d0([i,e],[t,s]){const a=Ve(i,t);return a===0?Ve(e,s):a}class WN{constructor(e){this.Hn=e,this.buffer=new kt(d0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();d0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){le(f0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Uo(t)?le(f0,"Ignoring IndexedDB error during garbage collection: ",t):await Po(t)}await this.er(3e5)})}}class ZN{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(rf.ae);const s=new WN(t);return this.tr.forEachTarget(e,a=>s.Zn(a.sequenceNumber)).next(()=>this.tr.rr(e,a=>s.Zn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.tr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(h0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h0):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let s,a,l,h,d,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,h=Date.now(),this.nthSequenceNumber(e,a))).next(A=>(s=A,d=Date.now(),this.removeTargets(e,s,t))).next(A=>(l=A,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(g=Date.now(),fo()<=Oe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${a} in `+(d-h)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${A} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:A})))}}function JN(i,e){return new ZN(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.changes=new ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Z.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&uu(s.mutation,a,xn.empty(),Vt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,xe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=xe()){const a=sa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let h=iu();return l.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=sa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,xe()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,s,a){let l=ys();const h=lu(),d=function(){return lu()}();return t.forEach((p,g)=>{const E=s.get(g.key);a.has(g.key)&&(E===void 0||E.mutation instanceof Tr)?l=l.insert(g.key,g):E!==void 0?(h.set(g.key,E.mutation.getFieldMask()),uu(E.mutation,g,E.mutation.getFieldMask(),Vt.now())):h.set(g.key,xn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((g,E)=>h.set(g,E)),t.forEach((g,E)=>{var A;return d.set(g,new ex(E,(A=h.get(g))!==null&&A!==void 0?A:null))}),d))}recalculateAndSaveOverlays(e,t){const s=lu();let a=new bt((h,d)=>h-d),l=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let E=s.get(p)||xn.empty();E=d.applyToLocalView(g,E),s.set(p,E);const A=(a.get(d.batchId)||xe()).add(p);a=a.insert(d.batchId,A)})}).next(()=>{const h=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,E=p.value,A=eS();E.forEach(w=>{if(!l.has(w)){const D=aS(t.get(w),s.get(w));D!==null&&A.set(w,D),l=l.add(w)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,A))}return Z.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const h=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):Z.resolve(sa());let d=yu,p=l;return h.next(g=>Z.forEach(g,(E,A)=>(d<A.largestBatchId&&(d=A.largestBatchId),l.get(E)?Z.resolve():this.remoteDocumentCache.getEntry(e,E).next(w=>{p=p.insert(E,w)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,p,g,xe())).next(E=>({batchId:d,changes:$T(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next(s=>{let a=iu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let h=iu();return this.indexManager.getCollectionParents(e,l).next(d=>Z.forEach(d,p=>{const g=function(A,w){return new lf(w,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next(E=>{E.forEach((A,w)=>{h=h.insert(A,w)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(h=>{l.forEach((p,g)=>{const E=g.getKey();h.get(E)===null&&(h=h.insert(E,on.newInvalidDocument(E)))});let d=iu();return h.forEach((p,g)=>{const E=l.get(p);E!==void 0&&uu(E.mutation,g,xn.empty(),Vt.now()),cf(t,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Z.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Mi(a.createTime)}}(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(a){return{name:a.name,query:GN(a.bundledQuery),readTime:Mi(a.readTime)}}(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.overlays=new bt(ge.comparator),this.Rr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const s=sa();return Z.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.Et(e,t,l)}),Z.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Rr.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(s)),Z.resolve()}getOverlaysForCollection(e,t,s){const a=sa(),l=t.length+1,h=new ge(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return Z.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new bt((g,E)=>g-E);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let E=l.get(g.largestBatchId);E===null&&(E=sa(),l=l.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const d=sa(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>d.set(g,E)),!(d.size()>=a)););return Z.resolve(d)}Et(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.Rr.get(a.largestBatchId).delete(s.key);this.Rr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new AN(t,s));let l=this.Rr.get(t);l===void 0&&(l=xe(),this.Rr.set(t,l)),this.Rr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Vr=new kt(Ht.mr),this.gr=new kt(Ht.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.wr(new Ht(e,t))}br(e,t){e.forEach(s=>this.removeReference(s,t))}Sr(e){const t=new ge(new at([])),s=new Ht(t,e),a=new Ht(t,e+1),l=[];return this.gr.forEachInRange([s,a],h=>{this.wr(h),l.push(h.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ge(new at([])),s=new Ht(t,e),a=new Ht(t,e+1);let l=xe();return this.gr.forEachInRange([s,a],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Ht(e,0),s=this.Vr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ge.comparator(e.key,t.key)||Ve(e.Cr,t.Cr)}static pr(e,t){return Ve(e.Cr,t.Cr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new kt(Ht.mr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new EN(l,t,s,a);this.mutationQueue.push(h);for(const d of a)this.Mr=this.Mr.add(new Ht(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Z.resolve(h)}lookupMutationBatch(e,t){return Z.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Nr(s),l=a<0?0:a;return Z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Jp:this.Fr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),a=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([s,a],h=>{const d=this.Or(h.Cr);l.push(d)}),Z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kt(Ve);return t.forEach(a=>{const l=new Ht(a,0),h=new Ht(a,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,h],d=>{s=s.add(d.Cr)})}),Z.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;ge.isDocumentKey(l)||(l=l.child(""));const h=new Ht(new ge(l),0);let d=new kt(Ve);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Cr)),!0)},h),Z.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(s=>{const a=this.Or(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){We(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return Z.forEach(t.mutations,a=>{const l=new Ht(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,t){const s=new Ht(t,0),a=this.Mr.firstAfterOrEqual(s);return Z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.kr=e,this.docs=function(){return new bt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,h=this.kr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Z.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=ys();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():on.newInvalidDocument(a))}),Z.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=ys();const h=t.path,d=new ge(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||VD(OD(E),s)<=0||(a.has(E.key)||cf(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Z.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ee()}qr(e,t){return Z.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new ox(this)}getSize(e){return Z.resolve(this.size)}}class ox extends $N{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Ir.addEntry(e,a)):this.Ir.removeEntry(s)}),Z.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.persistence=e,this.Qr=new ga(t=>tg(t),ng),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.$r=0,this.Kr=new lg,this.targetCount=0,this.Ur=Io.Kn()}forEachTarget(e,t){return this.Qr.forEach((s,a)=>t(a)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$r&&(this.$r=t),Z.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Io(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.zn(t),Z.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.Qr.forEach((h,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.Qr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),Z.waitFor(l).next(()=>a)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const s=this.Qr.get(t)||null;return Z.resolve(s)}addMatchingKeys(e,t,s){return this.Kr.yr(t,s),Z.resolve()}removeMatchingKeys(e,t,s){this.Kr.br(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(h=>{l.push(a.markPotentiallyOrphaned(e,h))}),Z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Kr.vr(t);return Z.resolve(s)}containsKey(e,t){return Z.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new rf(0),this.zr=!1,this.zr=!0,this.jr=new sx,this.referenceDelegate=e(this),this.Hr=new lx(this),this.indexManager=new QN,this.remoteDocumentCache=function(a){return new ax(a)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new HN(t),this.Yr=new nx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ix,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Wr[e.toKey()];return s||(s=new rx(t,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,s){le("MemoryPersistence","Starting transaction:",e);const a=new ux(this.Gr.next());return this.referenceDelegate.Zr(),s(a).next(l=>this.referenceDelegate.Xr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}ei(e,t){return Z.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,t)))}}class ux extends LD{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.ti=new lg,this.ni=null}static ri(e){return new ug(e)}get ii(){if(this.ni)return this.ni;throw Ee()}addReference(e,t,s){return this.ti.addReference(s,t),this.ii.delete(s.toString()),Z.resolve()}removeReference(e,t,s){return this.ti.removeReference(s,t),this.ii.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Z.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(a=>this.ii.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.ii.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ii,s=>{const a=ge.fromPath(s);return this.si(e,a).next(l=>{l||t.removeEntry(a,Ae.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(s=>{s?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Z.or([()=>Z.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Bh{constructor(e,t){this.persistence=e,this.oi=new ga(s=>BD(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=JN(this,t)}static ri(e,t){return new Bh(e,t)}Zr(){}Xr(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}sr(e){let t=0;return this.rr(e,s=>{t++}).next(()=>t)}rr(e,t){return Z.forEach(this.oi,(s,a)=>this.ar(e,s,a).next(l=>l?Z.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.qr(e,h=>this.ar(e,h,t).next(d=>{d||(s++,l.removeEntry(h,Ae.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Z.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vh(e.data.value)),t}ar(e,t,s){return Z.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.oi.get(t);return Z.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Hi=s,this.Ji=a}static Yi(e,t){let s=xe(),a=xe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new cg(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return k1()?8:PD(HA())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.rs(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ss(e,t,a,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new cx;return this._s(e,t,h).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,h,d.size)})}).next(()=>l.result)}us(e,t,s,a){return s.documentReadCount<this.es?(fo()<=Oe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Z.resolve()):(fo()<=Oe.DEBUG&&le("QueryEngine","Query:",mo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ts*a?(fo()<=Oe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(t))):Z.resolve())}rs(e,t){if(t0(t))return Z.resolve(null);let s=xi(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=fp(t,null,"F"),s=xi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=xe(...l);return this.ns.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(t,d);return this.ls(t,g,h,p.readTime)?this.rs(e,fp(t,null,"F")):this.hs(e,g,t,p)}))})))}ss(e,t,s,a){return t0(t)||a.isEqual(Ae.min())?Z.resolve(null):this.ns.getDocuments(e,s).next(l=>{const h=this.cs(t,l);return this.ls(t,h,s,a)?Z.resolve(null):(fo()<=Oe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),mo(t)),this.hs(e,h,t,MD(a,yu)).next(d=>d))})}cs(e,t){let s=new kt(ZT(e));return t.forEach((a,l)=>{cf(e,l)&&(s=s.add(l))}),s}ls(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}_s(e,t,s){return fo()<=Oe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",mo(t)),this.ns.getDocumentsMatchingQuery(e,t,dr.min(),s)}hs(e,t,s,a){return this.ns.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="LocalStore",fx=3e8;class dx{constructor(e,t,s,a){this.persistence=e,this.Ps=t,this.serializer=a,this.Ts=new bt(Ve),this.Is=new ga(l=>tg(l),ng),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tx(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function mx(i,e,t,s){return new dx(i,e,t,s)}async function ES(i,e){const t=Se(i);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.As(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],d=[];let p=xe();for(const g of a){h.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of l){d.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:h,addedBatchIds:d}))})})}function px(i,e){const t=Se(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,p,g,E){const A=g.batch,w=A.keys();let D=Z.resolve();return w.forEach(O=>{D=D.next(()=>E.getEntry(p,O)).next(G=>{const z=g.docVersions.get(O);We(z!==null),G.version.compareTo(z)<0&&(A.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),E.addEntry(G)))})}),D.next(()=>d.mutationQueue.removeMutationBatch(p,A))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let p=xe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function AS(i){const e=Se(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function gx(i,e){const t=Se(i),s=e.snapshotVersion;let a=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.ds.newChangeBuffer({trackRemovals:!0});a=t.Ts;const d=[];e.targetChanges.forEach((E,A)=>{const w=a.get(A);if(!w)return;d.push(t.Hr.removeMatchingKeys(l,E.removedDocuments,A).next(()=>t.Hr.addMatchingKeys(l,E.addedDocuments,A)));let D=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(A)!==null?D=D.withResumeToken(en.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(E.resumeToken,s)),a=a.insert(A,D),function(G,z,W){return G.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=fx?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(w,D,E)&&d.push(t.Hr.updateTargetData(l,D))});let p=ys(),g=xe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),d.push(yx(l,h,e.documentUpdates).next(E=>{p=E.Vs,g=E.fs})),!s.isEqual(Ae.min())){const E=t.Hr.getLastRemoteSnapshotVersion(l).next(A=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,s));d.push(E)}return Z.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,g)).next(()=>p)}).then(l=>(t.Ts=a,l))}function yx(i,e,t){let s=xe(),a=xe();return t.forEach(l=>s=s.add(l)),e.getEntries(i,s).next(l=>{let h=ys();return t.forEach((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):le(hg,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{Vs:h,fs:a}})}function _x(i,e){const t=Se(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Jp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function vx(i,e){const t=Se(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Hr.getTargetData(s,e).next(l=>l?(a=l,Z.resolve(a)):t.Hr.allocateTargetId(s).next(h=>(a=new sr(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Hr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ts.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(s.targetId,s),t.Is.set(e,s.targetId)),s})}async function yp(i,e,t){const s=Se(i),a=s.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,a))}catch(h){if(!Uo(h))throw h;le(hg,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ts=s.Ts.remove(e),s.Is.delete(a.target)}function m0(i,e,t){const s=Se(i);let a=Ae.min(),l=xe();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,g,E){const A=Se(p),w=A.Is.get(E);return w!==void 0?Z.resolve(A.Ts.get(w)):A.Hr.getTargetData(g,E)}(s,h,xi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(h,d.targetId).next(p=>{l=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(h,e,t?a:Ae.min(),t?l:xe())).next(d=>(Ex(s,rN(e),d),{documents:d,gs:l})))}function Ex(i,e,t){let s=i.Es.get(e)||Ae.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),i.Es.set(e,s)}class p0{constructor(){this.activeTargetIds=hN()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ax{constructor(){this.ho=new p0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,s){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new p0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="ConnectivityMonitor";class y0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){le(g0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){le(g0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function _p(){return hh===null?hh=function(){return 268435456+Math.round(2147483648*Math.random())}():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="RestConnection",Sx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wx{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${s}/databases/${a}`,this.wo=this.databaseId.database===Mh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}bo(e,t,s,a,l){const h=_p(),d=this.So(e,t.toUriEncodedString());le(zm,`Sending RPC '${e}' ${h}:`,d,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,a,l),this.vo(e,d,p,s).then(g=>(le(zm,`Received RPC '${e}' ${h}: `,g),g),g=>{throw wo(zm,`RPC '${e}' ${h} failed with error: `,g,"url: ",d,"request:",s),g})}Co(e,t,s,a,l,h){return this.bo(e,t,s,a,l)}Do(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}So(e,t){const s=Sx[e];return`${this.po}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class Cx extends wx{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,s,a){const l=_p();return new Promise((h,d)=>{const p=new CT;p.setWithCredentials(!0),p.listenOnce(RT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case _h.NO_ERROR:const E=p.getResponseJson();le(rn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case _h.TIMEOUT:le(rn,`RPC '${e}' ${l} timed out`),d(new me($.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const A=p.getStatus();if(le(rn,`RPC '${e}' ${l} failed with status:`,A,"response text:",p.getResponseText()),A>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const D=w==null?void 0:w.error;if(D&&D.status&&D.message){const O=function(z){const W=z.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(W)>=0?W:$.UNKNOWN}(D.status);d(new me(O,D.message))}else d(new me($.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new me($.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{le(rn,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(a);le(rn,`RPC '${e}' ${l} sending request:`,a),p.send(t,"POST",g,s,15)})}Wo(e,t,s){const a=_p(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=NT(),d=DT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const E=l.join("");le(rn,`Creating RPC '${e}' stream ${a}: ${E}`,p);const A=h.createWebChannel(E,p);let w=!1,D=!1;const O=new bx({Fo:z=>{D?le(rn,`Not sending because RPC '${e}' stream ${a} is closed:`,z):(w||(le(rn,`Opening RPC '${e}' stream ${a} transport.`),A.open(),w=!0),le(rn,`RPC '${e}' stream ${a} sending:`,z),A.send(z))},Mo:()=>A.close()}),G=(z,W,ne)=>{z.listen(W,te=>{try{ne(te)}catch(_e){setTimeout(()=>{throw _e},0)}})};return G(A,nu.EventType.OPEN,()=>{D||(le(rn,`RPC '${e}' stream ${a} transport opened.`),O.Qo())}),G(A,nu.EventType.CLOSE,()=>{D||(D=!0,le(rn,`RPC '${e}' stream ${a} transport closed`),O.Ko())}),G(A,nu.EventType.ERROR,z=>{D||(D=!0,wo(rn,`RPC '${e}' stream ${a} transport errored:`,z),O.Ko(new me($.UNAVAILABLE,"The operation could not be completed")))}),G(A,nu.EventType.MESSAGE,z=>{var W;if(!D){const ne=z.data[0];We(!!ne);const te=ne,_e=(te==null?void 0:te.error)||((W=te[0])===null||W===void 0?void 0:W.error);if(_e){le(rn,`RPC '${e}' stream ${a} received error:`,_e);const fe=_e.status;let Re=function(b){const x=wt[b];if(x!==void 0)return lS(x)}(fe),L=_e.message;Re===void 0&&(Re=$.INTERNAL,L="Unknown error status: "+fe+" with message "+_e.message),D=!0,O.Ko(new me(Re,L)),A.close()}else le(rn,`RPC '${e}' stream ${a} received:`,ne),O.Uo(ne)}}),G(d,IT.STAT_EVENT,z=>{z.stat===ap.PROXY?le(rn,`RPC '${e}' stream ${a} detected buffering proxy`):z.stat===ap.NOPROXY&&le(rn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.$o()},0),O}}function qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(i){return new NN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=s,this.zo=a,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),a=Math.max(0,t-s);a>0&&le("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,a,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="PersistentStream";class SS{constructor(e,t,s,a,l,h,d,p){this.Ti=e,this.n_=s,this.r_=a,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new TS(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(gs(t.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.i_===t&&this.V_(s,a)},s=>{e(()=>{const a=new me($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(a)})})}V_(e,t){const s=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(a=>{s(()=>this.m_(a))}),this.stream.onMessage(a=>{s(()=>++this.__==1?this.g_(a):this.onNext(a))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return le(_0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(le(_0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rx extends SS{constructor(e,t,s,a,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,h),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=ON(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?Mi(h.readTime):Ae.min()}(e);return this.listener.p_(t,s)}y_(e){const t={};t.database=gp(this.serializer),t.addTarget=function(l,h){let d;const p=h.target;if(d=hp(p)?{documents:LN(l,p)}:{query:PN(l,p).ht},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=hS(l,h.resumeToken);const g=dp(l,h.expectedCount);g!==null&&(d.expectedCount=g)}else if(h.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Uh(l,h.snapshotVersion.toTimestamp());const g=dp(l,h.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const s=BN(this.serializer,e);s&&(t.labels=s),this.I_(t)}w_(e){const t={};t.database=gp(this.serializer),t.removeTarget=e,this.I_(t)}}class Ix extends SS{constructor(e,t,s,a,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,h),this.serializer=l}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=kN(e.writeResults,e.commitTime),s=Mi(e.commitTime);return this.listener.v_(s,t)}C_(){const e={};e.database=gp(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>VN(this.serializer,s))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{}class Nx extends Dx{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.F_=!1}M_(){if(this.F_)throw new me($.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.bo(e,mp(t,s),a,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me($.UNKNOWN,l.toString())})}Co(e,t,s,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Co(e,mp(t,s),a,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new me($.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class xx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(gs(t),this.N_=!1):le("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="RemoteStore";class Mx{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(h=>{s.enqueueAndForget(async()=>{ya(this)&&(le(ua,"Restarting streams for network reachability change."),await async function(p){const g=Se(p);g.W_.add(4),await xu(g),g.j_.set("Unknown"),g.W_.delete(4),await pf(g)}(this))})}),this.j_=new xx(s,a)}}async function pf(i){if(ya(i))for(const e of i.G_)await e(!0)}async function xu(i){for(const e of i.G_)await e(!1)}function wS(i,e){const t=Se(i);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),pg(t)?mg(t):Bo(t).c_()&&dg(t,e))}function fg(i,e){const t=Se(i),s=Bo(t);t.U_.delete(e),s.c_()&&bS(t,e),t.U_.size===0&&(s.c_()?s.P_():ya(t)&&t.j_.set("Unknown"))}function dg(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bo(i).y_(e)}function bS(i,e){i.H_.Ne(e),Bo(i).w_(e)}function mg(i){i.H_=new CN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.U_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Bo(i).start(),i.j_.B_()}function pg(i){return ya(i)&&!Bo(i).u_()&&i.U_.size>0}function ya(i){return Se(i).W_.size===0}function CS(i){i.H_=void 0}async function Ox(i){i.j_.set("Online")}async function Vx(i){i.U_.forEach((e,t)=>{dg(i,e)})}async function kx(i,e){CS(i),pg(i)?(i.j_.q_(e),mg(i)):i.j_.set("Unknown")}async function Lx(i,e,t){if(i.j_.set("Online"),e instanceof cS&&e.state===2&&e.cause)try{await async function(a,l){const h=l.cause;for(const d of l.targetIds)a.U_.has(d)&&(await a.remoteSyncer.rejectListen(d,h),a.U_.delete(d),a.H_.removeTarget(d))}(i,e)}catch(s){le(ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await jh(i,s)}else if(e instanceof Th?i.H_.We(e):e instanceof uS?i.H_.Ze(e):i.H_.je(e),!t.isEqual(Ae.min()))try{const s=await AS(i.localStore);t.compareTo(s)>=0&&await function(l,h){const d=l.H_.ot(h);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.U_.get(g);E&&l.U_.set(g,E.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,g)=>{const E=l.U_.get(p);if(!E)return;l.U_.set(p,E.withResumeToken(en.EMPTY_BYTE_STRING,E.snapshotVersion)),bS(l,p);const A=new sr(E.target,p,g,E.sequenceNumber);dg(l,A)}),l.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(s){le(ua,"Failed to raise snapshot:",s),await jh(i,s)}}async function jh(i,e,t){if(!Uo(e))throw e;i.W_.add(1),await xu(i),i.j_.set("Offline"),t||(t=()=>AS(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{le(ua,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await pf(i)})}function RS(i,e){return e().catch(t=>jh(i,t,e))}async function gf(i){const e=Se(i),t=yr(e);let s=e.K_.length>0?e.K_[e.K_.length-1].batchId:Jp;for(;Px(e);)try{const a=await _x(e.localStore,s);if(a===null){e.K_.length===0&&t.P_();break}s=a.batchId,Ux(e,a)}catch(a){await jh(e,a)}IS(e)&&DS(e)}function Px(i){return ya(i)&&i.K_.length<10}function Ux(i,e){i.K_.push(e);const t=yr(i);t.c_()&&t.b_&&t.S_(e.mutations)}function IS(i){return ya(i)&&!yr(i).u_()&&i.K_.length>0}function DS(i){yr(i).start()}async function Bx(i){yr(i).C_()}async function jx(i){const e=yr(i);for(const t of i.K_)e.S_(t.mutations)}async function zx(i,e,t){const s=i.K_.shift(),a=rg.from(s,e,t);await RS(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await gf(i)}async function qx(i,e){e&&yr(i).b_&&await async function(s,a){if(function(h){return SN(h)&&h!==$.ABORTED}(a.code)){const l=s.K_.shift();yr(s).h_(),await RS(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await gf(s)}}(i,e),IS(i)&&DS(i)}async function v0(i,e){const t=Se(i);t.asyncQueue.verifyOperationInProgress(),le(ua,"RemoteStore received new credentials");const s=ya(t);t.W_.add(3),await xu(t),s&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await pf(t)}async function Fx(i,e){const t=Se(i);e?(t.W_.delete(2),await pf(t)):e||(t.W_.add(2),await xu(t),t.j_.set("Unknown"))}function Bo(i){return i.J_||(i.J_=function(t,s,a){const l=Se(t);return l.M_(),new Rx(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{xo:Ox.bind(null,i),No:Vx.bind(null,i),Lo:kx.bind(null,i),p_:Lx.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),pg(i)?mg(i):i.j_.set("Unknown")):(await i.J_.stop(),CS(i))})),i.J_}function yr(i){return i.Y_||(i.Y_=function(t,s,a){const l=Se(t);return l.M_(),new Ix(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:Bx.bind(null,i),Lo:qx.bind(null,i),D_:jx.bind(null,i),v_:zx.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await gf(i)):(await i.Y_.stop(),i.K_.length>0&&(le(ua,`Stopping write stream with ${i.K_.length} pending writes`),i.K_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const h=Date.now()+s,d=new gg(e,t,h,a,l);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(i,e){if(gs("AsyncQueue",`${e}: ${i}`),Uo(i))return new me($.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{static emptySet(e){return new vo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ge.comparator(t.key,s.key):(t,s)=>ge.comparator(t.key,s.key),this.keyedMap=iu(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.Z_=new bt(ge.comparator)}track(e){const t=e.doc.key,s=this.Z_.get(t);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(t):e.type===1&&s.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ee():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class Do{constructor(e,t,s,a,l,h,d,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,a,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new Do(e,t,vo.emptySet(t),h,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Gx{constructor(){this.queries=A0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,s){const a=Se(t),l=a.queries;a.queries=A0(),l.forEach((h,d)=>{for(const p of d.ta)p.onError(s)})})(this,new me($.ABORTED,"Firestore shutting down"))}}function A0(){return new ga(i=>XT(i),uf)}async function Qx(i,e){const t=Se(i);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.na()&&e.ra()&&(s=2):(l=new Hx,s=e.ra()?0:1);try{switch(s){case 0:l.ea=await t.onListen(a,!0);break;case 1:l.ea=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(h){const d=yg(h,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&_g(t)}async function Kx(i,e){const t=Se(i),s=e.query;let a=3;const l=t.queries.get(s);if(l){const h=l.ta.indexOf(e);h>=0&&(l.ta.splice(h,1),l.ta.length===0?a=e.ra()?0:1:!l.na()&&e.ra()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Yx(i,e){const t=Se(i);let s=!1;for(const a of e){const l=a.query,h=t.queries.get(l);if(h){for(const d of h.ta)d.oa(a)&&(s=!0);h.ea=a}}s&&_g(t)}function Wx(i,e,t){const s=Se(i),a=s.queries.get(e);if(a)for(const l of a.ta)l.onError(t);s.queries.delete(e)}function _g(i){i.ia.forEach(e=>{e.next()})}var vp,T0;(T0=vp||(vp={}))._a="default",T0.Cache="cache";class Xx{constructor(e,t,s){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Do(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const s=t!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.key=e}}class xS{constructor(e){this.key=e}}class Zx{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=xe(),this.mutatedKeys=xe(),this.ya=ZT(e),this.wa=new vo(this.ya)}get ba(){return this.fa}Sa(e,t){const s=t?t.Da:new E0,a=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,h=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((E,A)=>{const w=a.get(E),D=cf(this.query,A)?A:null,O=!!w&&this.mutatedKeys.has(w.key),G=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let z=!1;w&&D?w.data.isEqual(D.data)?O!==G&&(s.track({type:3,doc:D}),z=!0):this.va(w,D)||(s.track({type:2,doc:D}),z=!0,(p&&this.ya(D,p)>0||g&&this.ya(D,g)<0)&&(d=!0)):!w&&D?(s.track({type:0,doc:D}),z=!0):w&&!D&&(s.track({type:1,doc:w}),z=!0,(p||g)&&(d=!0)),z&&(D?(h=h.add(D),l=G?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{wa:h,Da:s,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const h=e.Da.X_();h.sort((E,A)=>function(D,O){const G=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return G(D)-G(O)}(E.type,A.type)||this.ya(E.doc,A.doc)),this.Ca(s),a=a!=null&&a;const d=t&&!a?this.Fa():[],p=this.pa.size===0&&this.current&&!a?1:0,g=p!==this.ga;return this.ga=p,h.length!==0||g?{snapshot:new Do(this.query,e.wa,l,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new E0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=xe(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const t=[];return e.forEach(s=>{this.pa.has(s)||t.push(new xS(s))}),this.pa.forEach(s=>{e.has(s)||t.push(new NS(s))}),t}Oa(e){this.fa=e.gs,this.pa=xe();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Do.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const vg="SyncEngine";class Jx{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class $x{constructor(e){this.key=e,this.Ba=!1}}class eM{constructor(e,t,s,a,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new ga(d=>XT(d),uf),this.qa=new Map,this.Qa=new Set,this.$a=new bt(ge.comparator),this.Ka=new Map,this.Ua=new lg,this.Wa={},this.Ga=new Map,this.za=Io.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function tM(i,e,t=!0){const s=PS(i);let a;const l=s.ka.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Na()):a=await MS(s,e,t,!0),a}async function nM(i,e){const t=PS(i);await MS(t,e,!0,!1)}async function MS(i,e,t,s){const a=await vx(i.localStore,xi(e)),l=a.targetId,h=i.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await iM(i,e,l,h==="current",a.resumeToken)),i.isPrimaryClient&&t&&wS(i.remoteStore,a),d}async function iM(i,e,t,s,a){i.Ha=(A,w,D)=>async function(G,z,W,ne){let te=z.view.Sa(W);te.ls&&(te=await m0(G.localStore,z.query,!1).then(({documents:L})=>z.view.Sa(L,te)));const _e=ne&&ne.targetChanges.get(z.targetId),fe=ne&&ne.targetMismatches.get(z.targetId)!=null,Re=z.view.applyChanges(te,G.isPrimaryClient,_e,fe);return w0(G,z.targetId,Re.Ma),Re.snapshot}(i,A,w,D);const l=await m0(i.localStore,e,!0),h=new Zx(e,l.gs),d=h.Sa(l.documents),p=Nu.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",a),g=h.applyChanges(d,i.isPrimaryClient,p);w0(i,t,g.Ma);const E=new Jx(e,t,h);return i.ka.set(e,E),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),g.snapshot}async function sM(i,e,t){const s=Se(i),a=s.ka.get(e),l=s.qa.get(a.targetId);if(l.length>1)return s.qa.set(a.targetId,l.filter(h=>!uf(h,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await yp(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&fg(s.remoteStore,a.targetId),Ep(s,a.targetId)}).catch(Po)):(Ep(s,a.targetId),await yp(s.localStore,a.targetId,!0))}async function rM(i,e){const t=Se(i),s=t.ka.get(e),a=t.qa.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),fg(t.remoteStore,s.targetId))}async function aM(i,e,t){const s=dM(i);try{const a=await function(h,d){const p=Se(h),g=Vt.now(),E=d.reduce((D,O)=>D.add(O.key),xe());let A,w;return p.persistence.runTransaction("Locally write mutations","readwrite",D=>{let O=ys(),G=xe();return p.ds.getEntries(D,E).next(z=>{O=z,O.forEach((W,ne)=>{ne.isValidDocument()||(G=G.add(W))})}).next(()=>p.localDocuments.getOverlayedDocuments(D,O)).next(z=>{A=z;const W=[];for(const ne of d){const te=_N(ne,A.get(ne.key).overlayedDocument);te!=null&&W.push(new Tr(ne.key,te,qT(te.value.mapValue),ci.exists(!0)))}return p.mutationQueue.addMutationBatch(D,g,W,d)}).next(z=>{w=z;const W=z.applyToLocalDocumentSet(A,G);return p.documentOverlayCache.saveOverlays(D,z.batchId,W)})}).then(()=>({batchId:w.batchId,changes:$T(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,d,p){let g=h.Wa[h.currentUser.toKey()];g||(g=new bt(Ve)),g=g.insert(d,p),h.Wa[h.currentUser.toKey()]=g}(s,a.batchId,t),await Mu(s,a.changes),await gf(s.remoteStore)}catch(a){const l=yg(a,"Failed to persist write");t.reject(l)}}async function OS(i,e){const t=Se(i);try{const s=await gx(t.localStore,e);e.targetChanges.forEach((a,l)=>{const h=t.Ka.get(l);h&&(We(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.Ba=!0:a.modifiedDocuments.size>0?We(h.Ba):a.removedDocuments.size>0&&(We(h.Ba),h.Ba=!1))}),await Mu(t,s,e)}catch(s){await Po(s)}}function S0(i,e,t){const s=Se(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.ka.forEach((l,h)=>{const d=h.view.sa(e);d.snapshot&&a.push(d.snapshot)}),function(h,d){const p=Se(h);p.onlineState=d;let g=!1;p.queries.forEach((E,A)=>{for(const w of A.ta)w.sa(d)&&(g=!0)}),g&&_g(p)}(s.eventManager,e),a.length&&s.La.p_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function oM(i,e,t){const s=Se(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Ka.get(e),l=a&&a.key;if(l){let h=new bt(ge.comparator);h=h.insert(l,on.newNoDocument(l,Ae.min()));const d=xe().add(l),p=new df(Ae.min(),new Map,new bt(Ve),h,d);await OS(s,p),s.$a=s.$a.remove(l),s.Ka.delete(e),Eg(s)}else await yp(s.localStore,e,!1).then(()=>Ep(s,e,t)).catch(Po)}async function lM(i,e){const t=Se(i),s=e.batch.batchId;try{const a=await px(t.localStore,e);kS(t,s,null),VS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Mu(t,a)}catch(a){await Po(a)}}async function uM(i,e,t){const s=Se(i);try{const a=await function(h,d){const p=Se(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,d).next(A=>(We(A!==null),E=A.keys(),p.mutationQueue.removeMutationBatch(g,A))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);kS(s,e,t),VS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Mu(s,a)}catch(a){await Po(a)}}function VS(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function kS(i,e,t){const s=Se(i);let a=s.Wa[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Wa[s.currentUser.toKey()]=a}}function Ep(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),t&&i.La.Ja(s,t);i.qa.delete(e),i.isPrimaryClient&&i.Ua.Sr(e).forEach(s=>{i.Ua.containsKey(s)||LS(i,s)})}function LS(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(fg(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ka.delete(t),Eg(i))}function w0(i,e,t){for(const s of t)s instanceof NS?(i.Ua.addReference(s.key,e),cM(i,s)):s instanceof xS?(le(vg,"Document no longer in limbo: "+s.key),i.Ua.removeReference(s.key,e),i.Ua.containsKey(s.key)||LS(i,s.key)):Ee()}function cM(i,e){const t=e.key,s=t.path.canonicalString();i.$a.get(t)||i.Qa.has(s)||(le(vg,"New document in limbo: "+t),i.Qa.add(s),Eg(i))}function Eg(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new ge(at.fromString(e)),s=i.za.next();i.Ka.set(s,new $x(t)),i.$a=i.$a.insert(t,s),wS(i.remoteStore,new sr(xi(WT(t.path)),s,"TargetPurposeLimboResolution",rf.ae))}}async function Mu(i,e,t){const s=Se(i),a=[],l=[],h=[];s.ka.isEmpty()||(s.ka.forEach((d,p)=>{h.push(s.Ha(p,e,t).then(g=>{var E;if((g||t)&&s.isPrimaryClient){const A=g?!g.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(g){a.push(g);const A=cg.Yi(p.targetId,g);l.push(A)}}))}),await Promise.all(h),s.La.p_(a),await async function(p,g){const E=Se(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Z.forEach(g,w=>Z.forEach(w.Hi,D=>E.persistence.referenceDelegate.addReference(A,w.targetId,D)).next(()=>Z.forEach(w.Ji,D=>E.persistence.referenceDelegate.removeReference(A,w.targetId,D)))))}catch(A){if(!Uo(A))throw A;le(hg,"Failed to update sequence numbers: "+A)}for(const A of g){const w=A.targetId;if(!A.fromCache){const D=E.Ts.get(w),O=D.snapshotVersion,G=D.withLastLimboFreeSnapshotVersion(O);E.Ts=E.Ts.insert(w,G)}}}(s.localStore,l))}async function hM(i,e){const t=Se(i);if(!t.currentUser.isEqual(e)){le(vg,"User change. New user:",e.toKey());const s=await ES(t.localStore,e);t.currentUser=e,function(l,h){l.Ga.forEach(d=>{d.forEach(p=>{p.reject(new me($.CANCELLED,h))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Mu(t,s.Rs)}}function fM(i,e){const t=Se(i),s=t.Ka.get(e);if(s&&s.Ba)return xe().add(s.key);{let a=xe();const l=t.qa.get(e);if(!l)return a;for(const h of l){const d=t.ka.get(h);a=a.unionWith(d.view.ba)}return a}}function PS(i){const e=Se(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=OS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oM.bind(null,e),e.La.p_=Yx.bind(null,e.eventManager),e.La.Ja=Wx.bind(null,e.eventManager),e}function dM(i){const e=Se(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uM.bind(null,e),e}class zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return mx(this.persistence,new hx,e.initialUser,this.serializer)}Xa(e){return new vS(ug.ri,this.serializer)}Za(e){return new Ax}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zh.provider={build:()=>new zh};class mM extends zh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){We(this.persistence.referenceDelegate instanceof Bh);const s=this.persistence.referenceDelegate.garbageCollector;return new XN(s,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new vS(s=>Bh.ri(s,t),this.serializer)}}class Ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>S0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=hM.bind(null,this.syncEngine),await Fx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Gx}()}createDatastore(e){const t=mf(e.databaseInfo.databaseId),s=function(l){return new Cx(l)}(e.databaseInfo);return function(l,h,d,p){return new Nx(l,h,d,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,h,d){return new Mx(s,a,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>S0(this.syncEngine,t,0),function(){return y0.D()?new y0:new Tx}())}createSyncEngine(e,t){return function(a,l,h,d,p,g,E){const A=new eM(a,l,h,d,p,g);return E&&(A.ja=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Se(a);le(ua,"RemoteStore shutting down."),l.W_.add(5),await xu(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="FirestoreClient";class gM{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=an.UNAUTHENTICATED,this.clientId=MT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{le(_r,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(le(_r,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=yg(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Fm(i,e){i.asyncQueue.verifyOperationInProgress(),le(_r,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await ES(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function b0(i,e){i.asyncQueue.verifyOperationInProgress();const t=await yM(i);le(_r,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(s=>v0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>v0(e.remoteStore,a)),i._onlineComponents=e}async function yM(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){le(_r,"Using user provided OfflineComponentProvider");try{await Fm(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===$.FAILED_PRECONDITION||a.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;wo("Error using user provided cache. Falling back to memory cache: "+t),await Fm(i,new zh)}}else le(_r,"Using default OfflineComponentProvider"),await Fm(i,new mM(void 0));return i._offlineComponents}async function US(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(le(_r,"Using user provided OnlineComponentProvider"),await b0(i,i._uninitializedComponentsProvider._online)):(le(_r,"Using default OnlineComponentProvider"),await b0(i,new Ap))),i._onlineComponents}function _M(i){return US(i).then(e=>e.syncEngine)}async function vM(i){const e=await US(i),t=e.eventManager;return t.onListen=tM.bind(null,e.syncEngine),t.onUnlisten=sM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rM.bind(null,e.syncEngine),t}function EM(i,e,t={}){const s=new lr;return i.asyncQueue.enqueueAndForget(async()=>function(l,h,d,p,g){const E=new pM({next:w=>{E.su(),h.enqueueAndForget(()=>Kx(l,A)),w.fromCache&&p.source==="server"?g.reject(new me($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(w)},error:w=>g.reject(w)}),A=new Xx(d,E,{includeMetadataChanges:!0,Ta:!0});return Qx(l,A)}(await vM(i),i.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(i,e,t){if(!t)throw new me($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function AM(i,e,t,s){if(e===!0&&s===!0)throw new me($.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function R0(i){if(!ge.isDocumentKey(i))throw new me($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function I0(i){if(ge.isDocumentKey(i))throw new me($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ag(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ee()}function ca(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new me($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ag(i);throw new me($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="firestore.googleapis.com",D0=!0;class N0{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new me($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zS,this.ssl=D0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:D0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YN)throw new me($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BS((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new me($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new me($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new me($.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yf{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new wD;switch(s.type){case"firstParty":return new ID(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=C0.get(t);s&&(le("ComponentProvider","Removing Datastore"),C0.delete(t),s.terminate())}(this),Promise.resolve()}}function TM(i,e,t,s={}){var a;const l=(i=ca(i,yf))._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:i._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==zS&&l.host!==d&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:s});if(!So(p,h)&&(i._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=an.MOCK_USER;else{g=FA(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new me($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new an(A)}i._authCredentials=new bD(new xT(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _f(this.firestore,e,this._query)}}class $n{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class cr extends _f{constructor(e,t,s){super(e,t,WT(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new ge(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function SM(i,e,...t){if(i=ei(i),jS("collection","path",e),i instanceof yf){const s=at.fromString(e,...t);return I0(s),new cr(i,null,s)}{if(!(i instanceof $n||i instanceof cr))throw new me($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...t));return I0(s),new cr(i.firestore,null,s)}}function Tg(i,e,...t){if(i=ei(i),arguments.length===1&&(e=MT.newId()),jS("doc","path",e),i instanceof yf){const s=at.fromString(e,...t);return R0(s),new $n(i,null,new ge(s))}{if(!(i instanceof $n||i instanceof cr))throw new me($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...t));return R0(s),new $n(i.firestore,i instanceof cr?i.converter:null,new ge(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="AsyncQueue";class M0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new TS(this,"async_queue_retry"),this.bu=()=>{const s=qm();s&&le(x0,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=e;const t=qm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=qm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new lr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Uo(e))throw e;le(x0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const a=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(s);throw gs("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.pu=!1,s))));return this.Su=t,t}enqueueAfterDelay(e,t,s){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const a=gg.createAndSchedule(this,e,t,s,l=>this.Fu(l));return this.fu.push(a),a}Du(){this.gu&&Ee()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Ou extends yf{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new M0,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new M0(e),this._firestoreClient=void 0,await e}}}function wM(i,e){const t=typeof i=="object"?i:Gp(),s=typeof i=="string"?i:Mh,a=ko(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=zA("firestore");l&&TM(a,...l)}return a}function qS(i){if(i._terminated)throw new me($.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||bM(i),i._firestoreClient}function bM(i){var e,t,s;const a=i._freezeSettings(),l=function(d,p,g,E){return new qD(d,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,BS(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new gM(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._byteString=e}static fromBase64String(e){try{return new No(en.fromBase64String(e))}catch(t){throw new me($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new No(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=/^__.*__$/;class RM{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Du(e,this.data,t,this.fieldTransforms)}}class FS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function HS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Cg{constructor(e,t,s,a,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:s,Qu:!1});return a.$u(e),a}Ku(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.ku({path:s,Qu:!1});return a.Bu(),a}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return qh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(HS(this.Lu)&&CM.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class IM{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||mf(e)}ju(e,t,s,a=!1){return new Cg({Lu:e,methodName:t,zu:s,path:$t.emptyPath(),Qu:!1,Gu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GS(i){const e=i._freezeSettings(),t=mf(i._databaseId);return new IM(i._databaseId,!!e.ignoreUndefinedProperties,t)}function DM(i,e,t,s,a,l={}){const h=i.ju(l.merge||l.mergeFields?2:0,e,t,a);Rg("Data must be an object, but it was:",h,s);const d=QS(s,h);let p,g;if(l.merge)p=new xn(h.fieldMask),g=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const A of l.mergeFields){const w=Tp(e,A,t);if(!h.contains(w))throw new me($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);YS(E,w)||E.push(w)}p=new xn(E),g=h.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,g=h.fieldTransforms;return new RM(new An(d),p,g)}class Ef extends Sg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ef}}function NM(i,e,t,s){const a=i.ju(1,e,t);Rg("Data must be an object, but it was:",a,s);const l=[],h=An.empty();Ar(s,(p,g)=>{const E=Ig(e,p,t);g=ei(g);const A=a.Ku(E);if(g instanceof Ef)l.push(E);else{const w=Af(g,A);w!=null&&(l.push(E),h.set(E,w))}});const d=new xn(l);return new FS(h,d,a.fieldTransforms)}function xM(i,e,t,s,a,l){const h=i.ju(1,e,t),d=[Tp(e,s,t)],p=[a];if(l.length%2!=0)throw new me($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)d.push(Tp(e,l[w])),p.push(l[w+1]);const g=[],E=An.empty();for(let w=d.length-1;w>=0;--w)if(!YS(g,d[w])){const D=d[w];let O=p[w];O=ei(O);const G=h.Ku(D);if(O instanceof Ef)g.push(D);else{const z=Af(O,G);z!=null&&(g.push(D),E.set(D,z))}}const A=new xn(g);return new FS(E,A,h.fieldTransforms)}function Af(i,e){if(KS(i=ei(i)))return Rg("Unsupported field value:",e,i),QS(i,e);if(i instanceof Sg)return function(s,a){if(!HS(a.Lu))throw a.Wu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Wu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,a){const l=[];let h=0;for(const d of s){let p=Af(d,a.Uu(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(i,e)}return function(s,a){if((s=ei(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return fN(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Vt.fromDate(s);return{timestampValue:Uh(a.serializer,l)}}if(s instanceof Vt){const l=new Vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uh(a.serializer,l)}}if(s instanceof wg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof No)return{bytesValue:hS(a.serializer,s._byteString)};if(s instanceof $n){const l=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw a.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:og(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof bg)return function(h,d){return{mapValue:{fields:{[jT]:{stringValue:zT},[Oh]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw d.Wu("VectorValues must only contain numeric values.");return ig(d.serializer,g)})}}}}}}(s,a);throw a.Wu(`Unsupported field value: ${Ag(s)}`)}(i,e)}function QS(i,e){const t={};return VT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ar(i,(s,a)=>{const l=Af(a,e.qu(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function KS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Vt||i instanceof wg||i instanceof No||i instanceof $n||i instanceof Sg||i instanceof bg)}function Rg(i,e,t){if(!KS(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const s=Ag(t);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function Tp(i,e,t){if((e=ei(e))instanceof vf)return e._internalPath;if(typeof e=="string")return Ig(i,e);throw qh("Field path arguments must be of type string or ",i,!1,void 0,t)}const MM=new RegExp("[~\\*/\\[\\]]");function Ig(i,e,t){if(e.search(MM)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new vf(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function qh(i,e,t,s,a){const l=s&&!s.isEmpty(),h=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${a}`),p+=")"),new me($.INVALID_ARGUMENT,d+i+p)}function YS(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(XS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OM extends WS{data(){return super.data()}}function XS(i,e){return typeof e=="string"?Ig(i,e):e instanceof vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new me($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kM{convertValue(e,t="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ar(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,a;const l=(a=(s=(t=e.fields)===null||t===void 0?void 0:t[Oh].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(h=>_t(h.doubleValue));return new bg(l)}convertGeoPoint(e){return new wg(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=of(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=mr(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=at.fromString(e);We(yS(s));const a=new vu(s.get(1),s.get(3)),l=new ge(s.popFirst(5));return a.isEqual(t)||gs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(i,e,t){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PM extends WS{constructor(e,t,s,a,l,h){super(e,t,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(XS("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Sh extends PM{data(e={}){return super.data(e)}}class UM{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new fh(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Sh(this._firestore,this._userDataWriter,s.key,s,new fh(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(d=>{const p=new Sh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new fh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new Sh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new fh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,E=-1;return d.type!==0&&(g=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),E=h.indexOf(d.doc.key)),{type:BM(d.type),doc:p,oldIndex:g,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BM(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}class jM extends kM{constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}function zM(i){i=ca(i,_f);const e=ca(i.firestore,Ou),t=qS(e),s=new jM(e);return VM(i._query),EM(t,i._query).then(a=>new UM(e,s,i,a))}function qM(i,e,t,...s){i=ca(i,$n);const a=ca(i.firestore,Ou),l=GS(a);let h;return h=typeof(e=ei(e))=="string"||e instanceof vf?xM(l,"updateDoc",i._key,e,t,s):NM(l,"updateDoc",i._key,e),Dg(a,[h.toMutation(i._key,ci.exists(!0))])}function FM(i){return Dg(ca(i.firestore,Ou),[new sg(i._key,ci.none())])}function HM(i,e){const t=ca(i.firestore,Ou),s=Tg(i),a=LM(i.converter,e);return Dg(t,[DM(GS(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,ci.exists(!1))]).then(()=>s)}function Dg(i,e){return function(s,a){const l=new lr;return s.asyncQueue.enqueueAndForget(async()=>aM(await _M(s),a,l)),l.promise}(qS(i),e)}(function(e,t=!0){(function(a){Lo=a})($A),ps(new Oi("firestore",(s,{instanceIdentifier:a,options:l})=>{const h=s.getProvider("app").getImmediate(),d=new Ou(new CD(s.getProvider("auth-internal")),new DD(h,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new me($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(g.options.projectId,E)}(h,a),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Jn(BE,jE,e),Jn(BE,jE,"esm2017")})();var O0={};const V0="@firebase/database",k0="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZS="";function GM(i){ZS=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Jt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:pu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Es(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QM(e)}}catch{}return new KM},ra=JS("localStorage"),YM=JS("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new tf("@firebase/database"),WM=function(){let i=1;return function(){return i++}}(),$S=function(i){const e=G1(i),t=new F1;t.update(e);const s=t.digest();return zp.encodeByteArray(s)},Vu=function(...i){let e="";for(let t=0;t<i.length;t++){const s=i[t];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Vu.apply(null,s):typeof s=="object"?e+=Jt(s):e+=s,e+=" "}return e};let cu=null,L0=!0;const XM=function(i,e){re(!0,"Can't turn on custom loggers persistently."),Eo.logLevel=Oe.VERBOSE,cu=Eo.log.bind(Eo)},ln=function(...i){if(L0===!0&&(L0=!1,cu===null&&YM.get("logging_enabled")===!0&&XM()),cu){const e=Vu.apply(null,i);cu(e)}},ku=function(i){return function(...e){ln(i,...e)}},Sp=function(...i){const e="FIREBASE INTERNAL ERROR: "+Vu(...i);Eo.error(e)},_s=function(...i){const e=`FIREBASE FATAL ERROR: ${Vu(...i)}`;throw Eo.error(e),new Error(e)},On=function(...i){const e="FIREBASE WARNING: "+Vu(...i);Eo.warn(e)},ZM=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&On("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ew=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},JM=function(i){if(document.readyState==="complete")i();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},xo="[MIN_NAME]",ha="[MAX_NAME]",jo=function(i,e){if(i===e)return 0;if(i===xo||e===ha)return-1;if(e===xo||i===ha)return 1;{const t=P0(i),s=P0(e);return t!==null?s!==null?t-s===0?i.length-e.length:t-s:-1:s!==null?1:i<e?-1:1}},$M=function(i,e){return i===e?0:i<e?-1:1},Jl=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+Jt(e))},Ng=function(i){if(typeof i!="object"||i===null)return Jt(i);const e=[];for(const s in i)e.push(s);e.sort();let t="{";for(let s=0;s<e.length;s++)s!==0&&(t+=","),t+=Jt(e[s]),t+=":",t+=Ng(i[e[s]]);return t+="}",t},tw=function(i,e){const t=i.length;if(t<=e)return[i];const s=[];for(let a=0;a<t;a+=e)a+e>t?s.push(i.substring(a,t)):s.push(i.substring(a,a+e));return s};function ti(i,e){for(const t in i)i.hasOwnProperty(t)&&e(t,i[t])}const nw=function(i){re(!ew(i),"Invalid JSON number");const e=11,t=52,s=(1<<e-1)-1;let a,l,h,d,p;i===0?(l=0,h=0,a=1/i===-1/0?1:0):(a=i<0,i=Math.abs(i),i>=Math.pow(2,1-s)?(d=Math.min(Math.floor(Math.log(i)/Math.LN2),s),l=d+s,h=Math.round(i*Math.pow(2,t-d)-Math.pow(2,t))):(l=0,h=Math.round(i/Math.pow(2,1-s-t))));const g=[];for(p=t;p;p-=1)g.push(h%2?1:0),h=Math.floor(h/2);for(p=e;p;p-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const E=g.join("");let A="";for(p=0;p<64;p+=8){let w=parseInt(E.substr(p,8),2).toString(16);w.length===1&&(w="0"+w),A=A+w}return A.toLowerCase()},eO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},tO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},nO=new RegExp("^-?(0*)\\d{1,10}$"),iO=-2147483648,sO=2147483647,P0=function(i){if(nO.test(i)){const e=Number(i);if(e>=iO&&e<=sO)return e}return null},Lu=function(i){try{i()}catch(e){setTimeout(()=>{const t=e.stack||"";throw On("Exception was thrown by user callback.",t),e},Math.floor(0))}},rO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hu=function(i,e){const t=setTimeout(i,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,JA(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){On(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(ln("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',On(e)}}class wh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}wh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="5",iw="v",sw="s",rw="r",aw="f",ow=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lw="ls",uw="p",wp="ac",cw="websocket",hw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t,s,a,l=!1,h="",d=!1,p=!1,g=null){this.secure=t,this.namespace=s,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=h,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ra.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ra.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function lO(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function dw(i,e,t){re(typeof e=="string","typeof type must == string"),re(typeof t=="object","typeof params must == object");let s;if(e===cw)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===hw)s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);lO(i)&&(t.ns=i.namespace);const a=[];return ti(t,(l,h)=>{a.push(l+"="+h)}),s+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.counters_={}}incrementCounter(e,t=1){Es(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return w1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm={},Gm={};function Mg(i){const e=i.toString();return Hm[e]||(Hm[e]=new uO),Hm[e]}function cO(i,e){const t=i.toString();return Gm[t]||(Gm[t]=e()),Gm[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<s.length;++a)s[a]&&Lu(()=>{this.onMessage_(s[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="start",fO="close",dO="pLPCommand",mO="pRTLPCB",mw="id",pw="pw",gw="ser",pO="cb",gO="seg",yO="ts",_O="d",vO="dframe",yw=1870,_w=30,EO=yw-_w,AO=25e3,TO=3e4;class yo{constructor(e,t,s,a,l,h,d){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=a,this.authToken=l,this.transportSessionId=h,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ku(e),this.stats_=Mg(t),this.urlFn=p=>(this.appCheckToken&&(p[wp]=this.appCheckToken),dw(t,hw,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new hO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(TO)),JM(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Og((...l)=>{const[h,d,p,g,E]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===U0)this.id=d,this.password=p;else if(h===fO)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...l)=>{const[h,d]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(h,d)},()=>{this.onClosed_()},this.urlFn);const s={};s[U0]="t",s[gw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[pO]=this.scriptTagHolder.uniqueCallbackIdentifier),s[iw]=xg,this.transportSessionId&&(s[sw]=this.transportSessionId),this.lastSessionId&&(s[lw]=this.lastSessionId),this.applicationId&&(s[uw]=this.applicationId),this.appCheckToken&&(s[wp]=this.appCheckToken),typeof location<"u"&&location.hostname&&ow.test(location.hostname)&&(s[rw]=aw);const a=this.urlFn(s);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yo.forceAllow_=!0}static forceDisallow(){yo.forceDisallow_=!0}static isAvailable(){return yo.forceAllow_?!0:!yo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!eO()&&!tO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=BA(t),a=tw(s,EO);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const s={};s[vO]="t",s[mw]=e,s[pw]=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Jt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Og{constructor(e,t,s,a){this.onDisconnect=s,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=WM(),window[dO+this.uniqueCallbackIdentifier]=e,window[mO+this.uniqueCallbackIdentifier]=t,this.myIFrame=Og.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(d){ln("frame writing exception"),d.stack&&ln(d.stack),ln(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ln("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[mw]=this.myID,e[pw]=this.myPW,e[gw]=this.currentSerial;let t=this.urlFn(e),s="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_w+s.length<=yw;){const h=this.pendingSegs.shift();s=s+"&"+gO+a+"="+h.seg+"&"+yO+a+"="+h.ts+"&"+_O+a+"="+h.d,a++}return t=t+s,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(s,Math.floor(AO)),l=()=>{clearTimeout(a),s()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const a=s.readyState;(!a||a==="loaded"||a==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{ln("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=16384,wO=45e3;let Fh=null;typeof MozWebSocket<"u"?Fh=MozWebSocket:typeof WebSocket<"u"&&(Fh=WebSocket);class li{constructor(e,t,s,a,l,h,d){this.connId=e,this.applicationId=s,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ku(this.connId),this.stats_=Mg(t),this.connURL=li.connectionURL_(t,h,d,a,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,a,l){const h={};return h[iw]=xg,typeof location<"u"&&location.hostname&&ow.test(location.hostname)&&(h[rw]=aw),t&&(h[sw]=t),s&&(h[lw]=s),a&&(h[wp]=a),l&&(h[uw]=l),dw(e,cw,h)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ra.set("previous_websocket_failure",!0);try{let s;V1(),this.mySock=new Fh(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const a=s.message||s.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const a=s.message||s.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){li.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Fh!==null&&!li.forceDisallow_}static previouslyFailed(){return ra.isInMemoryStorage||ra.get("previous_websocket_failure")===!0}markConnectionHealthy(){ra.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const s=pu(t);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(re(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const s=this.extractFrameCount_(t);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const t=Jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=tw(t,SO);s.length>1&&this.sendString_(String(s.length));for(let a=0;a<s.length;a++)this.sendString_(s[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(wO))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}li.responsesRequiredToBeHealthy=2;li.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{static get ALL_TRANSPORTS(){return[yo,li]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=li&&li.isAvailable();let s=t&&!li.previouslyFailed();if(e.webSocketOnly&&(t||On("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[li];else{const a=this.transports_=[];for(const l of Su.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);Su.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Su.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=6e4,CO=5e3,RO=10*1024,IO=100*1024,Qm="t",B0="d",DO="s",j0="r",NO="e",z0="o",q0="a",F0="n",H0="p",xO="h";class MO{constructor(e,t,s,a,l,h,d,p,g,E){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=h,this.onReady_=d,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ku("c:"+this.id+":"),this.transportManager_=new Su(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,s)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=hu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>IO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>RO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qm in e){const t=e[Qm];t===q0?this.upgradeIfSecondaryHealthy_():t===j0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===z0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Jl("t",e),s=Jl("d",e);if(t==="c")this.onSecondaryControl_(s);else if(t==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:H0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:q0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:F0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Jl("t",e),s=Jl("d",e);t==="c"?this.onControl_(s):t==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Jl(Qm,e);if(B0 in e){const s=e[B0];if(t===xO){const a=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===F0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===DO?this.onConnectionShutdown_(s):t===j0?this.onReset_(s):t===NO?Sp("Server Error: "+s):t===z0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Sp("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),xg!==s&&On("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),hu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:H0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ra.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{put(e,t,s,a){}merge(e,t,s,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.allowedEvents_=e,this.listeners_={},re(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let a=0;a<s.length;a++)s[a].callback.apply(s[a].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const a=this.getInitialEvent(e);a&&t.apply(s,a)}off(e,t,s){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!s||s===a[l].context)){a.splice(l,1);return}}validateEventType_(e){re(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends Ew{static getInstance(){return new Hh}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!GA()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return re(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=32,Q0=768;class rt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let s=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[s]=this.pieces_[a],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function $e(){return new rt("")}function je(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function vr(i){return i.pieces_.length-i.pieceNum_}function st(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new rt(i.pieces_,e)}function Aw(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function OO(i){let e="";for(let t=i.pieceNum_;t<i.pieces_.length;t++)i.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[t])));return e||"/"}function Tw(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function Sw(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let t=i.pieceNum_;t<i.pieces_.length-1;t++)e.push(i.pieces_[t]);return new rt(e,0)}function Qt(i,e){const t=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)t.push(i.pieces_[s]);if(e instanceof rt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)t.push(e.pieces_[s]);else{const s=e.split("/");for(let a=0;a<s.length;a++)s[a].length>0&&t.push(s[a])}return new rt(t,0)}function ke(i){return i.pieceNum_>=i.pieces_.length}function Zn(i,e){const t=je(i),s=je(e);if(t===null)return e;if(t===s)return Zn(st(i),st(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function ww(i,e){if(vr(i)!==vr(e))return!1;for(let t=i.pieceNum_,s=e.pieceNum_;t<=i.pieces_.length;t++,s++)if(i.pieces_[t]!==e.pieces_[s])return!1;return!0}function ui(i,e){let t=i.pieceNum_,s=e.pieceNum_;if(vr(i)>vr(e))return!1;for(;t<i.pieces_.length;){if(i.pieces_[t]!==e.pieces_[s])return!1;++t,++s}return!0}class VO{constructor(e,t){this.errorPrefix_=t,this.parts_=Tw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=ef(this.parts_[s]);bw(this)}}function kO(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=ef(e),bw(i)}function LO(i){const e=i.parts_.pop();i.byteLength_-=ef(e),i.parts_.length>0&&(i.byteLength_-=1)}function bw(i){if(i.byteLength_>Q0)throw new Error(i.errorPrefix_+"has a key path longer than "+Q0+" bytes ("+i.byteLength_+").");if(i.parts_.length>G0)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+G0+") or object contains a cycle "+na(i))}function na(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Ew{static getInstance(){return new Vg}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return re(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=1e3,PO=60*5*1e3,K0=30*1e3,UO=1.3,BO=3e4,jO="server_kill",Y0=3;class ds extends vw{constructor(e,t,s,a,l,h,d,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=d,this.authOverride_=p,this.id=ds.nextPersistentConnectionId_++,this.log_=ku("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$l,this.maxReconnectDelay_=PO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Hh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(Jt(l)),re(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),s&&(this.requestCBHash_[a]=s)}get(e){this.initConnection_();const t=new Fp,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:h=>{const d=h.d;h.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,s,a){this.initConnection_();const l=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),re(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const d={onComplete:a,hashFn:t,query:e,tag:s};this.listens.get(h).set(l,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)})}sendListen_(e){const t=e.query,s=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+s+" for "+a);const l={p:s},h="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(h,l,d=>{const p=d.d,g=d.s;ds.warnOnListenWarnings_(p,t),(this.listens.get(s)&&this.listens.get(s).get(a))===e&&(this.log_("listen response",d),g!=="ok"&&this.removeListen_(s,a),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Es(e,"w")){const s=To(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();On(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||z1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=K0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=j1(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(t,s,a=>{const l=a.s,h=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,s=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)})}unlisten(e,t){const s=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+a),re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,a)&&this.connected_&&this.sendUnlisten_(s,a,e._queryObject,t)}sendUnlisten_(e,t,s,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},h="n";a&&(l.q=s,l.t=a),this.sendRequest(h,l)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,a){const l={p:t,d:s};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(e,t,s,a){this.putInternal("p",e,t,s,a)}merge(e,t,s,a){this.putInternal("m",e,t,s,a)}putInternal(e,t,s,a,l){this.initConnection_();const h={p:t,d:s};l!==void 0&&(h.h=l),this.outstandingPuts_.push({action:e,request:h,onComplete:a}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,s=>{if(s.s!=="ok"){const l=s.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Jt(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Sp("Unrecognized action received from server: "+Jt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){re(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BO&&(this.reconnectDelay_=$l),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*UO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+ds.nextConnectionId_++,l=this.lastSessionId;let h=!1,d=null;const p=function(){d?d.close():(h=!0,s())},g=function(A){re(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(A)};this.realtime_={close:p,sendRequest:g};const E=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[A,w]=await Promise.all([this.authTokenProvider_.getToken(E),this.appCheckTokenProvider_.getToken(E)]);h?ln("getToken() completed but was canceled"):(ln("getToken() completed. Creating connection."),this.authToken_=A&&A.accessToken,this.appCheckToken_=w&&w.token,d=new MO(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,D=>{On(D+" ("+this.repoInfo_.toString()+")"),this.interrupt(jO)},l))}catch(A){this.log_("Failed to get token: "+A),h||(this.repoInfo_.nodeAdmin&&On(A),p())}}}interrupt(e){ln("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ln("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vE(this.interruptReasons_)&&(this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;t?s=t.map(l=>Ng(l)).join("$"):s="default";const a=this.removeListen_(e,s);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const s=new rt(e).toString();let a;if(this.listens.has(s)){const l=this.listens.get(s);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(s)}else a=void 0;return a}onAuthRevoked_(e,t){ln("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Y0&&(this.reconnectDelay_=K0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){ln("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Y0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+ZS.replace(/\./g,"-")]=1,GA()?e["framework.cordova"]=1:O1()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Hh.getInstance().currentlyOnline();return vE(this.interruptReasons_)&&e}}ds.nextPersistentConnectionId_=0;ds.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ze(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new ze(xo,e),a=new ze(xo,t);return this.compare(s,a)!==0}minPost(){return ze.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh;class Cw extends Tf{static get __EMPTY_NODE(){return dh}static set __EMPTY_NODE(e){dh=e}compare(e,t){return jo(e.name,t.name)}isDefinedOn(e){throw Vo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ze.MIN}maxPost(){return new ze(ha,dh)}makePost(e,t){return re(typeof e=="string","KeyIndex indexValue must always be a string."),new ze(e,dh)}toString(){return".key"}}const Ao=new Cw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,s,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=t?s(e.key,t):1,a&&(h*=-1),h<0)this.isReverse_?e=e.left:e=e.right;else if(h===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Gt{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Gt.RED,this.left=a??Tn.EMPTY_NODE,this.right=l??Tn.EMPTY_NODE}copy(e,t,s,a,l){return new Gt(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,a;if(s=this,t(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),t(e,s.key)===0){if(s.right.isEmpty())return Tn.EMPTY_NODE;a=s.right.min_(),s=s.copy(a.key,a.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Gt.RED=!0;Gt.BLACK=!1;class zO{copy(e,t,s,a,l){return this}insert(e,t,s){return new Gt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Tn{constructor(e,t=Tn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Tn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Gt.BLACK,null,null))}remove(e){return new Tn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gt.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),t===0)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,a=null;for(;!s.isEmpty();)if(t=this.comparator_(e,s.key),t===0){if(s.left.isEmpty())return a?a.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else t<0?s=s.left:t>0&&(a=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mh(this.root_,null,this.comparator_,!0,e)}}Tn.EMPTY_NODE=new zO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(i,e){return jo(i.name,e.name)}function kg(i,e){return jo(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bp;function FO(i){bp=i}const Rw=function(i){return typeof i=="number"?"number:"+nw(i):"string:"+i},Iw=function(i){if(i.isLeafNode()){const e=i.val();re(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Es(e,".sv"),"Priority must be a string or number.")}else re(i===bp||i.isEmpty(),"priority of unexpected type.");re(i===bp||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W0;class Ft{static set __childrenNodeConstructor(e){W0=e}static get __childrenNodeConstructor(){return W0}constructor(e,t=Ft.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,re(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Iw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ft(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ke(e)?this:je(e)===".priority"?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=je(e);return s===null?t:t.isEmpty()&&s!==".priority"?this:(re(s!==".priority"||vr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(st(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Rw(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=nw(this.value_):e+=this.value_,this.lazyHash_=$S(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ft.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ft.__childrenNodeConstructor?-1:(re(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,a=Ft.VALUE_TYPE_ORDER.indexOf(t),l=Ft.VALUE_TYPE_ORDER.indexOf(s);return re(a>=0,"Unknown leaf type: "+t),re(l>=0,"Unknown leaf type: "+s),a===l?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Ft.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dw,Nw;function HO(i){Dw=i}function GO(i){Nw=i}class QO extends Tf{compare(e,t){const s=e.node.getPriority(),a=t.node.getPriority(),l=s.compareTo(a);return l===0?jo(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ze.MIN}maxPost(){return new ze(ha,new Ft("[PRIORITY-POST]",Nw))}makePost(e,t){const s=Dw(e);return new ze(t,new Ft("[PRIORITY-POST]",s))}toString(){return".priority"}}const cn=new QO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=Math.log(2);class YO{constructor(e){const t=l=>parseInt(Math.log(l)/KO,10),s=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=s(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gh=function(i,e,t,s){i.sort(e);const a=function(p,g){const E=g-p;let A,w;if(E===0)return null;if(E===1)return A=i[p],w=t?t(A):A,new Gt(w,A.node,Gt.BLACK,null,null);{const D=parseInt(E/2,10)+p,O=a(p,D),G=a(D+1,g);return A=i[D],w=t?t(A):A,new Gt(w,A.node,Gt.BLACK,O,G)}},l=function(p){let g=null,E=null,A=i.length;const w=function(O,G){const z=A-O,W=A;A-=O;const ne=a(z+1,W),te=i[z],_e=t?t(te):te;D(new Gt(_e,te.node,G,null,ne))},D=function(O){g?(g.left=O,g=O):(E=O,g=O)};for(let O=0;O<p.count;++O){const G=p.nextBitIsOne(),z=Math.pow(2,p.count-(O+1));G?w(z,Gt.BLACK):(w(z,Gt.BLACK),w(z,Gt.RED))}return E},h=new YO(i.length),d=l(h);return new Tn(s||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Km;const co={};class hs{static get Default(){return re(co&&cn,"ChildrenNode.ts has not been loaded"),Km=Km||new hs({".priority":co},{".priority":cn}),Km}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=To(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Tn?t:null}hasIndex(e){return Es(this.indexSet_,e.toString())}addIndex(e,t){re(e!==Ao,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let a=!1;const l=t.getIterator(ze.Wrap);let h=l.getNext();for(;h;)a=a||e.isDefinedOn(h.node),s.push(h),h=l.getNext();let d;a?d=Gh(s,e.getCompare()):d=co;const p=e.toString(),g=Object.assign({},this.indexSet_);g[p]=e;const E=Object.assign({},this.indexes_);return E[p]=d,new hs(E,g)}addToIndexes(e,t){const s=Rh(this.indexes_,(a,l)=>{const h=To(this.indexSet_,l);if(re(h,"Missing index implementation for "+l),a===co)if(h.isDefinedOn(e.node)){const d=[],p=t.getIterator(ze.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&d.push(g),g=p.getNext();return d.push(e),Gh(d,h.getCompare())}else return co;else{const d=t.get(e.name);let p=a;return d&&(p=p.remove(new ze(e.name,d))),p.insert(e,e.node)}});return new hs(s,this.indexSet_)}removeFromIndexes(e,t){const s=Rh(this.indexes_,a=>{if(a===co)return a;{const l=t.get(e.name);return l?a.remove(new ze(e.name,l)):a}});return new hs(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu;class Ye{static get EMPTY_NODE(){return eu||(eu=new Ye(new Tn(kg),null,hs.Default))}constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Iw(this.priorityNode_),this.children_.isEmpty()&&re(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eu}updatePriority(e){return this.children_.isEmpty()?this:new Ye(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?eu:t}}getChild(e){const t=je(e);return t===null?this:this.getImmediateChild(t).getChild(st(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(re(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const s=new ze(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(s,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(s,this.children_));const h=a.isEmpty()?eu:this.priorityNode_;return new Ye(a,h,l)}}updateChild(e,t){const s=je(e);if(s===null)return t;{re(je(e)!==".priority"||vr(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(s).updateChild(st(e),t);return this.updateImmediateChild(s,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,a=0,l=!0;if(this.forEachChild(cn,(h,d)=>{t[h]=d.val(e),s++,l&&Ye.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!e&&l&&a<2*s){const h=[];for(const d in t)h[d]=t[d];return h}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Rw(this.getPriority().val())+":"),this.forEachChild(cn,(t,s)=>{const a=s.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":$S(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const a=this.resolveIndex_(s);if(a){const l=a.getPredecessorKey(new ze(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ze(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ze(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,ze.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,ze.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Pu?-1:0}withIndex(e){if(e===Ao||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ye(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ao||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const s=this.getIterator(cn),a=t.getIterator(cn);let l=s.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=s.getNext(),h=a.getNext()}return l===null&&h===null}else return!1;else return!1}}resolveIndex_(e){return e===Ao?null:this.indexMap_.get(e.toString())}}Ye.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class WO extends Ye{constructor(){super(new Tn(kg),Ye.EMPTY_NODE,hs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ye.EMPTY_NODE}isEmpty(){return!1}}const Pu=new WO;Object.defineProperties(ze,{MIN:{value:new ze(xo,Ye.EMPTY_NODE)},MAX:{value:new ze(ha,Pu)}});Cw.__EMPTY_NODE=Ye.EMPTY_NODE;Ft.__childrenNodeConstructor=Ye;FO(Pu);GO(Pu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=!0;function un(i,e=null){if(i===null)return Ye.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),re(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const t=i;return new Ft(t,un(e))}if(!(i instanceof Array)&&XO){const t=[];let s=!1;if(ti(i,(h,d)=>{if(h.substring(0,1)!=="."){const p=un(d);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),t.push(new ze(h,p)))}}),t.length===0)return Ye.EMPTY_NODE;const l=Gh(t,qO,h=>h.name,kg);if(s){const h=Gh(t,cn.getCompare());return new Ye(l,un(e),new hs({".priority":h},{".priority":cn}))}else return new Ye(l,un(e),hs.Default)}else{let t=Ye.EMPTY_NODE;return ti(i,(s,a)=>{if(Es(i,s)&&s.substring(0,1)!=="."){const l=un(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(s,l))}}),t.updatePriority(un(e))}}HO(un);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO extends Tf{constructor(e){super(),this.indexPath_=e,re(!ke(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),a=this.extractChild(t.node),l=s.compareTo(a);return l===0?jo(e.name,t.name):l}makePost(e,t){const s=un(e),a=Ye.EMPTY_NODE.updateChild(this.indexPath_,s);return new ze(t,a)}maxPost(){const e=Ye.EMPTY_NODE.updateChild(this.indexPath_,Pu);return new ze(ha,e)}toString(){return Tw(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO extends Tf{compare(e,t){const s=e.node.compareTo(t.node);return s===0?jo(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ze.MIN}maxPost(){return ze.MAX}makePost(e,t){const s=un(e);return new ze(t,s)}toString(){return".value"}}const $O=new JO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(i){return{type:"value",snapshotNode:i}}function tV(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function nV(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function X0(i,e,t){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:t}}function iV(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return re(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return re(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xo}hasEnd(){return this.endSet_}getIndexEndValue(){return re(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return re(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ha}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return re(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cn}copy(){const e=new Lg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Z0(i){const e={};if(i.isDefault())return e;let t;if(i.index_===cn?t="$priority":i.index_===$O?t="$value":i.index_===Ao?t="$key":(re(i.index_ instanceof ZO,"Unrecognized index type!"),t=i.index_.toString()),e.orderBy=Jt(t),i.startSet_){const s=i.startAfterSet_?"startAfter":"startAt";e[s]=Jt(i.indexStartValue_),i.startNameSet_&&(e[s]+=","+Jt(i.indexStartName_))}if(i.endSet_){const s=i.endBeforeSet_?"endBefore":"endAt";e[s]=Jt(i.indexEndValue_),i.endNameSet_&&(e[s]+=","+Jt(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function J0(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let t=i.viewFrom_;t===""&&(i.isViewFromLeft()?t="l":t="r"),e.vf=t}return i.index_!==cn&&(e.i=i.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends vw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(re(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,s,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.log_=ku("p:rest:"),this.listens_={}}listen(e,t,s,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const h=Qh.getListenId_(e,s),d={};this.listens_[h]=d;const p=Z0(e._queryParams);this.restRequest_(l+".json",p,(g,E)=>{let A=E;if(g===404&&(A=null,g=null),g===null&&this.onDataUpdate_(l,A,!1,s),To(this.listens_,h)===d){let w;g?g===401?w="permission_denied":w="rest_error:"+g:w="ok",a(w,null)}})}unlisten(e,t){const s=Qh.getListenId_(e,t);delete this.listens_[s]}get(e){const t=Z0(e._queryParams),s=e._path.toString(),a=new Fp;return this.restRequest_(s+".json",t,(l,h)=>{let d=h;l===404&&(d=null,l=null),l===null?(this.onDataUpdate_(s,d,!1,null),a.resolve(d)):a.reject(new Error(d))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+q1(t);this.log_("Sending REST request for "+h);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(s&&d.readyState===4){this.log_("REST Response for "+h+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=pu(d.responseText)}catch{On("Failed to parse JSON response for "+h+": "+d.responseText)}s(null,p)}else d.status!==401&&d.status!==404&&On("Got unsuccessful REST response for "+h+" Status: "+d.status),s(d.status);s=null}},d.open("GET",h,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.rootNode_=Ye.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(){return{value:null,children:new Map}}function xw(i,e,t){if(ke(e))i.value=t,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,t);else{const s=je(e);i.children.has(s)||i.children.set(s,Kh());const a=i.children.get(s);e=st(e),xw(a,e,t)}}function Cp(i,e,t){i.value!==null?t(e,i.value):rV(i,(s,a)=>{const l=new rt(e.toString()+"/"+s);Cp(a,l,t)})}function rV(i,e){i.children.forEach((t,s)=>{e(s,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ti(this.last_,(s,a)=>{t[s]=t[s]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=10*1e3,oV=30*1e3,lV=5*60*1e3;class uV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new aV(e);const s=$0+(oV-$0)*Math.random();hu(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;ti(e,(a,l)=>{l>0&&Es(this.statsToReport_,a)&&(t[a]=l,s=!0)}),s&&this.server_.reportStats(t),hu(this.reportStats_.bind(this),Math.floor(Math.random()*2*lV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ni||(Ni={}));function Mw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ow(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Vw(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=Ni.ACK_USER_WRITE,this.source=Mw()}operationForChild(e){if(ke(this.path)){if(this.affectedTree.value!=null)return re(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new rt(e));return new Yh($e(),t,this.revert)}}else return re(je(this.path)===e,"operationForChild called for unrelated child."),new Yh(st(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=Ni.OVERWRITE}operationForChild(e){return ke(this.path)?new fa(this.source,$e(),this.snap.getImmediateChild(e)):new fa(this.source,st(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=Ni.MERGE}operationForChild(e){if(ke(this.path)){const t=this.children.subtree(new rt(e));return t.isEmpty()?null:t.value?new fa(this.source,$e(),t.value):new wu(this.source,$e(),t)}else return re(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wu(this.source,st(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ke(e))return this.isFullyInitialized()&&!this.filtered_;const t=je(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function cV(i,e,t,s){const a=[],l=[];return e.forEach(h=>{h.type==="child_changed"&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&l.push(iV(h.childName,h.snapshotNode))}),tu(i,a,"child_removed",e,s,t),tu(i,a,"child_added",e,s,t),tu(i,a,"child_moved",l,s,t),tu(i,a,"child_changed",e,s,t),tu(i,a,"value",e,s,t),a}function tu(i,e,t,s,a,l){const h=s.filter(d=>d.type===t);h.sort((d,p)=>fV(i,d,p)),h.forEach(d=>{const p=hV(i,d,l);a.forEach(g=>{g.respondsTo(d.type)&&e.push(g.createEvent(p,i.query_))})})}function hV(i,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function fV(i,e,t){if(e.childName==null||t.childName==null)throw Vo("Should only compare child_ events.");const s=new ze(e.childName,e.snapshotNode),a=new ze(t.childName,t.snapshotNode);return i.index_.compare(s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(i,e){return{eventCache:i,serverCache:e}}function fu(i,e,t,s){return kw(new Pg(e,t,s),i.serverCache)}function Lw(i,e,t,s){return kw(i.eventCache,new Pg(e,t,s))}function Rp(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function da(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ym;const dV=()=>(Ym||(Ym=new Tn($M)),Ym);class it{static fromObject(e){let t=new it(null);return ti(e,(s,a)=>{t=t.set(new rt(s),a)}),t}constructor(e,t=dV()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:$e(),value:this.value};if(ke(e))return null;{const s=je(e),a=this.children.get(s);if(a!==null){const l=a.findRootMostMatchingPathAndValue(st(e),t);return l!=null?{path:Qt(new rt(s),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ke(e))return this;{const t=je(e),s=this.children.get(t);return s!==null?s.subtree(st(e)):new it(null)}}set(e,t){if(ke(e))return new it(t,this.children);{const s=je(e),l=(this.children.get(s)||new it(null)).set(st(e),t),h=this.children.insert(s,l);return new it(this.value,h)}}remove(e){if(ke(e))return this.children.isEmpty()?new it(null):new it(null,this.children);{const t=je(e),s=this.children.get(t);if(s){const a=s.remove(st(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new it(null):new it(this.value,l)}else return this}}get(e){if(ke(e))return this.value;{const t=je(e),s=this.children.get(t);return s?s.get(st(e)):null}}setTree(e,t){if(ke(e))return t;{const s=je(e),l=(this.children.get(s)||new it(null)).setTree(st(e),t);let h;return l.isEmpty()?h=this.children.remove(s):h=this.children.insert(s,l),new it(this.value,h)}}fold(e){return this.fold_($e(),e)}fold_(e,t){const s={};return this.children.inorderTraversal((a,l)=>{s[a]=l.fold_(Qt(e,a),t)}),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,$e(),t)}findOnPath_(e,t,s){const a=this.value?s(t,this.value):!1;if(a)return a;if(ke(e))return null;{const l=je(e),h=this.children.get(l);return h?h.findOnPath_(st(e),Qt(t,l),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,$e(),t)}foreachOnPath_(e,t,s){if(ke(e))return this;{this.value&&s(t,this.value);const a=je(e),l=this.children.get(a);return l?l.foreachOnPath_(st(e),Qt(t,a),s):new it(null)}}foreach(e){this.foreach_($e(),e)}foreach_(e,t){this.children.inorderTraversal((s,a)=>{a.foreach_(Qt(e,s),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,s)=>{s.value&&e(t,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.writeTree_=e}static empty(){return new hi(new it(null))}}function du(i,e,t){if(ke(e))return new hi(new it(t));{const s=i.writeTree_.findRootMostValueAndPath(e);if(s!=null){const a=s.path;let l=s.value;const h=Zn(a,e);return l=l.updateChild(h,t),new hi(i.writeTree_.set(a,l))}else{const a=new it(t),l=i.writeTree_.setTree(e,a);return new hi(l)}}}function eA(i,e,t){let s=i;return ti(t,(a,l)=>{s=du(s,Qt(e,a),l)}),s}function tA(i,e){if(ke(e))return hi.empty();{const t=i.writeTree_.setTree(e,new it(null));return new hi(t)}}function Ip(i,e){return _a(i,e)!=null}function _a(i,e){const t=i.writeTree_.findRootMostValueAndPath(e);return t!=null?i.writeTree_.get(t.path).getChild(Zn(t.path,e)):null}function nA(i){const e=[],t=i.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(cn,(s,a)=>{e.push(new ze(s,a))}):i.writeTree_.children.inorderTraversal((s,a)=>{a.value!=null&&e.push(new ze(s,a.value))}),e}function hr(i,e){if(ke(e))return i;{const t=_a(i,e);return t!=null?new hi(new it(t)):new hi(i.writeTree_.subtree(e))}}function Dp(i){return i.writeTree_.isEmpty()}function Mo(i,e){return Pw($e(),i.writeTree_,e)}function Pw(i,e,t){if(e.value!=null)return t.updateChild(i,e.value);{let s=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(re(l.value!==null,"Priority writes must always be leaf nodes"),s=l.value):t=Pw(Qt(i,a),l,t)}),!t.getChild(i).isEmpty()&&s!==null&&(t=t.updateChild(Qt(i,".priority"),s)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(i,e){return Fw(e,i)}function mV(i,e,t,s,a){re(s>i.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),i.allWrites.push({path:e,snap:t,writeId:s,visible:a}),a&&(i.visibleWrites=du(i.visibleWrites,e,t)),i.lastWriteId=s}function pV(i,e){for(let t=0;t<i.allWrites.length;t++){const s=i.allWrites[t];if(s.writeId===e)return s}return null}function gV(i,e){const t=i.allWrites.findIndex(d=>d.writeId===e);re(t>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[t];i.allWrites.splice(t,1);let a=s.visible,l=!1,h=i.allWrites.length-1;for(;a&&h>=0;){const d=i.allWrites[h];d.visible&&(h>=t&&yV(d,s.path)?a=!1:ui(s.path,d.path)&&(l=!0)),h--}if(a){if(l)return _V(i),!0;if(s.snap)i.visibleWrites=tA(i.visibleWrites,s.path);else{const d=s.children;ti(d,p=>{i.visibleWrites=tA(i.visibleWrites,Qt(s.path,p))})}return!0}else return!1}function yV(i,e){if(i.snap)return ui(i.path,e);for(const t in i.children)if(i.children.hasOwnProperty(t)&&ui(Qt(i.path,t),e))return!0;return!1}function _V(i){i.visibleWrites=Bw(i.allWrites,vV,$e()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function vV(i){return i.visible}function Bw(i,e,t){let s=hi.empty();for(let a=0;a<i.length;++a){const l=i[a];if(e(l)){const h=l.path;let d;if(l.snap)ui(t,h)?(d=Zn(t,h),s=du(s,d,l.snap)):ui(h,t)&&(d=Zn(h,t),s=du(s,$e(),l.snap.getChild(d)));else if(l.children){if(ui(t,h))d=Zn(t,h),s=eA(s,d,l.children);else if(ui(h,t))if(d=Zn(h,t),ke(d))s=eA(s,$e(),l.children);else{const p=To(l.children,je(d));if(p){const g=p.getChild(st(d));s=du(s,$e(),g)}}}else throw Vo("WriteRecord should have .snap or .children")}}return s}function jw(i,e,t,s,a){if(!s&&!a){const l=_a(i.visibleWrites,e);if(l!=null)return l;{const h=hr(i.visibleWrites,e);if(Dp(h))return t;if(t==null&&!Ip(h,$e()))return null;{const d=t||Ye.EMPTY_NODE;return Mo(h,d)}}}else{const l=hr(i.visibleWrites,e);if(!a&&Dp(l))return t;if(!a&&t==null&&!Ip(l,$e()))return null;{const h=function(g){return(g.visible||a)&&(!s||!~s.indexOf(g.writeId))&&(ui(g.path,e)||ui(e,g.path))},d=Bw(i.allWrites,h,e),p=t||Ye.EMPTY_NODE;return Mo(d,p)}}}function EV(i,e,t){let s=Ye.EMPTY_NODE;const a=_a(i.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(cn,(l,h)=>{s=s.updateImmediateChild(l,h)}),s;if(t){const l=hr(i.visibleWrites,e);return t.forEachChild(cn,(h,d)=>{const p=Mo(hr(l,new rt(h)),d);s=s.updateImmediateChild(h,p)}),nA(l).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}else{const l=hr(i.visibleWrites,e);return nA(l).forEach(h=>{s=s.updateImmediateChild(h.name,h.node)}),s}}function AV(i,e,t,s,a){re(s||a,"Either existingEventSnap or existingServerSnap must exist");const l=Qt(e,t);if(Ip(i.visibleWrites,l))return null;{const h=hr(i.visibleWrites,l);return Dp(h)?a.getChild(t):Mo(h,a.getChild(t))}}function TV(i,e,t,s){const a=Qt(e,t),l=_a(i.visibleWrites,a);if(l!=null)return l;if(s.isCompleteForChild(t)){const h=hr(i.visibleWrites,a);return Mo(h,s.getNode().getImmediateChild(t))}else return null}function SV(i,e){return _a(i.visibleWrites,e)}function wV(i,e,t,s,a,l,h){let d;const p=hr(i.visibleWrites,e),g=_a(p,$e());if(g!=null)d=g;else if(t!=null)d=Mo(p,t);else return[];if(d=d.withIndex(h),!d.isEmpty()&&!d.isLeafNode()){const E=[],A=h.getCompare(),w=l?d.getReverseIteratorFrom(s,h):d.getIteratorFrom(s,h);let D=w.getNext();for(;D&&E.length<a;)A(D,s)!==0&&E.push(D),D=w.getNext();return E}else return[]}function bV(){return{visibleWrites:hi.empty(),allWrites:[],lastWriteId:-1}}function Np(i,e,t,s){return jw(i.writeTree,i.treePath,e,t,s)}function zw(i,e){return EV(i.writeTree,i.treePath,e)}function iA(i,e,t,s){return AV(i.writeTree,i.treePath,e,t,s)}function Wh(i,e){return SV(i.writeTree,Qt(i.treePath,e))}function CV(i,e,t,s,a,l){return wV(i.writeTree,i.treePath,e,t,s,a,l)}function Ug(i,e,t){return TV(i.writeTree,i.treePath,e,t)}function qw(i,e){return Fw(Qt(i.treePath,e),i.writeTree)}function Fw(i,e){return{treePath:i,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;re(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),re(s!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(s);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(s,X0(s,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(s);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(s,nV(s,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(s,tV(s,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(s,X0(s,e.snapshotNode,a.oldSnap));else throw Vo("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}}const Hw=new IV;class Bg{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Pg(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ug(this.writes_,e,s)}}getChildAfterChild(e,t,s){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:da(this.viewCache_),l=CV(this.writes_,a,t,1,s,e);return l.length===0?null:l[0]}}function DV(i,e){re(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),re(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function NV(i,e,t,s,a){const l=new RV;let h,d;if(t.type===Ni.OVERWRITE){const g=t;g.source.fromUser?h=xp(i,e,g.path,g.snap,s,a,l):(re(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered()&&!ke(g.path),h=Xh(i,e,g.path,g.snap,s,a,d,l))}else if(t.type===Ni.MERGE){const g=t;g.source.fromUser?h=MV(i,e,g.path,g.children,s,a,l):(re(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered(),h=Mp(i,e,g.path,g.children,s,a,d,l))}else if(t.type===Ni.ACK_USER_WRITE){const g=t;g.revert?h=kV(i,e,g.path,s,a,l):h=OV(i,e,g.path,g.affectedTree,s,a,l)}else if(t.type===Ni.LISTEN_COMPLETE)h=VV(i,e,t.path,s,l);else throw Vo("Unknown operation type: "+t.type);const p=l.getChanges();return xV(e,h,p),{viewCache:h,changes:p}}function xV(i,e,t){const s=e.eventCache;if(s.isFullyInitialized()){const a=s.getNode().isLeafNode()||s.getNode().isEmpty(),l=Rp(i);(t.length>0||!i.eventCache.isFullyInitialized()||a&&!s.getNode().equals(l)||!s.getNode().getPriority().equals(l.getPriority()))&&t.push(eV(Rp(e)))}}function Gw(i,e,t,s,a,l){const h=e.eventCache;if(Wh(s,t)!=null)return e;{let d,p;if(ke(t))if(re(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=da(e),E=g instanceof Ye?g:Ye.EMPTY_NODE,A=zw(s,E);d=i.filter.updateFullNode(e.eventCache.getNode(),A,l)}else{const g=Np(s,da(e));d=i.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=je(t);if(g===".priority"){re(vr(t)===1,"Can't have a priority with additional path components");const E=h.getNode();p=e.serverCache.getNode();const A=iA(s,t,E,p);A!=null?d=i.filter.updatePriority(E,A):d=h.getNode()}else{const E=st(t);let A;if(h.isCompleteForChild(g)){p=e.serverCache.getNode();const w=iA(s,t,h.getNode(),p);w!=null?A=h.getNode().getImmediateChild(g).updateChild(E,w):A=h.getNode().getImmediateChild(g)}else A=Ug(s,g,e.serverCache);A!=null?d=i.filter.updateChild(h.getNode(),g,A,E,a,l):d=h.getNode()}}return fu(e,d,h.isFullyInitialized()||ke(t),i.filter.filtersNodes())}}function Xh(i,e,t,s,a,l,h,d){const p=e.serverCache;let g;const E=h?i.filter:i.filter.getIndexedFilter();if(ke(t))g=E.updateFullNode(p.getNode(),s,null);else if(E.filtersNodes()&&!p.isFiltered()){const D=p.getNode().updateChild(t,s);g=E.updateFullNode(p.getNode(),D,null)}else{const D=je(t);if(!p.isCompleteForPath(t)&&vr(t)>1)return e;const O=st(t),z=p.getNode().getImmediateChild(D).updateChild(O,s);D===".priority"?g=E.updatePriority(p.getNode(),z):g=E.updateChild(p.getNode(),D,z,O,Hw,null)}const A=Lw(e,g,p.isFullyInitialized()||ke(t),E.filtersNodes()),w=new Bg(a,A,l);return Gw(i,A,t,a,w,d)}function xp(i,e,t,s,a,l,h){const d=e.eventCache;let p,g;const E=new Bg(a,e,l);if(ke(t))g=i.filter.updateFullNode(e.eventCache.getNode(),s,h),p=fu(e,g,!0,i.filter.filtersNodes());else{const A=je(t);if(A===".priority")g=i.filter.updatePriority(e.eventCache.getNode(),s),p=fu(e,g,d.isFullyInitialized(),d.isFiltered());else{const w=st(t),D=d.getNode().getImmediateChild(A);let O;if(ke(w))O=s;else{const G=E.getCompleteChild(A);G!=null?Aw(w)===".priority"&&G.getChild(Sw(w)).isEmpty()?O=G:O=G.updateChild(w,s):O=Ye.EMPTY_NODE}if(D.equals(O))p=e;else{const G=i.filter.updateChild(d.getNode(),A,O,w,E,h);p=fu(e,G,d.isFullyInitialized(),i.filter.filtersNodes())}}}return p}function sA(i,e){return i.eventCache.isCompleteForChild(e)}function MV(i,e,t,s,a,l,h){let d=e;return s.foreach((p,g)=>{const E=Qt(t,p);sA(e,je(E))&&(d=xp(i,d,E,g,a,l,h))}),s.foreach((p,g)=>{const E=Qt(t,p);sA(e,je(E))||(d=xp(i,d,E,g,a,l,h))}),d}function rA(i,e,t){return t.foreach((s,a)=>{e=e.updateChild(s,a)}),e}function Mp(i,e,t,s,a,l,h,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;ke(t)?g=s:g=new it(null).setTree(t,s);const E=e.serverCache.getNode();return g.children.inorderTraversal((A,w)=>{if(E.hasChild(A)){const D=e.serverCache.getNode().getImmediateChild(A),O=rA(i,D,w);p=Xh(i,p,new rt(A),O,a,l,h,d)}}),g.children.inorderTraversal((A,w)=>{const D=!e.serverCache.isCompleteForChild(A)&&w.value===null;if(!E.hasChild(A)&&!D){const O=e.serverCache.getNode().getImmediateChild(A),G=rA(i,O,w);p=Xh(i,p,new rt(A),G,a,l,h,d)}}),p}function OV(i,e,t,s,a,l,h){if(Wh(a,t)!=null)return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(s.value!=null){if(ke(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return Xh(i,e,t,p.getNode().getChild(t),a,l,d,h);if(ke(t)){let g=new it(null);return p.getNode().forEachChild(Ao,(E,A)=>{g=g.set(new rt(E),A)}),Mp(i,e,t,g,a,l,d,h)}else return e}else{let g=new it(null);return s.foreach((E,A)=>{const w=Qt(t,E);p.isCompleteForPath(w)&&(g=g.set(E,p.getNode().getChild(w)))}),Mp(i,e,t,g,a,l,d,h)}}function VV(i,e,t,s,a){const l=e.serverCache,h=Lw(e,l.getNode(),l.isFullyInitialized()||ke(t),l.isFiltered());return Gw(i,h,t,s,Hw,a)}function kV(i,e,t,s,a,l){let h;if(Wh(s,t)!=null)return e;{const d=new Bg(s,e,a),p=e.eventCache.getNode();let g;if(ke(t)||je(t)===".priority"){let E;if(e.serverCache.isFullyInitialized())E=Np(s,da(e));else{const A=e.serverCache.getNode();re(A instanceof Ye,"serverChildren would be complete if leaf node"),E=zw(s,A)}E=E,g=i.filter.updateFullNode(p,E,l)}else{const E=je(t);let A=Ug(s,E,e.serverCache);A==null&&e.serverCache.isCompleteForChild(E)&&(A=p.getImmediateChild(E)),A!=null?g=i.filter.updateChild(p,E,A,st(t),d,l):e.eventCache.getNode().hasChild(E)?g=i.filter.updateChild(p,E,Ye.EMPTY_NODE,st(t),d,l):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=Np(s,da(e)),h.isLeafNode()&&(g=i.filter.updateFullNode(g,h,l)))}return h=e.serverCache.isFullyInitialized()||Wh(s,$e())!=null,fu(e,g,h,i.filter.filtersNodes())}}function LV(i,e){const t=da(i.viewCache_);return t&&(i.query._queryParams.loadsAllData()||!ke(e)&&!t.getImmediateChild(je(e)).isEmpty())?t.getChild(e):null}function aA(i,e,t,s){e.type===Ni.MERGE&&e.source.queryId!==null&&(re(da(i.viewCache_),"We should always have a full cache before handling merges"),re(Rp(i.viewCache_),"Missing event cache, even though we have a server cache"));const a=i.viewCache_,l=NV(i.processor_,a,e,t,s);return DV(i.processor_,l.viewCache),re(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=l.viewCache,PV(i,l.changes,l.viewCache.eventCache.getNode())}function PV(i,e,t,s){const a=i.eventRegistrations_;return cV(i.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oA;function UV(i){re(!oA,"__referenceConstructor has already been defined"),oA=i}function jg(i,e,t,s){const a=e.source.queryId;if(a!==null){const l=i.views.get(a);return re(l!=null,"SyncTree gave us an op for an invalid query."),aA(l,e,t,s)}else{let l=[];for(const h of i.views.values())l=l.concat(aA(h,e,t,s));return l}}function zg(i,e){let t=null;for(const s of i.views.values())t=t||LV(s,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lA;function BV(i){re(!lA,"__referenceConstructor has already been defined"),lA=i}class uA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new it(null),this.pendingWriteTree_=bV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jV(i,e,t,s,a){return mV(i.pendingWriteTree_,e,t,s,a),a?wf(i,new fa(Mw(),e,t)):[]}function _o(i,e,t=!1){const s=pV(i.pendingWriteTree_,e);if(gV(i.pendingWriteTree_,e)){let l=new it(null);return s.snap!=null?l=l.set($e(),!0):ti(s.children,h=>{l=l.set(new rt(h),!0)}),wf(i,new Yh(s.path,l,t))}else return[]}function Sf(i,e,t){return wf(i,new fa(Ow(),e,t))}function zV(i,e,t){const s=it.fromObject(t);return wf(i,new wu(Ow(),e,s))}function qV(i,e,t,s){const a=Ww(i,s);if(a!=null){const l=Xw(a),h=l.path,d=l.queryId,p=Zn(h,e),g=new fa(Vw(d),p,t);return Zw(i,h,g)}else return[]}function FV(i,e,t,s){const a=Ww(i,s);if(a){const l=Xw(a),h=l.path,d=l.queryId,p=Zn(h,e),g=it.fromObject(t),E=new wu(Vw(d),p,g);return Zw(i,h,E)}else return[]}function Qw(i,e,t){const a=i.pendingWriteTree_,l=i.syncPointTree_.findOnPath(e,(h,d)=>{const p=Zn(h,e),g=zg(d,p);if(g)return g});return jw(a,e,l,t,!0)}function wf(i,e){return Kw(e,i.syncPointTree_,null,Uw(i.pendingWriteTree_,$e()))}function Kw(i,e,t,s){if(ke(i.path))return Yw(i,e,t,s);{const a=e.get($e());t==null&&a!=null&&(t=zg(a,$e()));let l=[];const h=je(i.path),d=i.operationForChild(h),p=e.children.get(h);if(p&&d){const g=t?t.getImmediateChild(h):null,E=qw(s,h);l=l.concat(Kw(d,p,g,E))}return a&&(l=l.concat(jg(a,i,s,t))),l}}function Yw(i,e,t,s){const a=e.get($e());t==null&&a!=null&&(t=zg(a,$e()));let l=[];return e.children.inorderTraversal((h,d)=>{const p=t?t.getImmediateChild(h):null,g=qw(s,h),E=i.operationForChild(h);E&&(l=l.concat(Yw(E,d,p,g)))}),a&&(l=l.concat(jg(a,i,s,t))),l}function Ww(i,e){return i.tagToQueryMap.get(e)}function Xw(i){const e=i.indexOf("$");return re(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new rt(i.substr(0,e))}}function Zw(i,e,t){const s=i.syncPointTree_.get(e);re(s,"Missing sync point for query tag that we're tracking");const a=Uw(i.pendingWriteTree_,e);return jg(s,t,a,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qg(t)}node(){return this.node_}}class Fg{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Qt(this.path_,e);return new Fg(this.syncTree_,t)}node(){return Qw(this.syncTree_,this.path_)}}const HV=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},cA=function(i,e,t){if(!i||typeof i!="object")return i;if(re(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return GV(i[".sv"],e,t);if(typeof i[".sv"]=="object")return QV(i[".sv"],e);re(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},GV=function(i,e,t){switch(i){case"timestamp":return t.timestamp;default:re(!1,"Unexpected server value: "+i)}},QV=function(i,e,t){i.hasOwnProperty("increment")||re(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;typeof s!="number"&&re(!1,"Unexpected increment value: "+s);const a=e.node();if(re(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return s;const h=a.getValue();return typeof h!="number"?s:h+s},KV=function(i,e,t,s){return Hg(e,new Fg(t,i),s)},YV=function(i,e,t){return Hg(i,new qg(e),t)};function Hg(i,e,t){const s=i.getPriority().val(),a=cA(s,e.getImmediateChild(".priority"),t);let l;if(i.isLeafNode()){const h=i,d=cA(h.getValue(),e,t);return d!==h.getValue()||a!==h.getPriority().val()?new Ft(d,un(a)):i}else{const h=i;return l=h,a!==h.getPriority().val()&&(l=l.updatePriority(new Ft(a))),h.forEachChild(cn,(d,p)=>{const g=Hg(p,e.getImmediateChild(d),t);g!==p&&(l=l.updateImmediateChild(d,g))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function Qg(i,e){let t=e instanceof rt?e:new rt(e),s=i,a=je(t);for(;a!==null;){const l=To(s.node.children,a)||{children:{},childCount:0};s=new Gg(a,s,l),t=st(t),a=je(t)}return s}function zo(i){return i.node.value}function Jw(i,e){i.node.value=e,Op(i)}function $w(i){return i.node.childCount>0}function WV(i){return zo(i)===void 0&&!$w(i)}function bf(i,e){ti(i.node.children,(t,s)=>{e(new Gg(t,i,s))})}function eb(i,e,t,s){t&&e(i),bf(i,a=>{eb(a,e,!0)})}function XV(i,e,t){let s=i.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Uu(i){return new rt(i.parent===null?i.name:Uu(i.parent)+"/"+i.name)}function Op(i){i.parent!==null&&ZV(i.parent,i.name,i)}function ZV(i,e,t){const s=WV(t),a=Es(i.node.children,e);s&&a?(delete i.node.children[e],i.node.childCount--,Op(i)):!s&&!a&&(i.node.children[e]=t.node,i.node.childCount++,Op(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=/[\[\].#$\/\u0000-\u001F\u007F]/,$V=/[\[\].#$\u0000-\u001F\u007F]/,Wm=10*1024*1024,tb=function(i){return typeof i=="string"&&i.length!==0&&!JV.test(i)},ek=function(i){return typeof i=="string"&&i.length!==0&&!$V.test(i)},tk=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ek(i)},nb=function(i,e,t){const s=t instanceof rt?new VO(t,i):t;if(e===void 0)throw new Error(i+"contains undefined "+na(s));if(typeof e=="function")throw new Error(i+"contains a function "+na(s)+" with contents = "+e.toString());if(ew(e))throw new Error(i+"contains "+e.toString()+" "+na(s));if(typeof e=="string"&&e.length>Wm/3&&ef(e)>Wm)throw new Error(i+"contains a string greater than "+Wm+" utf8 bytes "+na(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(ti(e,(h,d)=>{if(h===".value")a=!0;else if(h!==".priority"&&h!==".sv"&&(l=!0,!tb(h)))throw new Error(i+" contains an invalid key ("+h+") "+na(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);kO(s,h),nb(i,d,s),LO(s)}),a&&l)throw new Error(i+' contains ".value" child '+na(s)+" in addition to actual children.")}},nk=function(i,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!tb(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!tk(t))throw new Error(H1(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sk(i,e){let t=null;for(let s=0;s<e.length;s++){const a=e[s],l=a.getPath();t!==null&&!ww(l,t.path)&&(i.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&i.eventLists_.push(t)}function va(i,e,t){sk(i,t),rk(i,s=>ui(s,e)||ui(e,s))}function rk(i,e){i.recursionDepth_++;let t=!0;for(let s=0;s<i.eventLists_.length;s++){const a=i.eventLists_[s];if(a){const l=a.path;e(l)?(ak(i.eventLists_[s]),i.eventLists_[s]=null):t=!1}}t&&(i.eventLists_=[]),i.recursionDepth_--}function ak(i){for(let e=0;e<i.events.length;e++){const t=i.events[e];if(t!==null){i.events[e]=null;const s=t.getEventRunner();cu&&ln("event: "+t.toString()),Lu(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="repo_interrupt",lk=25;class uk{constructor(e,t,s,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ik,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Kh(),this.transactionQueueTree_=new Gg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ck(i,e,t){if(i.stats_=Mg(i.repoInfo_),i.forceRestClient_||rO())i.server_=new Qh(i.repoInfo_,(s,a,l,h)=>{hA(i,s,a,l,h)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>fA(i,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(t)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new ds(i.repoInfo_,e,(s,a,l,h)=>{hA(i,s,a,l,h)},s=>{fA(i,s)},s=>{fk(i,s)},i.authTokenProvider_,i.appCheckProvider_,t),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=cO(i.repoInfo_,()=>new uV(i.stats_,i.server_)),i.infoData_=new sV,i.infoSyncTree_=new uA({startListening:(s,a,l,h)=>{let d=[];const p=i.infoData_.getNode(s._path);return p.isEmpty()||(d=Sf(i.infoSyncTree_,s._path,p),setTimeout(()=>{h("ok")},0)),d},stopListening:()=>{}}),Kg(i,"connected",!1),i.serverSyncTree_=new uA({startListening:(s,a,l,h)=>(i.server_.listen(s,l,a,(d,p)=>{const g=h(d,p);va(i.eventQueue_,s._path,g)}),[]),stopListening:(s,a)=>{i.server_.unlisten(s,a)}})}function hk(i){const t=i.infoData_.getNode(new rt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function ib(i){return HV({timestamp:hk(i)})}function hA(i,e,t,s,a){i.dataUpdateCount++;const l=new rt(e);t=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,t):t;let h=[];if(a)if(s){const p=Rh(t,g=>un(g));h=FV(i.serverSyncTree_,l,p,a)}else{const p=un(t);h=qV(i.serverSyncTree_,l,p,a)}else if(s){const p=Rh(t,g=>un(g));h=zV(i.serverSyncTree_,l,p)}else{const p=un(t);h=Sf(i.serverSyncTree_,l,p)}let d=l;h.length>0&&(d=Wg(i,l)),va(i.eventQueue_,d,h)}function fA(i,e){Kg(i,"connected",e),e===!1&&mk(i)}function fk(i,e){ti(e,(t,s)=>{Kg(i,t,s)})}function Kg(i,e,t){const s=new rt("/.info/"+e),a=un(t);i.infoData_.updateSnapshot(s,a);const l=Sf(i.infoSyncTree_,s,a);va(i.eventQueue_,s,l)}function dk(i){return i.nextWriteId_++}function mk(i){sb(i,"onDisconnectEvents");const e=ib(i),t=Kh();Cp(i.onDisconnect_,$e(),(a,l)=>{const h=KV(a,l,i.serverSyncTree_,e);xw(t,a,h)});let s=[];Cp(t,$e(),(a,l)=>{s=s.concat(Sf(i.serverSyncTree_,a,l));const h=_k(i,a);Wg(i,h)}),i.onDisconnect_=Kh(),va(i.eventQueue_,$e(),s)}function pk(i){i.persistentConnection_&&i.persistentConnection_.interrupt(ok)}function sb(i,...e){let t="";i.persistentConnection_&&(t=i.persistentConnection_.id+":"),ln(t,...e)}function rb(i,e,t){return Qw(i.serverSyncTree_,e,t)||Ye.EMPTY_NODE}function Yg(i,e=i.transactionQueueTree_){if(e||Cf(i,e),zo(e)){const t=ob(i,e);re(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&gk(i,Uu(e),t)}else $w(e)&&bf(e,t=>{Yg(i,t)})}function gk(i,e,t){const s=t.map(g=>g.currentWriteId),a=rb(i,e,s);let l=a;const h=a.hash();for(let g=0;g<t.length;g++){const E=t[g];re(E.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const A=Zn(e,E.path);l=l.updateChild(A,E.currentOutputSnapshotRaw)}const d=l.val(!0),p=e;i.server_.put(p.toString(),d,g=>{sb(i,"transaction put response",{path:p.toString(),status:g});let E=[];if(g==="ok"){const A=[];for(let w=0;w<t.length;w++)t[w].status=2,E=E.concat(_o(i.serverSyncTree_,t[w].currentWriteId)),t[w].onComplete&&A.push(()=>t[w].onComplete(null,!0,t[w].currentOutputSnapshotResolved)),t[w].unwatcher();Cf(i,Qg(i.transactionQueueTree_,e)),Yg(i,i.transactionQueueTree_),va(i.eventQueue_,e,E);for(let w=0;w<A.length;w++)Lu(A[w])}else{if(g==="datastale")for(let A=0;A<t.length;A++)t[A].status===3?t[A].status=4:t[A].status=0;else{On("transaction at "+p.toString()+" failed: "+g);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=g}Wg(i,e)}},h)}function Wg(i,e){const t=ab(i,e),s=Uu(t),a=ob(i,t);return yk(i,a,s),s}function yk(i,e,t){if(e.length===0)return;const s=[];let a=[];const h=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],g=Zn(t,p.path);let E=!1,A;if(re(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)E=!0,A=p.abortReason,a=a.concat(_o(i.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=lk)E=!0,A="maxretry",a=a.concat(_o(i.serverSyncTree_,p.currentWriteId,!0));else{const w=rb(i,p.path,h);p.currentInputSnapshot=w;const D=e[d].update(w.val());if(D!==void 0){nb("transaction failed: Data returned ",D,p.path);let O=un(D);typeof D=="object"&&D!=null&&Es(D,".priority")||(O=O.updatePriority(w.getPriority()));const z=p.currentWriteId,W=ib(i),ne=YV(O,w,W);p.currentOutputSnapshotRaw=O,p.currentOutputSnapshotResolved=ne,p.currentWriteId=dk(i),h.splice(h.indexOf(z),1),a=a.concat(jV(i.serverSyncTree_,p.path,ne,p.currentWriteId,p.applyLocally)),a=a.concat(_o(i.serverSyncTree_,z,!0))}else E=!0,A="nodata",a=a.concat(_o(i.serverSyncTree_,p.currentWriteId,!0))}va(i.eventQueue_,t,a),a=[],E&&(e[d].status=2,function(w){setTimeout(w,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(A==="nodata"?s.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):s.push(()=>e[d].onComplete(new Error(A),!1,null))))}Cf(i,i.transactionQueueTree_);for(let d=0;d<s.length;d++)Lu(s[d]);Yg(i,i.transactionQueueTree_)}function ab(i,e){let t,s=i.transactionQueueTree_;for(t=je(e);t!==null&&zo(s)===void 0;)s=Qg(s,t),e=st(e),t=je(e);return s}function ob(i,e){const t=[];return lb(i,e,t),t.sort((s,a)=>s.order-a.order),t}function lb(i,e,t){const s=zo(e);if(s)for(let a=0;a<s.length;a++)t.push(s[a]);bf(e,a=>{lb(i,a,t)})}function Cf(i,e){const t=zo(e);if(t){let s=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[s]=t[a],s++);t.length=s,Jw(e,t.length>0?t:void 0)}bf(e,s=>{Cf(i,s)})}function _k(i,e){const t=Uu(ab(i,e)),s=Qg(i.transactionQueueTree_,e);return XV(s,a=>{Xm(i,a)}),Xm(i,s),eb(s,a=>{Xm(i,a)}),t}function Xm(i,e){const t=zo(e);if(t){const s=[];let a=[],l=-1;for(let h=0;h<t.length;h++)t[h].status===3||(t[h].status===1?(re(l===h-1,"All SENT items should be at beginning of queue."),l=h,t[h].status=3,t[h].abortReason="set"):(re(t[h].status===0,"Unexpected transaction status in abort"),t[h].unwatcher(),a=a.concat(_o(i.serverSyncTree_,t[h].currentWriteId,!0)),t[h].onComplete&&s.push(t[h].onComplete.bind(null,new Error("set"),!1,null))));l===-1?Jw(e,void 0):t.length=l+1,va(i.eventQueue_,Uu(e),a);for(let h=0;h<s.length;h++)Lu(s[h])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(i){let e="";const t=i.split("/");for(let s=0;s<t.length;s++)if(t[s].length>0){let a=t[s];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function Ek(i){const e={};i.charAt(0)==="?"&&(i=i.substring(1));for(const t of i.split("&")){if(t.length===0)continue;const s=t.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):On(`Invalid query segment '${t}' in query '${i}'`)}return e}const dA=function(i,e){const t=Ak(i),s=t.namespace;t.domain==="firebase.com"&&_s(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&t.domain!=="localhost"&&_s("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||ZM();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new fw(t.host,t.secure,s,a,e,"",s!==t.subdomain),path:new rt(t.pathString)}},Ak=function(i){let e="",t="",s="",a="",l="",h=!0,d="https",p=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(d=i.substring(0,g-1),i=i.substring(g+2));let E=i.indexOf("/");E===-1&&(E=i.length);let A=i.indexOf("?");A===-1&&(A=i.length),e=i.substring(0,Math.min(E,A)),E<A&&(a=vk(i.substring(E,A)));const w=Ek(i.substring(Math.min(i.length,A)));g=e.indexOf(":"),g>=0?(h=d==="https"||d==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const D=e.slice(0,g);if(D.toLowerCase()==="localhost")t="localhost";else if(D.split(".").length<=2)t=D;else{const O=e.indexOf(".");s=e.substring(0,O).toLowerCase(),t=e.substring(O+1),l=s}"ns"in w&&(l=w.ns)}return{host:e,port:p,domain:t,subdomain:s,secure:h,scheme:d,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t,s,a){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=a}get key(){return ke(this._path)?null:Aw(this._path)}get ref(){return new qo(this._repo,this._path)}get _queryIdentifier(){const e=J0(this._queryParams),t=Ng(e);return t==="{}"?"default":t}get _queryObject(){return J0(this._queryParams)}isEqual(e){if(e=ei(e),!(e instanceof Xg))return!1;const t=this._repo===e._repo,s=ww(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&s&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+OO(this._path)}}class qo extends Xg{constructor(e,t){super(e,t,new Lg,!1)}get parent(){const e=Sw(this._path);return e===null?null:new qo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}UV(qo);BV(qo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="FIREBASE_DATABASE_EMULATOR_HOST",Vp={};let Sk=!1;function wk(i,e,t,s){i.repoInfo_=new fw(e,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,t),s&&(i.authTokenProvider_=s)}function bk(i,e,t,s,a){let l=s||i.options.databaseURL;l===void 0&&(i.options.projectId||_s("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ln("Using default host for project ",i.options.projectId),l=`${i.options.projectId}-default-rtdb.firebaseio.com`);let h=dA(l,a),d=h.repoInfo,p;typeof process<"u"&&O0&&(p=O0[Tk]),p?(l=`http://${p}?ns=${d.namespace}`,h=dA(l,a),d=h.repoInfo):h.repoInfo.secure;const g=new oO(i.name,i.options,e);nk("Invalid Firebase Database URL",h),ke(h.path)||_s("Database URL must point to the root of a Firebase Database (not including a child path).");const E=Rk(d,i,g,new aO(i,t));return new Ik(E,i)}function Ck(i,e){const t=Vp[e];(!t||t[i.key]!==i)&&_s(`Database ${e}(${i.repoInfo_}) has already been deleted.`),pk(i),delete t[i.key]}function Rk(i,e,t,s){let a=Vp[e.name];a||(a={},Vp[e.name]=a);let l=a[i.toURLString()];return l&&_s("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new uk(i,Sk,t,s),a[i.toURLString()]=l,l}class Ik{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ck(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qo(this._repo,$e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ck(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_s("Cannot call "+e+" on a deleted database.")}}function Dk(i=Gp(),e){const t=ko(i,"database").getImmediate({identifier:e});if(!t._instanceStarted){const s=zA("database");s&&Nk(t,...s)}return t}function Nk(i,e,t,s={}){i=ei(i),i._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=i._repoInternal;if(i._instanceStarted){if(a===i._repoInternal.repoInfo_.host&&So(s,l.repoInfo_.emulatorOptions))return;_s("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(l.repoInfo_.nodeAdmin)s.mockUserToken&&_s('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new wh(wh.OWNER);else if(s.mockUserToken){const d=typeof s.mockUserToken=="string"?s.mockUserToken:FA(s.mockUserToken,i.app.options.projectId);h=new wh(d)}wk(l,a,s,h)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(i){GM($A),ps(new Oi("database",(e,{instanceIdentifier:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return bk(s,a,l,t)},"PUBLIC").setMultipleInstances(!0)),Jn(V0,k0,i),Jn(V0,k0,"esm2017")}ds.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};ds.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};xk();const Mk={apiKey:"AIzaSyCSFvu4pGZjYPXf7pRiqmnjhNTgW6Rp_bU",authDomain:"la-palacio.firebaseapp.com",projectId:"la-palacio",storageBucket:"la-palacio.firebasestorage.app",messagingSenderId:"667140555392",appId:"1:667140555392:web:786cc42ea57f0af4041c65",measurementId:"G-C746HDD58F"},Zg=eT(Mk);ED(Zg);const Jg=wM(Zg);Dk(Zg);const ub=SM(Jg,"books"),cb=async()=>(await zM(ub)).docs.map(e=>({id:e.id,...e.data()})),Ok=async i=>({id:(await HM(ub,i)).id,...i}),Vk=async i=>{await FM(Tg(Jg,"books",i))},kk=async(i,e)=>{const t=Tg(Jg,"books",i);await qM(t,e)},Lk=()=>{const[i,e]=K.useState([]);return K.useEffect(()=>{(async()=>{try{const s=await cb();e(s)}catch(s){console.error("Error fetching books:",s)}})()},[]),I.jsx(Iu,{children:I.jsxs("section",{className:"home-container",children:[I.jsxs("div",{className:"txt-news-container",children:[I.jsx("span",{className:"txt-used",children:"Usados | Recomendados | Novedades "}),I.jsx(Zt,{className:"link-used",to:"/store",children:"Ver ms +"})]}),I.jsx("div",{className:"grid-container-novedades",children:i.length>0?i.map((t,s)=>I.jsx(LA,{index:s,itemSrc:t.cover,itemAlt:t.title,title:t.title,author:t.author},t.id)):I.jsx("p",{children:"Loading..."})})]})})},Pk="/TiendaLaPalacio/assets/banner-DvMdijAQ.png",Uk=()=>I.jsx(Iu,{children:I.jsxs("section",{className:"writers-section",children:[I.jsxs("div",{className:"writers-container",children:[I.jsxs("div",{className:"txt-writers-header-container",children:[I.jsx("p",{className:"txt-writers",children:"Escriotres recomendados"}),I.jsx(Zt,{className:"link-writers",to:"/",children:"Ver ms escritorxs +"})]}),I.jsxs("div",{className:"txt-writers-container",children:[I.jsxs("p",{children:["Donna Haraway",I.jsx("span",{children:"Ensayo"})]}),I.jsxs("p",{children:["Ioshua",I.jsx("span",{children:"Poesa"})]}),I.jsxs("p",{children:["Ursula Le Guin",I.jsx("span",{children:"Ciencia Ficcin"})]}),I.jsxs("p",{children:["Mark Fisher",I.jsx("span",{children:"Ensayo"})]}),I.jsxs("p",{children:["Pedro Lemebel",I.jsx("span",{children:"Literatura"})]}),I.jsxs("p",{children:["Jos Sbarra",I.jsx("span",{children:"Literatura"})]}),I.jsxs("p",{children:["Paul Preciado",I.jsx("span",{children:"Ensayo"})]}),I.jsxs("p",{children:["Alejandra Pizarnik",I.jsx("span",{children:"Poesa"})]}),I.jsxs("p",{children:["Rosario Blfari",I.jsx("span",{children:"Literatura"})]})]})]}),I.jsx("section",{className:"banner-container",children:I.jsx("img",{src:Pk,alt:"banner-writers"})})]})}),Bk=()=>{const[i,e]=K.useState({title:"",author:"",telephone:"",email:"",message:""});console.log(i);const t=a=>{const{id:l,value:h}=a.target;console.log(l,h),e(d=>({...d,[l]:h}))},s=a=>{a.preventDefault();const l=JSON.stringify(i);alert(`"Formulario enviado: ${l}"`),e({title:"",author:"",telephone:"",email:"",message:""})};return I.jsxs("form",{className:"form-contact-f",onSubmit:s,children:[I.jsxs("div",{className:"row-1",children:[I.jsxs("div",{className:"lab-input-container",children:[I.jsx("label",{htmlFor:"title",className:"form-label",children:"Ttulo"}),I.jsx("input",{type:"text",className:"form-control",id:"title",value:i.title,onChange:t,placeholder:"Ingrese ttulo",required:!0})]}),I.jsxs("div",{className:"lab-input-container",children:[I.jsx("label",{htmlFor:"author",className:"form-label",children:"Autor"}),I.jsx("input",{type:"text",className:"form-control",id:"author",value:i.author,onChange:t,placeholder:"Ingrese autor",required:!0})]})]}),I.jsxs("div",{className:"row-2",children:[I.jsxs("div",{className:"lab-input-container",children:[I.jsx("label",{htmlFor:"telephone",className:"form-label",children:"Telfono"}),I.jsx("input",{type:"tel",className:"form-control",id:"telephone",value:i.telephone,onChange:t,placeholder:"Ingrese telfono",required:!0})]}),I.jsxs("div",{className:"lab-input-container",children:[I.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),I.jsx("input",{type:"email",className:"form-control",id:"email",value:i.email,onChange:t,placeholder:"nombre@ejemplo.com"})]})]}),I.jsx("div",{className:"row-3",children:I.jsxs("div",{className:"lab-input-container",children:[I.jsx("label",{htmlFor:"message",className:"form-label",children:"Mensaje"}),I.jsx("textarea",{className:"form-control",id:"message",rows:"3",value:i.message,onChange:t,placeholder:"Detalle de edicin u otras observaciones"})]})}),I.jsx("div",{className:"row-4",children:I.jsx("button",{id:"btn-submit",type:"submit",className:"btn",children:"Enviar"})})]})},jk="/TiendaLaPalacio/assets/bg-img-contact-CokVmPgP.png",zk=()=>I.jsx(Iu,{children:I.jsxs("section",{className:"contact-container",children:[I.jsxs("div",{className:"form-container",children:[I.jsx("p",{className:"txt-form-big",children:`si el libro que buscs no est en el catlogo,
 dejnos tu consulta y a la brevedad te responderemos`}),I.jsx(Bk,{})]}),I.jsxs("div",{className:"contact-img-des",children:[I.jsx("div",{className:"bg-img-contact",children:I.jsx("img",{height:"733px",src:jk,alt:"banner-contact"})}),I.jsxs("div",{className:"decription-container",children:[I.jsx("p",{className:"txt-color txt-pad-8",children:`somos una librera digital de libros nuevos y usados
 recomendados por Mecha y Khroma (librerxs hace 20 aos)`}),I.jsx("p",{className:"txt-color",children:"contactanos:"}),I.jsx("p",{className:"txt-color-br",children:"@lapalaciolibros"}),I.jsx("p",{className:"txt-color-br",children:"lapalacio@gmail.com"}),I.jsx(Zt,{to:"/",className:"txt-color txt-size-mini",children:"Ver ms de nosotroxs+"})]})]})]})}),qk=()=>{const[i,e]=K.useState([]),[t,s]=K.useState({id:null,title:"",author:"",cover:""});K.useEffect(()=>{a()},[]);const a=async()=>{const p=await cb();e(p)},l=async p=>{p.preventDefault(),t.id?await kk(t.id,{title:t.title,author:t.author,cover:t.cover}):await Ok({title:t.title,author:t.author,cover:t.cover}),s({id:null,title:"",author:"",cover:""}),a()},h=p=>{s(p)},d=async p=>{window.confirm("Ests seguro de eliminar este libro?")&&(await Vk(p),a())};return I.jsx(Iu,{children:I.jsx("section",{className:"section-container",children:I.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:I.jsxs("div",{className:"max-w-7xl mx-auto",children:[I.jsxs("div",{className:"mb-10 text-center space-y-2",children:[I.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Administracin de Libros"}),I.jsx("p",{className:"text-gray-600",children:"Gestiona tu catlogo de libros"})]}),I.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-gray-100 mb-10 transition-all duration-300 hover:shadow-2xl",children:[I.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800 border-b pb-4",children:t.id?" Editar Libro":" Agregar Nuevo Libro"}),I.jsxs("form",{onSubmit:l,className:"space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo"}),I.jsx("input",{type:"text",value:t.title,onChange:p=>s({...t,title:p.target.value}),className:"w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"Ttulo del libro",required:!0})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Autor"}),I.jsx("input",{type:"text",value:t.author,onChange:p=>s({...t,author:p.target.value}),className:"w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"Autor del libro",required:!0})]}),I.jsxs("div",{className:"md:col-span-2 space-y-2",children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL de la Portada"}),I.jsx("input",{type:"text",value:t.cover,onChange:p=>s({...t,cover:p.target.value}),className:"w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"https://ejemplo.com/portada.jpg"})]})]}),I.jsx("button",{type:"submit",className:"w-full flex items-center justify-center space-x-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-[1.02]",children:t.id?I.jsxs(I.Fragment,{children:[I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293a1 1 0 00-1.414 0z"})}),I.jsx("span",{children:"Actualizar Libro"})]}):I.jsxs(I.Fragment,{children:[I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),I.jsx("span",{children:"Agregar Libro"})]})})]})]}),I.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[I.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[I.jsx("thead",{className:"bg-gray-50",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Ttulo"}),I.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Autor"}),I.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Acciones"})]})}),I.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(p=>I.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[I.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I.jsxs("div",{className:"flex items-center",children:[p.cover&&I.jsx("img",{src:p.cover,alt:`Portada de ${p.title}`,className:"w-12 h-16 object-cover rounded-md shadow-sm mr-4"}),I.jsx("span",{className:"text-gray-900 font-medium",children:p.title})]})}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:p.author}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I.jsxs("div",{className:"flex space-x-4",children:[I.jsxs("button",{onClick:()=>h(p),className:"text-indigo-600 hover:text-indigo-900 flex items-center group",children:[I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 group-hover:scale-110 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),I.jsx("span",{className:"hidden md:inline",children:"Editar"})]}),I.jsxs("button",{onClick:()=>d(p.id),className:"text-red-600 hover:text-red-900 flex items-center group",children:[I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 group-hover:scale-110 transition-transform",viewBox:"0 0 20 20",fill:"currentColor",children:I.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),I.jsx("span",{className:"hidden md:inline",children:"Eliminar"})]})]})})]},p.id))})]}),i.length===0&&I.jsx("div",{className:"text-center py-12 bg-gray-50",children:I.jsx("p",{className:"text-gray-500",children:"No hay libros registrados"})})]})]})})})})},Fk=()=>I.jsx(r1,{children:I.jsxs(kR,{children:[I.jsx(ho,{path:"/",element:I.jsx(E1,{})}),I.jsx(ho,{path:"/store",element:I.jsx(Lk,{})}),I.jsx(ho,{path:"/writers",element:I.jsx(Uk,{})}),I.jsx(ho,{path:"/contact",element:I.jsx(zk,{})}),I.jsx(ho,{path:"/admin",element:I.jsx(qk,{})})]})}),Hk=()=>I.jsx(Fk,{});HC.createRoot(document.getElementById("root")).render(I.jsx(K.StrictMode,{children:I.jsx(Hk,{})}));
